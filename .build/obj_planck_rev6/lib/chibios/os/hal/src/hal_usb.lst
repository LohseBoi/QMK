   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 4
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 2
  13              		.file	"hal_usb.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.set_address,"ax",%progbits
  18              		.align	1
  19              		.arch armv7e-m
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	set_address:
  26              	.LVL0:
  27              	.LFB329:
  28              		.file 1 "lib/chibios/os/hal/src/hal_usb.c"
   1:lib/chibios/os/hal/src/hal_usb.c **** /*
   2:lib/chibios/os/hal/src/hal_usb.c ****     ChibiOS - Copyright (C) 2006..2018 Giovanni Di Sirio
   3:lib/chibios/os/hal/src/hal_usb.c **** 
   4:lib/chibios/os/hal/src/hal_usb.c ****     Licensed under the Apache License, Version 2.0 (the "License");
   5:lib/chibios/os/hal/src/hal_usb.c ****     you may not use this file except in compliance with the License.
   6:lib/chibios/os/hal/src/hal_usb.c ****     You may obtain a copy of the License at
   7:lib/chibios/os/hal/src/hal_usb.c **** 
   8:lib/chibios/os/hal/src/hal_usb.c ****         http://www.apache.org/licenses/LICENSE-2.0
   9:lib/chibios/os/hal/src/hal_usb.c **** 
  10:lib/chibios/os/hal/src/hal_usb.c ****     Unless required by applicable law or agreed to in writing, software
  11:lib/chibios/os/hal/src/hal_usb.c ****     distributed under the License is distributed on an "AS IS" BASIS,
  12:lib/chibios/os/hal/src/hal_usb.c ****     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  13:lib/chibios/os/hal/src/hal_usb.c ****     See the License for the specific language governing permissions and
  14:lib/chibios/os/hal/src/hal_usb.c ****     limitations under the License.
  15:lib/chibios/os/hal/src/hal_usb.c **** */
  16:lib/chibios/os/hal/src/hal_usb.c **** 
  17:lib/chibios/os/hal/src/hal_usb.c **** /**
  18:lib/chibios/os/hal/src/hal_usb.c ****  * @file    hal_usb.c
  19:lib/chibios/os/hal/src/hal_usb.c ****  * @brief   USB Driver code.
  20:lib/chibios/os/hal/src/hal_usb.c ****  *
  21:lib/chibios/os/hal/src/hal_usb.c ****  * @addtogroup USB
  22:lib/chibios/os/hal/src/hal_usb.c ****  * @{
  23:lib/chibios/os/hal/src/hal_usb.c ****  */
  24:lib/chibios/os/hal/src/hal_usb.c **** 
  25:lib/chibios/os/hal/src/hal_usb.c **** #include <string.h>
  26:lib/chibios/os/hal/src/hal_usb.c **** 
  27:lib/chibios/os/hal/src/hal_usb.c **** #include "hal.h"
  28:lib/chibios/os/hal/src/hal_usb.c **** 
  29:lib/chibios/os/hal/src/hal_usb.c **** #if (HAL_USE_USB == TRUE) || defined(__DOXYGEN__)
  30:lib/chibios/os/hal/src/hal_usb.c **** 
  31:lib/chibios/os/hal/src/hal_usb.c **** /*===========================================================================*/
  32:lib/chibios/os/hal/src/hal_usb.c **** /* Driver local definitions.                                                 */
  33:lib/chibios/os/hal/src/hal_usb.c **** /*===========================================================================*/
  34:lib/chibios/os/hal/src/hal_usb.c **** 
  35:lib/chibios/os/hal/src/hal_usb.c **** /*===========================================================================*/
  36:lib/chibios/os/hal/src/hal_usb.c **** /* Driver exported variables.                                                */
  37:lib/chibios/os/hal/src/hal_usb.c **** /*===========================================================================*/
  38:lib/chibios/os/hal/src/hal_usb.c **** 
  39:lib/chibios/os/hal/src/hal_usb.c **** /*===========================================================================*/
  40:lib/chibios/os/hal/src/hal_usb.c **** /* Driver local variables and types.                                         */
  41:lib/chibios/os/hal/src/hal_usb.c **** /*===========================================================================*/
  42:lib/chibios/os/hal/src/hal_usb.c **** 
  43:lib/chibios/os/hal/src/hal_usb.c **** static const uint8_t zero_status[] = {0x00, 0x00};
  44:lib/chibios/os/hal/src/hal_usb.c **** static const uint8_t active_status[] = {0x00, 0x00};
  45:lib/chibios/os/hal/src/hal_usb.c **** static const uint8_t halted_status[] = {0x01, 0x00};
  46:lib/chibios/os/hal/src/hal_usb.c **** 
  47:lib/chibios/os/hal/src/hal_usb.c **** /*===========================================================================*/
  48:lib/chibios/os/hal/src/hal_usb.c **** /* Driver local functions.                                                   */
  49:lib/chibios/os/hal/src/hal_usb.c **** /*===========================================================================*/
  50:lib/chibios/os/hal/src/hal_usb.c **** 
  51:lib/chibios/os/hal/src/hal_usb.c **** static uint16_t get_hword(uint8_t *p) {
  52:lib/chibios/os/hal/src/hal_usb.c ****   uint16_t hw;
  53:lib/chibios/os/hal/src/hal_usb.c **** 
  54:lib/chibios/os/hal/src/hal_usb.c ****   hw  = (uint16_t)*p++;
  55:lib/chibios/os/hal/src/hal_usb.c ****   hw |= (uint16_t)*p << 8U;
  56:lib/chibios/os/hal/src/hal_usb.c ****   return hw;
  57:lib/chibios/os/hal/src/hal_usb.c **** }
  58:lib/chibios/os/hal/src/hal_usb.c **** 
  59:lib/chibios/os/hal/src/hal_usb.c **** /**
  60:lib/chibios/os/hal/src/hal_usb.c ****  * @brief  SET ADDRESS transaction callback.
  61:lib/chibios/os/hal/src/hal_usb.c ****  *
  62:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] usbp      pointer to the @p USBDriver object
  63:lib/chibios/os/hal/src/hal_usb.c ****  */
  64:lib/chibios/os/hal/src/hal_usb.c **** static void set_address(USBDriver *usbp) {
  29              		.loc 1 64 42 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  65:lib/chibios/os/hal/src/hal_usb.c **** 
  66:lib/chibios/os/hal/src/hal_usb.c ****   usbp->address = usbp->setup[2];
  33              		.loc 1 66 3 view .LVU1
  64:lib/chibios/os/hal/src/hal_usb.c **** 
  34              		.loc 1 64 42 is_stmt 0 view .LVU2
  35 0000 10B5     		push	{r4, lr}
  36              		.cfi_def_cfa_offset 8
  37              		.cfi_offset 4, -8
  38              		.cfi_offset 14, -4
  64:lib/chibios/os/hal/src/hal_usb.c **** 
  39              		.loc 1 64 42 view .LVU3
  40 0002 0446     		mov	r4, r0
  41              		.loc 1 66 17 view .LVU4
  42 0004 90F87630 		ldrb	r3, [r0, #118]	@ zero_extendqisi2
  43 0008 80F87E30 		strb	r3, [r0, #126]
  67:lib/chibios/os/hal/src/hal_usb.c ****   usb_lld_set_address(usbp);
  44              		.loc 1 67 3 is_stmt 1 view .LVU5
  45 000c FFF7FEFF 		bl	usb_lld_set_address
  46              	.LVL1:
  68:lib/chibios/os/hal/src/hal_usb.c ****   _usb_isr_invoke_event_cb(usbp, USB_EVENT_ADDRESS);
  47              		.loc 1 68 3 view .LVU6
  48 0010 6368     		ldr	r3, [r4, #4]
  49 0012 1B68     		ldr	r3, [r3]
  50 0014 13B1     		cbz	r3, .L2
  51              		.loc 1 68 3 discriminator 1 view .LVU7
  52 0016 0121     		movs	r1, #1
  53 0018 2046     		mov	r0, r4
  54 001a 9847     		blx	r3
  55              	.LVL2:
  56              	.L2:
  57              		.loc 1 68 52 discriminator 3 view .LVU8
  69:lib/chibios/os/hal/src/hal_usb.c ****   usbp->state = USB_SELECTED;
  58              		.loc 1 69 3 discriminator 3 view .LVU9
  59              		.loc 1 69 15 is_stmt 0 discriminator 3 view .LVU10
  60 001c 0323     		movs	r3, #3
  61 001e 2370     		strb	r3, [r4]
  70:lib/chibios/os/hal/src/hal_usb.c **** }
  62              		.loc 1 70 1 discriminator 3 view .LVU11
  63 0020 10BD     		pop	{r4, pc}
  64              		.loc 1 70 1 discriminator 3 view .LVU12
  65              		.cfi_endproc
  66              	.LFE329:
  68              		.section	.text.usbInit,"ax",%progbits
  69              		.align	1
  70              		.global	usbInit
  71              		.syntax unified
  72              		.thumb
  73              		.thumb_func
  74              		.fpu fpv4-sp-d16
  76              	usbInit:
  77              	.LFB331:
  71:lib/chibios/os/hal/src/hal_usb.c **** 
  72:lib/chibios/os/hal/src/hal_usb.c **** /**
  73:lib/chibios/os/hal/src/hal_usb.c ****  * @brief   Standard requests handler.
  74:lib/chibios/os/hal/src/hal_usb.c ****  * @details This is the standard requests default handler, most standard
  75:lib/chibios/os/hal/src/hal_usb.c ****  *          requests are handled here, the user can override the standard
  76:lib/chibios/os/hal/src/hal_usb.c ****  *          handling using the @p requests_hook_cb hook in the
  77:lib/chibios/os/hal/src/hal_usb.c ****  *          @p USBConfig structure.
  78:lib/chibios/os/hal/src/hal_usb.c ****  *
  79:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] usbp      pointer to the @p USBDriver object
  80:lib/chibios/os/hal/src/hal_usb.c ****  * @return              The request handling exit code.
  81:lib/chibios/os/hal/src/hal_usb.c ****  * @retval false        Request not recognized by the handler or error.
  82:lib/chibios/os/hal/src/hal_usb.c ****  * @retval true         Request handled.
  83:lib/chibios/os/hal/src/hal_usb.c ****  */
  84:lib/chibios/os/hal/src/hal_usb.c **** static bool default_handler(USBDriver *usbp) {
  85:lib/chibios/os/hal/src/hal_usb.c ****   const USBDescriptor *dp;
  86:lib/chibios/os/hal/src/hal_usb.c **** 
  87:lib/chibios/os/hal/src/hal_usb.c ****   /* Decoding the request.*/
  88:lib/chibios/os/hal/src/hal_usb.c ****   switch ((((uint32_t)usbp->setup[0] & (USB_RTYPE_RECIPIENT_MASK |
  89:lib/chibios/os/hal/src/hal_usb.c ****                                         USB_RTYPE_TYPE_MASK)) |
  90:lib/chibios/os/hal/src/hal_usb.c ****            ((uint32_t)usbp->setup[1] << 8U))) {
  91:lib/chibios/os/hal/src/hal_usb.c ****   case (uint32_t)USB_RTYPE_RECIPIENT_DEVICE | ((uint32_t)USB_REQ_GET_STATUS << 8):
  92:lib/chibios/os/hal/src/hal_usb.c ****     /* Just returns the current status word.*/
  93:lib/chibios/os/hal/src/hal_usb.c ****     usbSetupTransfer(usbp, (uint8_t *)&usbp->status, 2, NULL);
  94:lib/chibios/os/hal/src/hal_usb.c ****     return true;
  95:lib/chibios/os/hal/src/hal_usb.c ****   case (uint32_t)USB_RTYPE_RECIPIENT_DEVICE | ((uint32_t)USB_REQ_CLEAR_FEATURE << 8):
  96:lib/chibios/os/hal/src/hal_usb.c ****     /* Only the DEVICE_REMOTE_WAKEUP is handled here, any other feature
  97:lib/chibios/os/hal/src/hal_usb.c ****        number is handled as an error.*/
  98:lib/chibios/os/hal/src/hal_usb.c ****     if (usbp->setup[2] == USB_FEATURE_DEVICE_REMOTE_WAKEUP) {
  99:lib/chibios/os/hal/src/hal_usb.c ****       usbp->status &= ~2U;
 100:lib/chibios/os/hal/src/hal_usb.c ****       usbSetupTransfer(usbp, NULL, 0, NULL);
 101:lib/chibios/os/hal/src/hal_usb.c ****       return true;
 102:lib/chibios/os/hal/src/hal_usb.c ****     }
 103:lib/chibios/os/hal/src/hal_usb.c ****     return false;
 104:lib/chibios/os/hal/src/hal_usb.c ****   case (uint32_t)USB_RTYPE_RECIPIENT_DEVICE | ((uint32_t)USB_REQ_SET_FEATURE << 8):
 105:lib/chibios/os/hal/src/hal_usb.c ****     /* Only the DEVICE_REMOTE_WAKEUP is handled here, any other feature
 106:lib/chibios/os/hal/src/hal_usb.c ****        number is handled as an error.*/
 107:lib/chibios/os/hal/src/hal_usb.c ****     if (usbp->setup[2] == USB_FEATURE_DEVICE_REMOTE_WAKEUP) {
 108:lib/chibios/os/hal/src/hal_usb.c ****       usbp->status |= 2U;
 109:lib/chibios/os/hal/src/hal_usb.c ****       usbSetupTransfer(usbp, NULL, 0, NULL);
 110:lib/chibios/os/hal/src/hal_usb.c ****       return true;
 111:lib/chibios/os/hal/src/hal_usb.c ****     }
 112:lib/chibios/os/hal/src/hal_usb.c ****     return false;
 113:lib/chibios/os/hal/src/hal_usb.c ****   case (uint32_t)USB_RTYPE_RECIPIENT_DEVICE | ((uint32_t)USB_REQ_SET_ADDRESS << 8):
 114:lib/chibios/os/hal/src/hal_usb.c ****     /* The SET_ADDRESS handling can be performed here or postponed after
 115:lib/chibios/os/hal/src/hal_usb.c ****        the status packed depending on the USB_SET_ADDRESS_MODE low
 116:lib/chibios/os/hal/src/hal_usb.c ****        driver setting.*/
 117:lib/chibios/os/hal/src/hal_usb.c **** #if USB_SET_ADDRESS_MODE == USB_EARLY_SET_ADDRESS
 118:lib/chibios/os/hal/src/hal_usb.c ****     if ((usbp->setup[0] == USB_RTYPE_RECIPIENT_DEVICE) &&
 119:lib/chibios/os/hal/src/hal_usb.c ****         (usbp->setup[1] == USB_REQ_SET_ADDRESS)) {
 120:lib/chibios/os/hal/src/hal_usb.c ****       set_address(usbp);
 121:lib/chibios/os/hal/src/hal_usb.c ****     }
 122:lib/chibios/os/hal/src/hal_usb.c ****     usbSetupTransfer(usbp, NULL, 0, NULL);
 123:lib/chibios/os/hal/src/hal_usb.c **** #else
 124:lib/chibios/os/hal/src/hal_usb.c ****     usbSetupTransfer(usbp, NULL, 0, set_address);
 125:lib/chibios/os/hal/src/hal_usb.c **** #endif
 126:lib/chibios/os/hal/src/hal_usb.c ****     return true;
 127:lib/chibios/os/hal/src/hal_usb.c ****   case (uint32_t)USB_RTYPE_RECIPIENT_DEVICE | ((uint32_t)USB_REQ_GET_DESCRIPTOR << 8):
 128:lib/chibios/os/hal/src/hal_usb.c ****   case (uint32_t)USB_RTYPE_RECIPIENT_INTERFACE | ((uint32_t)USB_REQ_GET_DESCRIPTOR << 8):
 129:lib/chibios/os/hal/src/hal_usb.c ****     /* Handling descriptor requests from the host.*/
 130:lib/chibios/os/hal/src/hal_usb.c ****     dp = usbp->config->get_descriptor_cb(usbp, usbp->setup[3],
 131:lib/chibios/os/hal/src/hal_usb.c ****                                          usbp->setup[2],
 132:lib/chibios/os/hal/src/hal_usb.c ****                                          get_hword(&usbp->setup[4]));
 133:lib/chibios/os/hal/src/hal_usb.c ****     if (dp == NULL) {
 134:lib/chibios/os/hal/src/hal_usb.c ****       return false;
 135:lib/chibios/os/hal/src/hal_usb.c ****     }
 136:lib/chibios/os/hal/src/hal_usb.c ****     /*lint -save -e9005 [11.8] Removing const is fine.*/
 137:lib/chibios/os/hal/src/hal_usb.c ****     usbSetupTransfer(usbp, (uint8_t *)dp->ud_string, dp->ud_size, NULL);
 138:lib/chibios/os/hal/src/hal_usb.c ****     /*lint -restore*/
 139:lib/chibios/os/hal/src/hal_usb.c ****     return true;
 140:lib/chibios/os/hal/src/hal_usb.c ****   case (uint32_t)USB_RTYPE_RECIPIENT_DEVICE | ((uint32_t)USB_REQ_GET_CONFIGURATION << 8):
 141:lib/chibios/os/hal/src/hal_usb.c ****     /* Returning the last selected configuration.*/
 142:lib/chibios/os/hal/src/hal_usb.c ****     usbSetupTransfer(usbp, &usbp->configuration, 1, NULL);
 143:lib/chibios/os/hal/src/hal_usb.c ****     return true;
 144:lib/chibios/os/hal/src/hal_usb.c ****   case (uint32_t)USB_RTYPE_RECIPIENT_DEVICE | ((uint32_t)USB_REQ_SET_CONFIGURATION << 8):
 145:lib/chibios/os/hal/src/hal_usb.c **** #if defined(USB_SET_CONFIGURATION_OLD_BEHAVIOR)
 146:lib/chibios/os/hal/src/hal_usb.c ****     /* Handling configuration selection from the host only if it is different
 147:lib/chibios/os/hal/src/hal_usb.c ****        from the current configuration.*/
 148:lib/chibios/os/hal/src/hal_usb.c ****     if (usbp->configuration != usbp->setup[2])
 149:lib/chibios/os/hal/src/hal_usb.c **** #endif
 150:lib/chibios/os/hal/src/hal_usb.c ****     {
 151:lib/chibios/os/hal/src/hal_usb.c ****       /* If the USB device is already active then we have to perform the clear
 152:lib/chibios/os/hal/src/hal_usb.c ****          procedure on the current configuration.*/
 153:lib/chibios/os/hal/src/hal_usb.c ****       if (usbp->state == USB_ACTIVE) {
 154:lib/chibios/os/hal/src/hal_usb.c ****         /* Current configuration cleared.*/
 155:lib/chibios/os/hal/src/hal_usb.c ****         osalSysLockFromISR ();
 156:lib/chibios/os/hal/src/hal_usb.c ****         usbDisableEndpointsI(usbp);
 157:lib/chibios/os/hal/src/hal_usb.c ****         osalSysUnlockFromISR ();
 158:lib/chibios/os/hal/src/hal_usb.c ****         usbp->configuration = 0U;
 159:lib/chibios/os/hal/src/hal_usb.c ****         usbp->state = USB_SELECTED;
 160:lib/chibios/os/hal/src/hal_usb.c ****         _usb_isr_invoke_event_cb(usbp, USB_EVENT_UNCONFIGURED);
 161:lib/chibios/os/hal/src/hal_usb.c ****       }
 162:lib/chibios/os/hal/src/hal_usb.c ****       if (usbp->setup[2] != 0U) {
 163:lib/chibios/os/hal/src/hal_usb.c ****         /* New configuration.*/
 164:lib/chibios/os/hal/src/hal_usb.c ****         usbp->configuration = usbp->setup[2];
 165:lib/chibios/os/hal/src/hal_usb.c ****         usbp->state = USB_ACTIVE;
 166:lib/chibios/os/hal/src/hal_usb.c ****         _usb_isr_invoke_event_cb(usbp, USB_EVENT_CONFIGURED);
 167:lib/chibios/os/hal/src/hal_usb.c ****       }
 168:lib/chibios/os/hal/src/hal_usb.c ****     }
 169:lib/chibios/os/hal/src/hal_usb.c ****     usbSetupTransfer(usbp, NULL, 0, NULL);
 170:lib/chibios/os/hal/src/hal_usb.c ****     return true;
 171:lib/chibios/os/hal/src/hal_usb.c ****   case (uint32_t)USB_RTYPE_RECIPIENT_INTERFACE | ((uint32_t)USB_REQ_GET_STATUS << 8):
 172:lib/chibios/os/hal/src/hal_usb.c ****   case (uint32_t)USB_RTYPE_RECIPIENT_ENDPOINT | ((uint32_t)USB_REQ_SYNCH_FRAME << 8):
 173:lib/chibios/os/hal/src/hal_usb.c ****     /* Just sending two zero bytes, the application can change the behavior
 174:lib/chibios/os/hal/src/hal_usb.c ****        using a hook..*/
 175:lib/chibios/os/hal/src/hal_usb.c ****     /*lint -save -e9005 [11.8] Removing const is fine.*/
 176:lib/chibios/os/hal/src/hal_usb.c ****     usbSetupTransfer(usbp, (uint8_t *)zero_status, 2, NULL);
 177:lib/chibios/os/hal/src/hal_usb.c ****     /*lint -restore*/
 178:lib/chibios/os/hal/src/hal_usb.c ****     return true;
 179:lib/chibios/os/hal/src/hal_usb.c ****   case (uint32_t)USB_RTYPE_RECIPIENT_ENDPOINT | ((uint32_t)USB_REQ_GET_STATUS << 8):
 180:lib/chibios/os/hal/src/hal_usb.c ****     /* Sending the EP status.*/
 181:lib/chibios/os/hal/src/hal_usb.c ****     if ((usbp->setup[4] & 0x80U) != 0U) {
 182:lib/chibios/os/hal/src/hal_usb.c ****       switch (usb_lld_get_status_in(usbp, usbp->setup[4] & 0x0FU)) {
 183:lib/chibios/os/hal/src/hal_usb.c ****       case EP_STATUS_STALLED:
 184:lib/chibios/os/hal/src/hal_usb.c ****         /*lint -save -e9005 [11.8] Removing const is fine.*/
 185:lib/chibios/os/hal/src/hal_usb.c ****         usbSetupTransfer(usbp, (uint8_t *)halted_status, 2, NULL);
 186:lib/chibios/os/hal/src/hal_usb.c ****         /*lint -restore*/
 187:lib/chibios/os/hal/src/hal_usb.c ****         return true;
 188:lib/chibios/os/hal/src/hal_usb.c ****       case EP_STATUS_ACTIVE:
 189:lib/chibios/os/hal/src/hal_usb.c ****         /*lint -save -e9005 [11.8] Removing const is fine.*/
 190:lib/chibios/os/hal/src/hal_usb.c ****         usbSetupTransfer(usbp, (uint8_t *)active_status, 2, NULL);
 191:lib/chibios/os/hal/src/hal_usb.c ****         /*lint -restore*/
 192:lib/chibios/os/hal/src/hal_usb.c ****         return true;
 193:lib/chibios/os/hal/src/hal_usb.c ****       case EP_STATUS_DISABLED:
 194:lib/chibios/os/hal/src/hal_usb.c ****       default:
 195:lib/chibios/os/hal/src/hal_usb.c ****         return false;
 196:lib/chibios/os/hal/src/hal_usb.c ****       }
 197:lib/chibios/os/hal/src/hal_usb.c ****     }
 198:lib/chibios/os/hal/src/hal_usb.c ****     else {
 199:lib/chibios/os/hal/src/hal_usb.c ****       switch (usb_lld_get_status_out(usbp, usbp->setup[4] & 0x0FU)) {
 200:lib/chibios/os/hal/src/hal_usb.c ****       case EP_STATUS_STALLED:
 201:lib/chibios/os/hal/src/hal_usb.c ****         /*lint -save -e9005 [11.8] Removing const is fine.*/
 202:lib/chibios/os/hal/src/hal_usb.c ****         usbSetupTransfer(usbp, (uint8_t *)halted_status, 2, NULL);
 203:lib/chibios/os/hal/src/hal_usb.c ****         /*lint -restore*/
 204:lib/chibios/os/hal/src/hal_usb.c ****         return true;
 205:lib/chibios/os/hal/src/hal_usb.c ****       case EP_STATUS_ACTIVE:
 206:lib/chibios/os/hal/src/hal_usb.c ****         /*lint -save -e9005 [11.8] Removing const is fine.*/
 207:lib/chibios/os/hal/src/hal_usb.c ****         usbSetupTransfer(usbp, (uint8_t *)active_status, 2, NULL);
 208:lib/chibios/os/hal/src/hal_usb.c ****         /*lint -restore*/
 209:lib/chibios/os/hal/src/hal_usb.c ****         return true;
 210:lib/chibios/os/hal/src/hal_usb.c ****       case EP_STATUS_DISABLED:
 211:lib/chibios/os/hal/src/hal_usb.c ****       default:
 212:lib/chibios/os/hal/src/hal_usb.c ****         return false;
 213:lib/chibios/os/hal/src/hal_usb.c ****       }
 214:lib/chibios/os/hal/src/hal_usb.c ****     }
 215:lib/chibios/os/hal/src/hal_usb.c ****   case (uint32_t)USB_RTYPE_RECIPIENT_ENDPOINT | ((uint32_t)USB_REQ_CLEAR_FEATURE << 8):
 216:lib/chibios/os/hal/src/hal_usb.c ****     /* Only ENDPOINT_HALT is handled as feature.*/
 217:lib/chibios/os/hal/src/hal_usb.c ****     if (usbp->setup[2] != USB_FEATURE_ENDPOINT_HALT) {
 218:lib/chibios/os/hal/src/hal_usb.c ****       return false;
 219:lib/chibios/os/hal/src/hal_usb.c ****     }
 220:lib/chibios/os/hal/src/hal_usb.c ****     /* Clearing the EP status, not valid for EP0, it is ignored in that case.*/
 221:lib/chibios/os/hal/src/hal_usb.c ****     if ((usbp->setup[4] & 0x0FU) != 0U) {
 222:lib/chibios/os/hal/src/hal_usb.c ****       if ((usbp->setup[4] & 0x80U) != 0U) {
 223:lib/chibios/os/hal/src/hal_usb.c ****         usb_lld_clear_in(usbp, usbp->setup[4] & 0x0FU);
 224:lib/chibios/os/hal/src/hal_usb.c ****       }
 225:lib/chibios/os/hal/src/hal_usb.c ****       else {
 226:lib/chibios/os/hal/src/hal_usb.c ****         usb_lld_clear_out(usbp, usbp->setup[4] & 0x0FU);
 227:lib/chibios/os/hal/src/hal_usb.c ****       }
 228:lib/chibios/os/hal/src/hal_usb.c ****     }
 229:lib/chibios/os/hal/src/hal_usb.c ****     usbSetupTransfer(usbp, NULL, 0, NULL);
 230:lib/chibios/os/hal/src/hal_usb.c ****     return true;
 231:lib/chibios/os/hal/src/hal_usb.c ****   case (uint32_t)USB_RTYPE_RECIPIENT_ENDPOINT | ((uint32_t)USB_REQ_SET_FEATURE << 8):
 232:lib/chibios/os/hal/src/hal_usb.c ****     /* Only ENDPOINT_HALT is handled as feature.*/
 233:lib/chibios/os/hal/src/hal_usb.c ****     if (usbp->setup[2] != USB_FEATURE_ENDPOINT_HALT) {
 234:lib/chibios/os/hal/src/hal_usb.c ****       return false;
 235:lib/chibios/os/hal/src/hal_usb.c ****     }
 236:lib/chibios/os/hal/src/hal_usb.c ****     /* Stalling the EP, not valid for EP0, it is ignored in that case.*/
 237:lib/chibios/os/hal/src/hal_usb.c ****     if ((usbp->setup[4] & 0x0FU) != 0U) {
 238:lib/chibios/os/hal/src/hal_usb.c ****       if ((usbp->setup[4] & 0x80U) != 0U) {
 239:lib/chibios/os/hal/src/hal_usb.c ****         usb_lld_stall_in(usbp, usbp->setup[4] & 0x0FU);
 240:lib/chibios/os/hal/src/hal_usb.c ****       }
 241:lib/chibios/os/hal/src/hal_usb.c ****       else {
 242:lib/chibios/os/hal/src/hal_usb.c ****         usb_lld_stall_out(usbp, usbp->setup[4] & 0x0FU);
 243:lib/chibios/os/hal/src/hal_usb.c ****       }
 244:lib/chibios/os/hal/src/hal_usb.c ****     }
 245:lib/chibios/os/hal/src/hal_usb.c ****     usbSetupTransfer(usbp, NULL, 0, NULL);
 246:lib/chibios/os/hal/src/hal_usb.c ****     return true;
 247:lib/chibios/os/hal/src/hal_usb.c ****   case (uint32_t)USB_RTYPE_RECIPIENT_DEVICE | ((uint32_t)USB_REQ_SET_DESCRIPTOR << 8):
 248:lib/chibios/os/hal/src/hal_usb.c ****   case (uint32_t)USB_RTYPE_RECIPIENT_INTERFACE | ((uint32_t)USB_REQ_CLEAR_FEATURE << 8):
 249:lib/chibios/os/hal/src/hal_usb.c ****   case (uint32_t)USB_RTYPE_RECIPIENT_INTERFACE | ((uint32_t)USB_REQ_SET_FEATURE << 8):
 250:lib/chibios/os/hal/src/hal_usb.c ****   case (uint32_t)USB_RTYPE_RECIPIENT_INTERFACE | ((uint32_t)USB_REQ_GET_INTERFACE << 8):
 251:lib/chibios/os/hal/src/hal_usb.c ****   case (uint32_t)USB_RTYPE_RECIPIENT_INTERFACE | ((uint32_t)USB_REQ_SET_INTERFACE << 8):
 252:lib/chibios/os/hal/src/hal_usb.c ****     /* All the above requests are not handled here, if you need them then
 253:lib/chibios/os/hal/src/hal_usb.c ****        use the hook mechanism and provide handling.*/
 254:lib/chibios/os/hal/src/hal_usb.c ****   default:
 255:lib/chibios/os/hal/src/hal_usb.c ****     return false;
 256:lib/chibios/os/hal/src/hal_usb.c ****   }
 257:lib/chibios/os/hal/src/hal_usb.c **** }
 258:lib/chibios/os/hal/src/hal_usb.c **** 
 259:lib/chibios/os/hal/src/hal_usb.c **** /*===========================================================================*/
 260:lib/chibios/os/hal/src/hal_usb.c **** /* Driver exported functions.                                                */
 261:lib/chibios/os/hal/src/hal_usb.c **** /*===========================================================================*/
 262:lib/chibios/os/hal/src/hal_usb.c **** 
 263:lib/chibios/os/hal/src/hal_usb.c **** /**
 264:lib/chibios/os/hal/src/hal_usb.c ****  * @brief   USB Driver initialization.
 265:lib/chibios/os/hal/src/hal_usb.c ****  * @note    This function is implicitly invoked by @p halInit(), there is
 266:lib/chibios/os/hal/src/hal_usb.c ****  *          no need to explicitly initialize the driver.
 267:lib/chibios/os/hal/src/hal_usb.c ****  *
 268:lib/chibios/os/hal/src/hal_usb.c ****  * @init
 269:lib/chibios/os/hal/src/hal_usb.c ****  */
 270:lib/chibios/os/hal/src/hal_usb.c **** void usbInit(void) {
  78              		.loc 1 270 20 is_stmt 1 view -0
  79              		.cfi_startproc
  80              		@ args = 0, pretend = 0, frame = 0
  81              		@ frame_needed = 0, uses_anonymous_args = 0
  82              		@ link register save eliminated.
 271:lib/chibios/os/hal/src/hal_usb.c **** 
 272:lib/chibios/os/hal/src/hal_usb.c ****   usb_lld_init();
  83              		.loc 1 272 3 view .LVU14
  84 0000 FFF7FEBF 		b	usb_lld_init
  85              	.LVL3:
  86              		.cfi_endproc
  87              	.LFE331:
  89              		.section	.text.usbObjectInit,"ax",%progbits
  90              		.align	1
  91              		.global	usbObjectInit
  92              		.syntax unified
  93              		.thumb
  94              		.thumb_func
  95              		.fpu fpv4-sp-d16
  97              	usbObjectInit:
  98              	.LVL4:
  99              	.LFB332:
 273:lib/chibios/os/hal/src/hal_usb.c **** }
 274:lib/chibios/os/hal/src/hal_usb.c **** 
 275:lib/chibios/os/hal/src/hal_usb.c **** /**
 276:lib/chibios/os/hal/src/hal_usb.c ****  * @brief   Initializes the standard part of a @p USBDriver structure.
 277:lib/chibios/os/hal/src/hal_usb.c ****  *
 278:lib/chibios/os/hal/src/hal_usb.c ****  * @param[out] usbp     pointer to the @p USBDriver object
 279:lib/chibios/os/hal/src/hal_usb.c ****  *
 280:lib/chibios/os/hal/src/hal_usb.c ****  * @init
 281:lib/chibios/os/hal/src/hal_usb.c ****  */
 282:lib/chibios/os/hal/src/hal_usb.c **** void usbObjectInit(USBDriver *usbp) {
 100              		.loc 1 282 37 view -0
 101              		.cfi_startproc
 102              		@ args = 0, pretend = 0, frame = 0
 103              		@ frame_needed = 0, uses_anonymous_args = 0
 283:lib/chibios/os/hal/src/hal_usb.c ****   unsigned i;
 104              		.loc 1 283 3 view .LVU16
 284:lib/chibios/os/hal/src/hal_usb.c **** 
 285:lib/chibios/os/hal/src/hal_usb.c ****   usbp->state        = USB_STOP;
 105              		.loc 1 285 3 view .LVU17
 282:lib/chibios/os/hal/src/hal_usb.c ****   unsigned i;
 106              		.loc 1 282 37 is_stmt 0 view .LVU18
 107 0000 10B5     		push	{r4, lr}
 108              		.cfi_def_cfa_offset 8
 109              		.cfi_offset 4, -8
 110              		.cfi_offset 14, -4
 111              		.loc 1 285 22 view .LVU19
 112 0002 0123     		movs	r3, #1
 282:lib/chibios/os/hal/src/hal_usb.c ****   unsigned i;
 113              		.loc 1 282 37 view .LVU20
 114 0004 0446     		mov	r4, r0
 286:lib/chibios/os/hal/src/hal_usb.c ****   usbp->config       = NULL;
 287:lib/chibios/os/hal/src/hal_usb.c ****   for (i = 0; i < (unsigned)USB_MAX_ENDPOINTS; i++) {
 288:lib/chibios/os/hal/src/hal_usb.c ****     usbp->in_params[i]  = NULL;
 115              		.loc 1 288 25 view .LVU21
 116 0006 3822     		movs	r2, #56
 285:lib/chibios/os/hal/src/hal_usb.c ****   usbp->config       = NULL;
 117              		.loc 1 285 22 view .LVU22
 118 0008 00F82C3B 		strb	r3, [r0], #44
 119              	.LVL5:
 286:lib/chibios/os/hal/src/hal_usb.c ****   usbp->config       = NULL;
 120              		.loc 1 286 3 is_stmt 1 view .LVU23
 287:lib/chibios/os/hal/src/hal_usb.c ****     usbp->in_params[i]  = NULL;
 121              		.loc 1 287 3 view .LVU24
 287:lib/chibios/os/hal/src/hal_usb.c ****     usbp->in_params[i]  = NULL;
 122              		.loc 1 287 17 view .LVU25
 123              		.loc 1 288 25 is_stmt 0 view .LVU26
 124 000c 0021     		movs	r1, #0
 125 000e FFF7FEFF 		bl	memset
 126              	.LVL6:
 289:lib/chibios/os/hal/src/hal_usb.c ****     usbp->out_params[i] = NULL;
 290:lib/chibios/os/hal/src/hal_usb.c ****   }
 291:lib/chibios/os/hal/src/hal_usb.c ****   usbp->transmitting = 0;
 127              		.loc 1 291 3 is_stmt 1 view .LVU27
 292:lib/chibios/os/hal/src/hal_usb.c ****   usbp->receiving    = 0;
 128              		.loc 1 292 3 view .LVU28
 286:lib/chibios/os/hal/src/hal_usb.c ****   for (i = 0; i < (unsigned)USB_MAX_ENDPOINTS; i++) {
 129              		.loc 1 286 22 is_stmt 0 view .LVU29
 130 0012 0023     		movs	r3, #0
 291:lib/chibios/os/hal/src/hal_usb.c ****   usbp->receiving    = 0;
 131              		.loc 1 291 22 view .LVU30
 132 0014 C4E90133 		strd	r3, r3, [r4, #4]
 293:lib/chibios/os/hal/src/hal_usb.c **** }
 133              		.loc 1 293 1 view .LVU31
 134 0018 10BD     		pop	{r4, pc}
 135              		.loc 1 293 1 view .LVU32
 136              		.cfi_endproc
 137              	.LFE332:
 139              		.section	.text.usbStart,"ax",%progbits
 140              		.align	1
 141              		.global	usbStart
 142              		.syntax unified
 143              		.thumb
 144              		.thumb_func
 145              		.fpu fpv4-sp-d16
 147              	usbStart:
 148              	.LVL7:
 149              	.LFB333:
 294:lib/chibios/os/hal/src/hal_usb.c **** 
 295:lib/chibios/os/hal/src/hal_usb.c **** /**
 296:lib/chibios/os/hal/src/hal_usb.c ****  * @brief   Configures and activates the USB peripheral.
 297:lib/chibios/os/hal/src/hal_usb.c ****  *
 298:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] usbp      pointer to the @p USBDriver object
 299:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] config    pointer to the @p USBConfig object
 300:lib/chibios/os/hal/src/hal_usb.c ****  *
 301:lib/chibios/os/hal/src/hal_usb.c ****  * @api
 302:lib/chibios/os/hal/src/hal_usb.c ****  */
 303:lib/chibios/os/hal/src/hal_usb.c **** void usbStart(USBDriver *usbp, const USBConfig *config) {
 150              		.loc 1 303 57 is_stmt 1 view -0
 151              		.cfi_startproc
 152              		@ args = 0, pretend = 0, frame = 0
 153              		@ frame_needed = 0, uses_anonymous_args = 0
 304:lib/chibios/os/hal/src/hal_usb.c ****   unsigned i;
 154              		.loc 1 304 3 view .LVU34
 305:lib/chibios/os/hal/src/hal_usb.c **** 
 306:lib/chibios/os/hal/src/hal_usb.c ****   osalDbgCheck((usbp != NULL) && (config != NULL));
 155              		.loc 1 306 3 view .LVU35
 156              		.loc 1 306 3 view .LVU36
 157              		.loc 1 306 3 view .LVU37
 307:lib/chibios/os/hal/src/hal_usb.c **** 
 308:lib/chibios/os/hal/src/hal_usb.c ****   osalSysLock();
 158              		.loc 1 308 3 view .LVU38
 159              	.LBB287:
 160              	.LBI287:
 161              		.file 2 "./lib/chibios/os/hal/osal/rt-nil/osal.h"
   1:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /*
   2:./lib/chibios/os/hal/osal/rt-nil/osal.h ****     ChibiOS - Copyright (C) 2006..2018 Giovanni Di Sirio
   3:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
   4:./lib/chibios/os/hal/osal/rt-nil/osal.h ****     Licensed under the Apache License, Version 2.0 (the "License");
   5:./lib/chibios/os/hal/osal/rt-nil/osal.h ****     you may not use this file except in compliance with the License.
   6:./lib/chibios/os/hal/osal/rt-nil/osal.h ****     You may obtain a copy of the License at
   7:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
   8:./lib/chibios/os/hal/osal/rt-nil/osal.h ****         http://www.apache.org/licenses/LICENSE-2.0
   9:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
  10:./lib/chibios/os/hal/osal/rt-nil/osal.h ****     Unless required by applicable law or agreed to in writing, software
  11:./lib/chibios/os/hal/osal/rt-nil/osal.h ****     distributed under the License is distributed on an "AS IS" BASIS,
  12:./lib/chibios/os/hal/osal/rt-nil/osal.h ****     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  13:./lib/chibios/os/hal/osal/rt-nil/osal.h ****     See the License for the specific language governing permissions and
  14:./lib/chibios/os/hal/osal/rt-nil/osal.h ****     limitations under the License.
  15:./lib/chibios/os/hal/osal/rt-nil/osal.h **** */
  16:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
  17:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
  18:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @file    osal.h
  19:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   OSAL module header.
  20:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
  21:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @addtogroup OSAL
  22:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @{
  23:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
  24:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
  25:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #ifndef OSAL_H
  26:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define OSAL_H
  27:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
  28:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #include <stddef.h>
  29:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #include <stdint.h>
  30:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #include <stdbool.h>
  31:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
  32:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #include "ch.h"
  33:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
  34:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /*===========================================================================*/
  35:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /* Module constants.                                                         */
  36:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /*===========================================================================*/
  37:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
  38:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
  39:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @name    Common constants
  40:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @{
  41:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
  42:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #if !defined(FALSE) || defined(__DOXYGEN__)
  43:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define FALSE                               0
  44:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #endif
  45:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
  46:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #if !defined(TRUE) || defined(__DOXYGEN__)
  47:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define TRUE                                1
  48:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #endif
  49:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
  50:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define OSAL_SUCCESS                        false
  51:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define OSAL_FAILED                         true
  52:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /** @} */
  53:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
  54:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #if 0
  55:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
  56:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @name    Messages
  57:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @{
  58:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
  59:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define MSG_OK                              (msg_t)0
  60:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define MSG_TIMEOUT                         (msg_t)-1
  61:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define MSG_RESET                           (msg_t)-2
  62:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /** @} */
  63:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #endif
  64:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
  65:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #if 0
  66:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
  67:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @name    Special time constants
  68:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @{
  69:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
  70:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define TIME_IMMEDIATE                      ((sysinterval_t)0)
  71:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define TIME_INFINITE                       ((sysinterval_t)-1)
  72:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /** @} */
  73:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #endif
  74:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
  75:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
  76:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @name    Systick modes.
  77:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @{
  78:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
  79:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define OSAL_ST_MODE_NONE                   0
  80:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define OSAL_ST_MODE_PERIODIC               1
  81:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define OSAL_ST_MODE_FREERUNNING            2
  82:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /** @} */
  83:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
  84:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
  85:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @name    Systick parameters.
  86:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @{
  87:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
  88:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
  89:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Size in bits of the @p systick_t type.
  90:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
  91:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define OSAL_ST_RESOLUTION                  CH_CFG_ST_RESOLUTION
  92:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
  93:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
  94:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Required systick frequency or resolution.
  95:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
  96:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define OSAL_ST_FREQUENCY                   CH_CFG_ST_FREQUENCY
  97:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
  98:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
  99:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Systick mode required by the underlying OS.
 100:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 101:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #if (CH_CFG_ST_TIMEDELTA == 0) || defined(__DOXYGEN__)
 102:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define OSAL_ST_MODE                        OSAL_ST_MODE_PERIODIC
 103:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #else
 104:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define OSAL_ST_MODE                        OSAL_ST_MODE_FREERUNNING
 105:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #endif
 106:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /** @} */
 107:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 108:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /*===========================================================================*/
 109:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /* Module pre-compile time settings.                                         */
 110:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /*===========================================================================*/
 111:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 112:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /*===========================================================================*/
 113:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /* Derived constants and error checks.                                       */
 114:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /*===========================================================================*/
 115:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 116:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #if !(OSAL_ST_MODE == OSAL_ST_MODE_NONE) &&                                 \
 117:./lib/chibios/os/hal/osal/rt-nil/osal.h ****     !(OSAL_ST_MODE == OSAL_ST_MODE_PERIODIC) &&                             \
 118:./lib/chibios/os/hal/osal/rt-nil/osal.h ****     !(OSAL_ST_MODE == OSAL_ST_MODE_FREERUNNING)
 119:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #error "invalid OSAL_ST_MODE setting in osal.h"
 120:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #endif
 121:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 122:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #if (OSAL_ST_RESOLUTION != 16) && (OSAL_ST_RESOLUTION != 32) &&             \
 123:./lib/chibios/os/hal/osal/rt-nil/osal.h ****     (OSAL_ST_RESOLUTION != 64)
 124:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #error "invalid OSAL_ST_RESOLUTION, must be 16, 32 or 64"
 125:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #endif
 126:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 127:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /*===========================================================================*/
 128:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /* Module data structures and types.                                         */
 129:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /*===========================================================================*/
 130:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 131:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #if 0
 132:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 133:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Type of a system status word.
 134:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 135:./lib/chibios/os/hal/osal/rt-nil/osal.h **** typedef uint32_t syssts_t;
 136:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #endif
 137:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 138:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #if 0
 139:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 140:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Type of a message.
 141:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 142:./lib/chibios/os/hal/osal/rt-nil/osal.h **** typedef int32_t msg_t;
 143:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #endif
 144:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 145:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #if 0
 146:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 147:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Type of system time counter.
 148:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 149:./lib/chibios/os/hal/osal/rt-nil/osal.h **** typedef uint32_t systime_t;
 150:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #endif
 151:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 152:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #if 0
 153:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 154:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Type of system time interval.
 155:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 156:./lib/chibios/os/hal/osal/rt-nil/osal.h **** typedef uint32_t sysinterval_t;
 157:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #endif
 158:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 159:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #if 0
 160:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 161:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Type of time conversion variable.
 162:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    This type must have double width than other time types, it is
 163:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          only used internally for conversions.
 164:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 165:./lib/chibios/os/hal/osal/rt-nil/osal.h **** typedef uint64_t time_conv_t;
 166:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #endif
 167:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 168:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #if 0
 169:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 170:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Type of realtime counter.
 171:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 172:./lib/chibios/os/hal/osal/rt-nil/osal.h **** typedef uint32_t rtcnt_t;
 173:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #endif
 174:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 175:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #if 0
 176:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 177:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Type of a thread reference.
 178:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 179:./lib/chibios/os/hal/osal/rt-nil/osal.h **** typedef thread_t * thread_reference_t;
 180:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #endif
 181:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 182:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #if 0
 183:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 184:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Type of an event flags mask.
 185:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 186:./lib/chibios/os/hal/osal/rt-nil/osal.h **** typedef uint32_t eventflags_t;
 187:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #endif
 188:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 189:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #if (CH_CFG_USE_EVENTS == FALSE) || defined(__DOXYGEN__)
 190:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 191:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Type of an event flags object.
 192:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The content of this structure is not part of the API and should
 193:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          not be relied upon. Implementers may define this structure in
 194:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          an entirely different way.
 195:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    Retrieval and clearing of the flags are not defined in this
 196:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          API and are implementation-dependent.
 197:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 198:./lib/chibios/os/hal/osal/rt-nil/osal.h **** typedef struct event_source event_source_t;
 199:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 200:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 201:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Type of an event source callback.
 202:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    This type is not part of the OSAL API and is provided
 203:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          exclusively as an example and for convenience.
 204:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 205:./lib/chibios/os/hal/osal/rt-nil/osal.h **** typedef void (*eventcallback_t)(event_source_t *esp);
 206:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 207:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 208:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Events source object.
 209:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The content of this structure is not part of the API and should
 210:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          not be relied upon. Implementers may define this structure in
 211:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          an entirely different way.
 212:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    Retrieval and clearing of the flags are not defined in this
 213:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          API and are implementation-dependent.
 214:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 215:./lib/chibios/os/hal/osal/rt-nil/osal.h **** struct event_source {
 216:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   volatile eventflags_t flags;      /**< @brief Stored event flags.         */
 217:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   eventcallback_t       cb;         /**< @brief Event source callback.      */
 218:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   void                  *param;     /**< @brief User defined field.         */
 219:./lib/chibios/os/hal/osal/rt-nil/osal.h **** };
 220:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #endif /* CH_CFG_USE_EVENTS == FALSE */
 221:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 222:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 223:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Type of a mutex.
 224:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    If the OS does not support mutexes or there is no OS then the
 225:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          mechanism can be simulated.
 226:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 227:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #if CH_CFG_USE_MUTEXES || defined(__DOXYGEN__)
 228:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #elif CH_CFG_USE_SEMAPHORES
 229:./lib/chibios/os/hal/osal/rt-nil/osal.h **** typedef semaphore_t mutex_t;
 230:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #else
 231:./lib/chibios/os/hal/osal/rt-nil/osal.h **** typedef uint32_t mutex_t;
 232:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #endif
 233:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 234:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #if 0
 235:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 236:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Type of a thread queue.
 237:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @details A thread queue is a queue of sleeping threads, queued threads
 238:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          can be dequeued one at time or all together.
 239:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    In this implementation it is implemented as a single reference
 240:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          because there are no real threads.
 241:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 242:./lib/chibios/os/hal/osal/rt-nil/osal.h **** typedef struct {
 243:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   thread_reference_t    tr;
 244:./lib/chibios/os/hal/osal/rt-nil/osal.h **** } threads_queue_t;
 245:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #endif
 246:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 247:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /*===========================================================================*/
 248:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /* Module macros.                                                            */
 249:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /*===========================================================================*/
 250:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 251:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 252:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @name    Debug related macros
 253:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @{
 254:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 255:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 256:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Condition assertion.
 257:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @details If the condition check fails then the OSAL panics with a
 258:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          message and halts.
 259:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The condition is tested only if the @p OSAL_ENABLE_ASSERTIONS
 260:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          switch is enabled.
 261:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The remark string is not currently used except for putting a
 262:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          comment in the code about the assertion.
 263:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 264:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] c         the condition to be verified to be true
 265:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] remark    a remark string
 266:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 267:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @api
 268:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 269:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define osalDbgAssert(c, remark) chDbgAssert(c, remark)
 270:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 271:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 272:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Function parameters check.
 273:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @details If the condition check fails then the OSAL panics and halts.
 274:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The condition is tested only if the @p OSAL_ENABLE_CHECKS switch
 275:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          is enabled.
 276:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 277:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] c         the condition to be verified to be true
 278:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 279:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @api
 280:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 281:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define osalDbgCheck(c) chDbgCheck(c)
 282:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 283:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 284:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   I-Class state check.
 285:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    Not implemented in this simplified OSAL.
 286:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 287:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define osalDbgCheckClassI() chDbgCheckClassI()
 288:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 289:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 290:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   S-Class state check.
 291:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    Not implemented in this simplified OSAL.
 292:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 293:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define osalDbgCheckClassS() chDbgCheckClassS()
 294:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /** @} */
 295:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 296:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 297:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @name    IRQ service routines wrappers
 298:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @{
 299:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 300:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 301:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Priority level verification macro.
 302:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 303:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define OSAL_IRQ_IS_VALID_PRIORITY(n) CH_IRQ_IS_VALID_KERNEL_PRIORITY(n)
 304:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 305:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 306:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   IRQ prologue code.
 307:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @details This macro must be inserted at the start of all IRQ handlers.
 308:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 309:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define OSAL_IRQ_PROLOGUE() CH_IRQ_PROLOGUE()
 310:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 311:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 312:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   IRQ epilogue code.
 313:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @details This macro must be inserted at the end of all IRQ handlers.
 314:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 315:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define OSAL_IRQ_EPILOGUE() CH_IRQ_EPILOGUE()
 316:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 317:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 318:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   IRQ handler function declaration.
 319:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @details This macro hides the details of an ISR function declaration.
 320:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 321:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] id        a vector name as defined in @p vectors.s
 322:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 323:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define OSAL_IRQ_HANDLER(id) CH_IRQ_HANDLER(id)
 324:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /** @} */
 325:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 326:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 327:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @name    Time conversion utilities
 328:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @{
 329:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 330:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 331:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Seconds to time interval.
 332:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @details Converts from seconds to system ticks number.
 333:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The result is rounded upward to the next tick boundary.
 334:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    Use of this macro for large values is not secure because
 335:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          integer overflows, make sure your value can be correctly
 336:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          converted.
 337:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 338:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] secs      number of seconds
 339:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @return              The number of ticks.
 340:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 341:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @api
 342:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 343:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define OSAL_S2I(secs) TIME_S2I(secs)
 344:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 345:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 346:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Milliseconds to time interval.
 347:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @details Converts from milliseconds to system ticks number.
 348:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The result is rounded upward to the next tick boundary.
 349:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    Use of this macro for large values is not secure because
 350:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          integer overflows, make sure your value can be correctly
 351:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          converted.
 352:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 353:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] msecs     number of milliseconds
 354:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @return              The number of ticks.
 355:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 356:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @api
 357:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 358:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define OSAL_MS2I(msecs) TIME_MS2I(msecs)
 359:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 360:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 361:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Microseconds to time interval.
 362:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @details Converts from microseconds to system ticks number.
 363:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The result is rounded upward to the next tick boundary.
 364:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    Use of this macro for large values is not secure because
 365:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          integer overflows, make sure your value can be correctly
 366:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          converted.
 367:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 368:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] usecs     number of microseconds
 369:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @return              The number of ticks.
 370:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 371:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @api
 372:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 373:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define OSAL_US2I(usecs) TIME_US2I(usecs)
 374:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 375:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 376:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Time interval to seconds.
 377:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @details Converts from system ticks number to seconds.
 378:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The result is rounded up to the next second boundary.
 379:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    Use of this macro for large values is not secure because
 380:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          integer overflows, make sure your value can be correctly
 381:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          converted.
 382:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 383:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] interval  interval in ticks
 384:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @return              The number of seconds.
 385:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 386:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @api
 387:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 388:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define OSAL_I2S(interval) TIME_I2S(interval)
 389:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 390:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 391:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Time interval to milliseconds.
 392:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @details Converts from system ticks number to milliseconds.
 393:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The result is rounded up to the next millisecond boundary.
 394:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    Use of this macro for large values is not secure because
 395:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          integer overflows, make sure your value can be correctly
 396:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          converted.
 397:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 398:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] interval  interval in ticks
 399:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @return              The number of milliseconds.
 400:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 401:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @api
 402:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 403:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define OSAL_I2MS(interval) TIME_I2MS(interval)
 404:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 405:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 406:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Time interval to microseconds.
 407:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @details Converts from system ticks number to microseconds.
 408:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The result is rounded up to the next microsecond boundary.
 409:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    Use of this macro for large values is not secure because
 410:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          integer overflows, make sure your value can be correctly
 411:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          converted.
 412:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 413:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] interval  interval in ticks
 414:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @return              The number of microseconds.
 415:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 416:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @api
 417:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 418:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define OSAL_I2US(interval) TIME_I2US(interval)
 419:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /** @} */
 420:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 421:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 422:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @name    Time conversion utilities for the realtime counter
 423:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @{
 424:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 425:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 426:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Seconds to realtime counter.
 427:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @details Converts from seconds to realtime counter cycles.
 428:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The macro assumes that @p freq >= @p 1.
 429:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 430:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] freq      clock frequency, in Hz, of the realtime counter
 431:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] sec       number of seconds
 432:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @return              The number of cycles.
 433:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 434:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @api
 435:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 436:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define OSAL_S2RTC(freq, sec) S2RTC(freq, sec)
 437:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 438:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 439:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Milliseconds to realtime counter.
 440:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @details Converts from milliseconds to realtime counter cycles.
 441:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The result is rounded upward to the next millisecond boundary.
 442:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The macro assumes that @p freq >= @p 1000.
 443:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 444:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] freq      clock frequency, in Hz, of the realtime counter
 445:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] msec      number of milliseconds
 446:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @return              The number of cycles.
 447:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 448:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @api
 449:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 450:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define OSAL_MS2RTC(freq, msec) MS2RTC(freq, msec)
 451:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 452:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 453:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Microseconds to realtime counter.
 454:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @details Converts from microseconds to realtime counter cycles.
 455:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The result is rounded upward to the next microsecond boundary.
 456:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The macro assumes that @p freq >= @p 1000000.
 457:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 458:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] freq      clock frequency, in Hz, of the realtime counter
 459:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] usec      number of microseconds
 460:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @return              The number of cycles.
 461:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 462:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @api
 463:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 464:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define OSAL_US2RTC(freq, usec) US2RTC(freq, usec)
 465:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /** @} */
 466:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 467:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 468:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @name    Sleep macros using absolute time
 469:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @{
 470:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 471:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 472:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Delays the invoking thread for the specified number of seconds.
 473:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The specified time is rounded up to a value allowed by the real
 474:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          system tick clock.
 475:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The maximum specifiable value is implementation dependent.
 476:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 477:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] secs      time in seconds, must be different from zero
 478:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 479:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @api
 480:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 481:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define osalThreadSleepSeconds(secs) osalThreadSleep(OSAL_S2I(secs))
 482:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 483:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 484:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Delays the invoking thread for the specified number of
 485:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          milliseconds.
 486:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The specified time is rounded up to a value allowed by the real
 487:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          system tick clock.
 488:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The maximum specifiable value is implementation dependent.
 489:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 490:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] msecs     time in milliseconds, must be different from zero
 491:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 492:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @api
 493:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 494:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define osalThreadSleepMilliseconds(msecs) osalThreadSleep(OSAL_MS2I(msecs))
 495:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 496:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 497:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Delays the invoking thread for the specified number of
 498:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          microseconds.
 499:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The specified time is rounded up to a value allowed by the real
 500:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          system tick clock.
 501:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The maximum specifiable value is implementation dependent.
 502:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 503:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] usecs     time in microseconds, must be different from zero
 504:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 505:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @api
 506:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 507:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define osalThreadSleepMicroseconds(usecs) osalThreadSleep(OSAL_US2I(usecs))
 508:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /** @} */
 509:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 510:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /*===========================================================================*/
 511:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /* External declarations.                                                    */
 512:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /*===========================================================================*/
 513:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 514:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #ifdef __cplusplus
 515:./lib/chibios/os/hal/osal/rt-nil/osal.h **** extern "C" {
 516:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #endif
 517:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 518:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #ifdef __cplusplus
 519:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 520:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #endif
 521:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 522:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /*===========================================================================*/
 523:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /* Module inline functions.                                                  */
 524:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /*===========================================================================*/
 525:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 526:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 527:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   OSAL module initialization.
 528:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 529:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @api
 530:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 531:./lib/chibios/os/hal/osal/rt-nil/osal.h **** static inline void osalInit(void) {
 532:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 533:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 534:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 535:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 536:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   System halt with error message.
 537:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 538:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] reason    the halt message pointer
 539:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 540:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @api
 541:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 542:./lib/chibios/os/hal/osal/rt-nil/osal.h **** static inline void osalSysHalt(const char *reason) {
 543:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 544:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   chSysHalt(reason);
 545:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 546:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 547:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 548:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Disables interrupts globally.
 549:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 550:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @special
 551:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 552:./lib/chibios/os/hal/osal/rt-nil/osal.h **** static inline void osalSysDisable(void) {
 553:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 554:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   chSysDisable();
 555:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 556:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 557:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 558:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Enables interrupts globally.
 559:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 560:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @special
 561:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 562:./lib/chibios/os/hal/osal/rt-nil/osal.h **** static inline void osalSysEnable(void) {
 563:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 564:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   chSysEnable();
 565:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 566:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 567:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 568:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Enters a critical zone from thread context.
 569:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    This function cannot be used for reentrant critical zones.
 570:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 571:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @special
 572:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 573:./lib/chibios/os/hal/osal/rt-nil/osal.h **** static inline void osalSysLock(void) {
 162              		.loc 2 573 20 view .LVU39
 574:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 575:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   chSysLock();
 163              		.loc 2 575 3 view .LVU40
 164              	.LBB288:
 165              	.LBI288:
 166              		.file 3 "./lib/chibios/os/rt/include/chsys.h"
   1:./lib/chibios/os/rt/include/chsys.h **** /*
   2:./lib/chibios/os/rt/include/chsys.h ****     ChibiOS - Copyright (C) 2006..2018 Giovanni Di Sirio.
   3:./lib/chibios/os/rt/include/chsys.h **** 
   4:./lib/chibios/os/rt/include/chsys.h ****     This file is part of ChibiOS.
   5:./lib/chibios/os/rt/include/chsys.h **** 
   6:./lib/chibios/os/rt/include/chsys.h ****     ChibiOS is free software; you can redistribute it and/or modify
   7:./lib/chibios/os/rt/include/chsys.h ****     it under the terms of the GNU General Public License as published by
   8:./lib/chibios/os/rt/include/chsys.h ****     the Free Software Foundation; either version 3 of the License, or
   9:./lib/chibios/os/rt/include/chsys.h ****     (at your option) any later version.
  10:./lib/chibios/os/rt/include/chsys.h **** 
  11:./lib/chibios/os/rt/include/chsys.h ****     ChibiOS is distributed in the hope that it will be useful,
  12:./lib/chibios/os/rt/include/chsys.h ****     but WITHOUT ANY WARRANTY; without even the implied warranty of
  13:./lib/chibios/os/rt/include/chsys.h ****     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  14:./lib/chibios/os/rt/include/chsys.h ****     GNU General Public License for more details.
  15:./lib/chibios/os/rt/include/chsys.h **** 
  16:./lib/chibios/os/rt/include/chsys.h ****     You should have received a copy of the GNU General Public License
  17:./lib/chibios/os/rt/include/chsys.h ****     along with this program.  If not, see <http://www.gnu.org/licenses/>.
  18:./lib/chibios/os/rt/include/chsys.h **** */
  19:./lib/chibios/os/rt/include/chsys.h **** 
  20:./lib/chibios/os/rt/include/chsys.h **** /**
  21:./lib/chibios/os/rt/include/chsys.h ****  * @file    rt/include/chsys.h
  22:./lib/chibios/os/rt/include/chsys.h ****  * @brief   System related macros and structures.
  23:./lib/chibios/os/rt/include/chsys.h ****  *
  24:./lib/chibios/os/rt/include/chsys.h ****  * @addtogroup system
  25:./lib/chibios/os/rt/include/chsys.h ****  * @{
  26:./lib/chibios/os/rt/include/chsys.h ****  */
  27:./lib/chibios/os/rt/include/chsys.h **** 
  28:./lib/chibios/os/rt/include/chsys.h **** #ifndef CHSYS_H
  29:./lib/chibios/os/rt/include/chsys.h **** #define CHSYS_H
  30:./lib/chibios/os/rt/include/chsys.h **** 
  31:./lib/chibios/os/rt/include/chsys.h **** /*lint -sem(chSysHalt, r_no)*/
  32:./lib/chibios/os/rt/include/chsys.h **** 
  33:./lib/chibios/os/rt/include/chsys.h **** /*===========================================================================*/
  34:./lib/chibios/os/rt/include/chsys.h **** /* Module constants.                                                         */
  35:./lib/chibios/os/rt/include/chsys.h **** /*===========================================================================*/
  36:./lib/chibios/os/rt/include/chsys.h **** 
  37:./lib/chibios/os/rt/include/chsys.h **** /**
  38:./lib/chibios/os/rt/include/chsys.h ****  * @name    Masks of executable integrity checks.
  39:./lib/chibios/os/rt/include/chsys.h ****  * @{
  40:./lib/chibios/os/rt/include/chsys.h ****  */
  41:./lib/chibios/os/rt/include/chsys.h **** #define CH_INTEGRITY_RLIST                  1U
  42:./lib/chibios/os/rt/include/chsys.h **** #define CH_INTEGRITY_VTLIST                 2U
  43:./lib/chibios/os/rt/include/chsys.h **** #define CH_INTEGRITY_REGISTRY               4U
  44:./lib/chibios/os/rt/include/chsys.h **** #define CH_INTEGRITY_PORT                   8U
  45:./lib/chibios/os/rt/include/chsys.h **** /** @} */
  46:./lib/chibios/os/rt/include/chsys.h **** 
  47:./lib/chibios/os/rt/include/chsys.h **** /*===========================================================================*/
  48:./lib/chibios/os/rt/include/chsys.h **** /* Module pre-compile time settings.                                         */
  49:./lib/chibios/os/rt/include/chsys.h **** /*===========================================================================*/
  50:./lib/chibios/os/rt/include/chsys.h **** 
  51:./lib/chibios/os/rt/include/chsys.h **** /*===========================================================================*/
  52:./lib/chibios/os/rt/include/chsys.h **** /* Derived constants and error checks.                                       */
  53:./lib/chibios/os/rt/include/chsys.h **** /*===========================================================================*/
  54:./lib/chibios/os/rt/include/chsys.h **** 
  55:./lib/chibios/os/rt/include/chsys.h **** /*===========================================================================*/
  56:./lib/chibios/os/rt/include/chsys.h **** /* Module data structures and types.                                         */
  57:./lib/chibios/os/rt/include/chsys.h **** /*===========================================================================*/
  58:./lib/chibios/os/rt/include/chsys.h **** 
  59:./lib/chibios/os/rt/include/chsys.h **** /*===========================================================================*/
  60:./lib/chibios/os/rt/include/chsys.h **** /* Module macros.                                                            */
  61:./lib/chibios/os/rt/include/chsys.h **** /*===========================================================================*/
  62:./lib/chibios/os/rt/include/chsys.h **** 
  63:./lib/chibios/os/rt/include/chsys.h **** /**
  64:./lib/chibios/os/rt/include/chsys.h ****  * @name    ISRs abstraction macros
  65:./lib/chibios/os/rt/include/chsys.h ****  * @{
  66:./lib/chibios/os/rt/include/chsys.h ****  */
  67:./lib/chibios/os/rt/include/chsys.h **** /**
  68:./lib/chibios/os/rt/include/chsys.h ****  * @brief   Priority level validation macro.
  69:./lib/chibios/os/rt/include/chsys.h ****  * @details This macro determines if the passed value is a valid priority
  70:./lib/chibios/os/rt/include/chsys.h ****  *          level for the underlying architecture.
  71:./lib/chibios/os/rt/include/chsys.h ****  *
  72:./lib/chibios/os/rt/include/chsys.h ****  * @param[in] prio      the priority level
  73:./lib/chibios/os/rt/include/chsys.h ****  * @return              Priority range result.
  74:./lib/chibios/os/rt/include/chsys.h ****  * @retval false        if the priority is invalid or if the architecture
  75:./lib/chibios/os/rt/include/chsys.h ****  *                      does not support priorities.
  76:./lib/chibios/os/rt/include/chsys.h ****  * @retval true         if the priority is valid.
  77:./lib/chibios/os/rt/include/chsys.h ****  */
  78:./lib/chibios/os/rt/include/chsys.h **** #if defined(PORT_IRQ_IS_VALID_PRIORITY) || defined(__DOXYGEN__)
  79:./lib/chibios/os/rt/include/chsys.h **** #define CH_IRQ_IS_VALID_PRIORITY(prio)                                      \
  80:./lib/chibios/os/rt/include/chsys.h ****   PORT_IRQ_IS_VALID_PRIORITY(prio)
  81:./lib/chibios/os/rt/include/chsys.h **** #else
  82:./lib/chibios/os/rt/include/chsys.h **** #define CH_IRQ_IS_VALID_PRIORITY(prio) false
  83:./lib/chibios/os/rt/include/chsys.h **** #endif
  84:./lib/chibios/os/rt/include/chsys.h **** 
  85:./lib/chibios/os/rt/include/chsys.h **** /**
  86:./lib/chibios/os/rt/include/chsys.h ****  * @brief   Priority level validation macro.
  87:./lib/chibios/os/rt/include/chsys.h ****  * @details This macro determines if the passed value is a valid priority
  88:./lib/chibios/os/rt/include/chsys.h ****  *          level that cannot preempt the kernel critical zone.
  89:./lib/chibios/os/rt/include/chsys.h ****  *
  90:./lib/chibios/os/rt/include/chsys.h ****  * @param[in] prio      the priority level
  91:./lib/chibios/os/rt/include/chsys.h ****  * @return              Priority range result.
  92:./lib/chibios/os/rt/include/chsys.h ****  * @retval false        if the priority is invalid or if the architecture
  93:./lib/chibios/os/rt/include/chsys.h ****  *                      does not support priorities.
  94:./lib/chibios/os/rt/include/chsys.h ****  * @retval true         if the priority is valid.
  95:./lib/chibios/os/rt/include/chsys.h ****  */
  96:./lib/chibios/os/rt/include/chsys.h **** #if defined(PORT_IRQ_IS_VALID_KERNEL_PRIORITY) || defined(__DOXYGEN__)
  97:./lib/chibios/os/rt/include/chsys.h **** #define CH_IRQ_IS_VALID_KERNEL_PRIORITY(prio)                               \
  98:./lib/chibios/os/rt/include/chsys.h ****   PORT_IRQ_IS_VALID_KERNEL_PRIORITY(prio)
  99:./lib/chibios/os/rt/include/chsys.h **** #else
 100:./lib/chibios/os/rt/include/chsys.h **** #define CH_IRQ_IS_VALID_KERNEL_PRIORITY(prio) false
 101:./lib/chibios/os/rt/include/chsys.h **** #endif
 102:./lib/chibios/os/rt/include/chsys.h **** 
 103:./lib/chibios/os/rt/include/chsys.h **** /**
 104:./lib/chibios/os/rt/include/chsys.h ****  * @brief   IRQ handler enter code.
 105:./lib/chibios/os/rt/include/chsys.h ****  * @note    Usually IRQ handlers functions are also declared naked.
 106:./lib/chibios/os/rt/include/chsys.h ****  * @note    On some architectures this macro can be empty.
 107:./lib/chibios/os/rt/include/chsys.h ****  *
 108:./lib/chibios/os/rt/include/chsys.h ****  * @special
 109:./lib/chibios/os/rt/include/chsys.h ****  */
 110:./lib/chibios/os/rt/include/chsys.h **** #define CH_IRQ_PROLOGUE()                                                   \
 111:./lib/chibios/os/rt/include/chsys.h ****   PORT_IRQ_PROLOGUE();                                                      \
 112:./lib/chibios/os/rt/include/chsys.h ****   CH_CFG_IRQ_PROLOGUE_HOOK();                                               \
 113:./lib/chibios/os/rt/include/chsys.h ****   _stats_increase_irq();                                                    \
 114:./lib/chibios/os/rt/include/chsys.h ****   _trace_isr_enter(__func__);                                               \
 115:./lib/chibios/os/rt/include/chsys.h ****   _dbg_check_enter_isr()
 116:./lib/chibios/os/rt/include/chsys.h **** 
 117:./lib/chibios/os/rt/include/chsys.h **** /**
 118:./lib/chibios/os/rt/include/chsys.h ****  * @brief   IRQ handler exit code.
 119:./lib/chibios/os/rt/include/chsys.h ****  * @note    Usually IRQ handlers function are also declared naked.
 120:./lib/chibios/os/rt/include/chsys.h ****  * @note    This macro usually performs the final reschedule by using
 121:./lib/chibios/os/rt/include/chsys.h ****  *          @p chSchIsPreemptionRequired() and @p chSchDoReschedule().
 122:./lib/chibios/os/rt/include/chsys.h ****  *
 123:./lib/chibios/os/rt/include/chsys.h ****  * @special
 124:./lib/chibios/os/rt/include/chsys.h ****  */
 125:./lib/chibios/os/rt/include/chsys.h **** #define CH_IRQ_EPILOGUE()                                                   \
 126:./lib/chibios/os/rt/include/chsys.h ****   _dbg_check_leave_isr();                                                   \
 127:./lib/chibios/os/rt/include/chsys.h ****   _trace_isr_leave(__func__);                                               \
 128:./lib/chibios/os/rt/include/chsys.h ****   CH_CFG_IRQ_EPILOGUE_HOOK();                                               \
 129:./lib/chibios/os/rt/include/chsys.h ****   PORT_IRQ_EPILOGUE()
 130:./lib/chibios/os/rt/include/chsys.h **** 
 131:./lib/chibios/os/rt/include/chsys.h **** /**
 132:./lib/chibios/os/rt/include/chsys.h ****  * @brief   Standard normal IRQ handler declaration.
 133:./lib/chibios/os/rt/include/chsys.h ****  * @note    @p id can be a function name or a vector number depending on the
 134:./lib/chibios/os/rt/include/chsys.h ****  *          port implementation.
 135:./lib/chibios/os/rt/include/chsys.h ****  *
 136:./lib/chibios/os/rt/include/chsys.h ****  * @special
 137:./lib/chibios/os/rt/include/chsys.h ****  */
 138:./lib/chibios/os/rt/include/chsys.h **** #define CH_IRQ_HANDLER(id) PORT_IRQ_HANDLER(id)
 139:./lib/chibios/os/rt/include/chsys.h **** /** @} */
 140:./lib/chibios/os/rt/include/chsys.h **** 
 141:./lib/chibios/os/rt/include/chsys.h **** /**
 142:./lib/chibios/os/rt/include/chsys.h ****  * @name    Fast ISRs abstraction macros
 143:./lib/chibios/os/rt/include/chsys.h ****  * @{
 144:./lib/chibios/os/rt/include/chsys.h ****  */
 145:./lib/chibios/os/rt/include/chsys.h **** /**
 146:./lib/chibios/os/rt/include/chsys.h ****  * @brief   Standard fast IRQ handler declaration.
 147:./lib/chibios/os/rt/include/chsys.h ****  * @note    @p id can be a function name or a vector number depending on the
 148:./lib/chibios/os/rt/include/chsys.h ****  *          port implementation.
 149:./lib/chibios/os/rt/include/chsys.h ****  * @note    Not all architectures support fast interrupts.
 150:./lib/chibios/os/rt/include/chsys.h ****  *
 151:./lib/chibios/os/rt/include/chsys.h ****  * @special
 152:./lib/chibios/os/rt/include/chsys.h ****  */
 153:./lib/chibios/os/rt/include/chsys.h **** #define CH_FAST_IRQ_HANDLER(id) PORT_FAST_IRQ_HANDLER(id)
 154:./lib/chibios/os/rt/include/chsys.h **** /** @} */
 155:./lib/chibios/os/rt/include/chsys.h **** 
 156:./lib/chibios/os/rt/include/chsys.h **** /**
 157:./lib/chibios/os/rt/include/chsys.h ****  * @name    Time conversion utilities for the realtime counter
 158:./lib/chibios/os/rt/include/chsys.h ****  * @{
 159:./lib/chibios/os/rt/include/chsys.h ****  */
 160:./lib/chibios/os/rt/include/chsys.h **** /**
 161:./lib/chibios/os/rt/include/chsys.h ****  * @brief   Seconds to realtime counter.
 162:./lib/chibios/os/rt/include/chsys.h ****  * @details Converts from seconds to realtime counter cycles.
 163:./lib/chibios/os/rt/include/chsys.h ****  * @note    The macro assumes that @p freq >= @p 1.
 164:./lib/chibios/os/rt/include/chsys.h ****  *
 165:./lib/chibios/os/rt/include/chsys.h ****  * @param[in] freq      clock frequency, in Hz, of the realtime counter
 166:./lib/chibios/os/rt/include/chsys.h ****  * @param[in] sec       number of seconds
 167:./lib/chibios/os/rt/include/chsys.h ****  * @return              The number of cycles.
 168:./lib/chibios/os/rt/include/chsys.h ****  *
 169:./lib/chibios/os/rt/include/chsys.h ****  * @api
 170:./lib/chibios/os/rt/include/chsys.h ****  */
 171:./lib/chibios/os/rt/include/chsys.h **** #define S2RTC(freq, sec) ((freq) * (sec))
 172:./lib/chibios/os/rt/include/chsys.h **** 
 173:./lib/chibios/os/rt/include/chsys.h **** /**
 174:./lib/chibios/os/rt/include/chsys.h ****  * @brief   Milliseconds to realtime counter.
 175:./lib/chibios/os/rt/include/chsys.h ****  * @details Converts from milliseconds to realtime counter cycles.
 176:./lib/chibios/os/rt/include/chsys.h ****  * @note    The result is rounded upward to the next millisecond boundary.
 177:./lib/chibios/os/rt/include/chsys.h ****  * @note    The macro assumes that @p freq >= @p 1000.
 178:./lib/chibios/os/rt/include/chsys.h ****  *
 179:./lib/chibios/os/rt/include/chsys.h ****  * @param[in] freq      clock frequency, in Hz, of the realtime counter
 180:./lib/chibios/os/rt/include/chsys.h ****  * @param[in] msec      number of milliseconds
 181:./lib/chibios/os/rt/include/chsys.h ****  * @return              The number of cycles.
 182:./lib/chibios/os/rt/include/chsys.h ****  *
 183:./lib/chibios/os/rt/include/chsys.h ****  * @api
 184:./lib/chibios/os/rt/include/chsys.h ****  */
 185:./lib/chibios/os/rt/include/chsys.h **** #define MS2RTC(freq, msec) (rtcnt_t)((((freq) + 999UL) / 1000UL) * (msec))
 186:./lib/chibios/os/rt/include/chsys.h **** 
 187:./lib/chibios/os/rt/include/chsys.h **** /**
 188:./lib/chibios/os/rt/include/chsys.h ****  * @brief   Microseconds to realtime counter.
 189:./lib/chibios/os/rt/include/chsys.h ****  * @details Converts from microseconds to realtime counter cycles.
 190:./lib/chibios/os/rt/include/chsys.h ****  * @note    The result is rounded upward to the next microsecond boundary.
 191:./lib/chibios/os/rt/include/chsys.h ****  * @note    The macro assumes that @p freq >= @p 1000000.
 192:./lib/chibios/os/rt/include/chsys.h ****  *
 193:./lib/chibios/os/rt/include/chsys.h ****  * @param[in] freq      clock frequency, in Hz, of the realtime counter
 194:./lib/chibios/os/rt/include/chsys.h ****  * @param[in] usec      number of microseconds
 195:./lib/chibios/os/rt/include/chsys.h ****  * @return              The number of cycles.
 196:./lib/chibios/os/rt/include/chsys.h ****  *
 197:./lib/chibios/os/rt/include/chsys.h ****  * @api
 198:./lib/chibios/os/rt/include/chsys.h ****  */
 199:./lib/chibios/os/rt/include/chsys.h **** #define US2RTC(freq, usec) (rtcnt_t)((((freq) + 999999UL) / 1000000UL) * (usec))
 200:./lib/chibios/os/rt/include/chsys.h **** 
 201:./lib/chibios/os/rt/include/chsys.h **** /**
 202:./lib/chibios/os/rt/include/chsys.h ****  * @brief   Realtime counter cycles to seconds.
 203:./lib/chibios/os/rt/include/chsys.h ****  * @details Converts from realtime counter cycles number to seconds.
 204:./lib/chibios/os/rt/include/chsys.h ****  * @note    The result is rounded up to the next second boundary.
 205:./lib/chibios/os/rt/include/chsys.h ****  * @note    The macro assumes that @p freq >= @p 1.
 206:./lib/chibios/os/rt/include/chsys.h ****  *
 207:./lib/chibios/os/rt/include/chsys.h ****  * @param[in] freq      clock frequency, in Hz, of the realtime counter
 208:./lib/chibios/os/rt/include/chsys.h ****  * @param[in] n         number of cycles
 209:./lib/chibios/os/rt/include/chsys.h ****  * @return              The number of seconds.
 210:./lib/chibios/os/rt/include/chsys.h ****  *
 211:./lib/chibios/os/rt/include/chsys.h ****  * @api
 212:./lib/chibios/os/rt/include/chsys.h ****  */
 213:./lib/chibios/os/rt/include/chsys.h **** #define RTC2S(freq, n) ((((n) - 1UL) / (freq)) + 1UL)
 214:./lib/chibios/os/rt/include/chsys.h **** 
 215:./lib/chibios/os/rt/include/chsys.h **** /**
 216:./lib/chibios/os/rt/include/chsys.h ****  * @brief   Realtime counter cycles to milliseconds.
 217:./lib/chibios/os/rt/include/chsys.h ****  * @details Converts from realtime counter cycles number to milliseconds.
 218:./lib/chibios/os/rt/include/chsys.h ****  * @note    The result is rounded up to the next millisecond boundary.
 219:./lib/chibios/os/rt/include/chsys.h ****  * @note    The macro assumes that @p freq >= @p 1000.
 220:./lib/chibios/os/rt/include/chsys.h ****  *
 221:./lib/chibios/os/rt/include/chsys.h ****  * @param[in] freq      clock frequency, in Hz, of the realtime counter
 222:./lib/chibios/os/rt/include/chsys.h ****  * @param[in] n         number of cycles
 223:./lib/chibios/os/rt/include/chsys.h ****  * @return              The number of milliseconds.
 224:./lib/chibios/os/rt/include/chsys.h ****  *
 225:./lib/chibios/os/rt/include/chsys.h ****  * @api
 226:./lib/chibios/os/rt/include/chsys.h ****  */
 227:./lib/chibios/os/rt/include/chsys.h **** #define RTC2MS(freq, n) ((((n) - 1UL) / ((freq) / 1000UL)) + 1UL)
 228:./lib/chibios/os/rt/include/chsys.h **** 
 229:./lib/chibios/os/rt/include/chsys.h **** /**
 230:./lib/chibios/os/rt/include/chsys.h ****  * @brief   Realtime counter cycles to microseconds.
 231:./lib/chibios/os/rt/include/chsys.h ****  * @details Converts from realtime counter cycles number to microseconds.
 232:./lib/chibios/os/rt/include/chsys.h ****  * @note    The result is rounded up to the next microsecond boundary.
 233:./lib/chibios/os/rt/include/chsys.h ****  * @note    The macro assumes that @p freq >= @p 1000000.
 234:./lib/chibios/os/rt/include/chsys.h ****  *
 235:./lib/chibios/os/rt/include/chsys.h ****  * @param[in] freq      clock frequency, in Hz, of the realtime counter
 236:./lib/chibios/os/rt/include/chsys.h ****  * @param[in] n         number of cycles
 237:./lib/chibios/os/rt/include/chsys.h ****  * @return              The number of microseconds.
 238:./lib/chibios/os/rt/include/chsys.h ****  *
 239:./lib/chibios/os/rt/include/chsys.h ****  * @api
 240:./lib/chibios/os/rt/include/chsys.h ****  */
 241:./lib/chibios/os/rt/include/chsys.h **** #define RTC2US(freq, n) ((((n) - 1UL) / ((freq) / 1000000UL)) + 1UL)
 242:./lib/chibios/os/rt/include/chsys.h **** /** @} */
 243:./lib/chibios/os/rt/include/chsys.h **** 
 244:./lib/chibios/os/rt/include/chsys.h **** /**
 245:./lib/chibios/os/rt/include/chsys.h ****  * @brief   Returns the current value of the system real time counter.
 246:./lib/chibios/os/rt/include/chsys.h ****  * @note    This function is only available if the port layer supports the
 247:./lib/chibios/os/rt/include/chsys.h ****  *          option @p PORT_SUPPORTS_RT.
 248:./lib/chibios/os/rt/include/chsys.h ****  *
 249:./lib/chibios/os/rt/include/chsys.h ****  * @return              The value of the system realtime counter of
 250:./lib/chibios/os/rt/include/chsys.h ****  *                      type rtcnt_t.
 251:./lib/chibios/os/rt/include/chsys.h ****  *
 252:./lib/chibios/os/rt/include/chsys.h ****  * @xclass
 253:./lib/chibios/os/rt/include/chsys.h ****  */
 254:./lib/chibios/os/rt/include/chsys.h **** #if (PORT_SUPPORTS_RT == TRUE) || defined(__DOXYGEN__)
 255:./lib/chibios/os/rt/include/chsys.h **** #define chSysGetRealtimeCounterX() (rtcnt_t)port_rt_get_counter_value()
 256:./lib/chibios/os/rt/include/chsys.h **** #endif
 257:./lib/chibios/os/rt/include/chsys.h **** 
 258:./lib/chibios/os/rt/include/chsys.h **** /**
 259:./lib/chibios/os/rt/include/chsys.h ****  * @brief   Performs a context switch.
 260:./lib/chibios/os/rt/include/chsys.h ****  * @note    Not a user function, it is meant to be invoked by the scheduler
 261:./lib/chibios/os/rt/include/chsys.h ****  *          itself or from within the port layer.
 262:./lib/chibios/os/rt/include/chsys.h ****  *
 263:./lib/chibios/os/rt/include/chsys.h ****  * @param[in] ntp       the thread to be switched in
 264:./lib/chibios/os/rt/include/chsys.h ****  * @param[in] otp       the thread to be switched out
 265:./lib/chibios/os/rt/include/chsys.h ****  *
 266:./lib/chibios/os/rt/include/chsys.h ****  * @special
 267:./lib/chibios/os/rt/include/chsys.h ****  */
 268:./lib/chibios/os/rt/include/chsys.h **** #define chSysSwitch(ntp, otp) {                                             \
 269:./lib/chibios/os/rt/include/chsys.h ****                                                                             \
 270:./lib/chibios/os/rt/include/chsys.h ****   _trace_switch(ntp, otp);                                                  \
 271:./lib/chibios/os/rt/include/chsys.h ****   _stats_ctxswc(ntp, otp);                                                  \
 272:./lib/chibios/os/rt/include/chsys.h ****   CH_CFG_CONTEXT_SWITCH_HOOK(ntp, otp);                                     \
 273:./lib/chibios/os/rt/include/chsys.h ****   port_switch(ntp, otp);                                                    \
 274:./lib/chibios/os/rt/include/chsys.h **** }
 275:./lib/chibios/os/rt/include/chsys.h **** 
 276:./lib/chibios/os/rt/include/chsys.h **** /*===========================================================================*/
 277:./lib/chibios/os/rt/include/chsys.h **** /* External declarations.                                                    */
 278:./lib/chibios/os/rt/include/chsys.h **** /*===========================================================================*/
 279:./lib/chibios/os/rt/include/chsys.h **** 
 280:./lib/chibios/os/rt/include/chsys.h **** #if !defined(__DOXYGEN__)
 281:./lib/chibios/os/rt/include/chsys.h **** extern stkalign_t ch_idle_thread_wa[];
 282:./lib/chibios/os/rt/include/chsys.h **** #endif
 283:./lib/chibios/os/rt/include/chsys.h **** 
 284:./lib/chibios/os/rt/include/chsys.h **** #ifdef __cplusplus
 285:./lib/chibios/os/rt/include/chsys.h **** extern "C" {
 286:./lib/chibios/os/rt/include/chsys.h **** #endif
 287:./lib/chibios/os/rt/include/chsys.h ****   void chSysInit(void);
 288:./lib/chibios/os/rt/include/chsys.h ****   bool chSysIntegrityCheckI(unsigned testmask);
 289:./lib/chibios/os/rt/include/chsys.h ****   void chSysTimerHandlerI(void);
 290:./lib/chibios/os/rt/include/chsys.h ****   syssts_t chSysGetStatusAndLockX(void);
 291:./lib/chibios/os/rt/include/chsys.h ****   void chSysRestoreStatusX(syssts_t sts);
 292:./lib/chibios/os/rt/include/chsys.h **** #if PORT_SUPPORTS_RT == TRUE
 293:./lib/chibios/os/rt/include/chsys.h ****   bool chSysIsCounterWithinX(rtcnt_t cnt, rtcnt_t start, rtcnt_t end);
 294:./lib/chibios/os/rt/include/chsys.h ****   void chSysPolledDelayX(rtcnt_t cycles);
 295:./lib/chibios/os/rt/include/chsys.h **** #endif
 296:./lib/chibios/os/rt/include/chsys.h **** #ifdef __cplusplus
 297:./lib/chibios/os/rt/include/chsys.h **** }
 298:./lib/chibios/os/rt/include/chsys.h **** #endif
 299:./lib/chibios/os/rt/include/chsys.h **** 
 300:./lib/chibios/os/rt/include/chsys.h **** /*===========================================================================*/
 301:./lib/chibios/os/rt/include/chsys.h **** /* Module inline functions.                                                  */
 302:./lib/chibios/os/rt/include/chsys.h **** /*===========================================================================*/
 303:./lib/chibios/os/rt/include/chsys.h **** 
 304:./lib/chibios/os/rt/include/chsys.h **** /**
 305:./lib/chibios/os/rt/include/chsys.h ****  * @brief   Raises the system interrupt priority mask to the maximum level.
 306:./lib/chibios/os/rt/include/chsys.h ****  * @details All the maskable interrupt sources are disabled regardless their
 307:./lib/chibios/os/rt/include/chsys.h ****  *          hardware priority.
 308:./lib/chibios/os/rt/include/chsys.h ****  * @note    Do not invoke this API from within a kernel lock.
 309:./lib/chibios/os/rt/include/chsys.h ****  *
 310:./lib/chibios/os/rt/include/chsys.h ****  * @special
 311:./lib/chibios/os/rt/include/chsys.h ****  */
 312:./lib/chibios/os/rt/include/chsys.h **** static inline void chSysDisable(void) {
 313:./lib/chibios/os/rt/include/chsys.h **** 
 314:./lib/chibios/os/rt/include/chsys.h ****   port_disable();
 315:./lib/chibios/os/rt/include/chsys.h ****   _dbg_check_disable();
 316:./lib/chibios/os/rt/include/chsys.h **** }
 317:./lib/chibios/os/rt/include/chsys.h **** 
 318:./lib/chibios/os/rt/include/chsys.h **** /**
 319:./lib/chibios/os/rt/include/chsys.h ****  * @brief   Raises the system interrupt priority mask to system level.
 320:./lib/chibios/os/rt/include/chsys.h ****  * @details The interrupt sources that should not be able to preempt the kernel
 321:./lib/chibios/os/rt/include/chsys.h ****  *          are disabled, interrupt sources with higher priority are still
 322:./lib/chibios/os/rt/include/chsys.h ****  *          enabled.
 323:./lib/chibios/os/rt/include/chsys.h ****  * @note    Do not invoke this API from within a kernel lock.
 324:./lib/chibios/os/rt/include/chsys.h ****  * @note    This API is no replacement for @p chSysLock(), the @p chSysLock()
 325:./lib/chibios/os/rt/include/chsys.h ****  *          could do more than just disable the interrupts.
 326:./lib/chibios/os/rt/include/chsys.h ****  *
 327:./lib/chibios/os/rt/include/chsys.h ****  * @special
 328:./lib/chibios/os/rt/include/chsys.h ****  */
 329:./lib/chibios/os/rt/include/chsys.h **** static inline void chSysSuspend(void) {
 330:./lib/chibios/os/rt/include/chsys.h **** 
 331:./lib/chibios/os/rt/include/chsys.h ****   port_suspend();
 332:./lib/chibios/os/rt/include/chsys.h ****   _dbg_check_suspend();
 333:./lib/chibios/os/rt/include/chsys.h **** }
 334:./lib/chibios/os/rt/include/chsys.h **** 
 335:./lib/chibios/os/rt/include/chsys.h **** /**
 336:./lib/chibios/os/rt/include/chsys.h ****  * @brief   Lowers the system interrupt priority mask to user level.
 337:./lib/chibios/os/rt/include/chsys.h ****  * @details All the interrupt sources are enabled.
 338:./lib/chibios/os/rt/include/chsys.h ****  * @note    Do not invoke this API from within a kernel lock.
 339:./lib/chibios/os/rt/include/chsys.h ****  * @note    This API is no replacement for @p chSysUnlock(), the
 340:./lib/chibios/os/rt/include/chsys.h ****  *          @p chSysUnlock() could do more than just enable the interrupts.
 341:./lib/chibios/os/rt/include/chsys.h ****  *
 342:./lib/chibios/os/rt/include/chsys.h ****  * @special
 343:./lib/chibios/os/rt/include/chsys.h ****  */
 344:./lib/chibios/os/rt/include/chsys.h **** static inline void chSysEnable(void) {
 345:./lib/chibios/os/rt/include/chsys.h **** 
 346:./lib/chibios/os/rt/include/chsys.h ****   _dbg_check_enable();
 347:./lib/chibios/os/rt/include/chsys.h ****   port_enable();
 348:./lib/chibios/os/rt/include/chsys.h **** }
 349:./lib/chibios/os/rt/include/chsys.h **** 
 350:./lib/chibios/os/rt/include/chsys.h **** /**
 351:./lib/chibios/os/rt/include/chsys.h ****  * @brief   Enters the kernel lock state.
 352:./lib/chibios/os/rt/include/chsys.h ****  *
 353:./lib/chibios/os/rt/include/chsys.h ****  * @special
 354:./lib/chibios/os/rt/include/chsys.h ****  */
 355:./lib/chibios/os/rt/include/chsys.h **** static inline void chSysLock(void) {
 167              		.loc 3 355 20 view .LVU41
 356:./lib/chibios/os/rt/include/chsys.h **** 
 357:./lib/chibios/os/rt/include/chsys.h ****   port_lock();
 168              		.loc 3 357 3 view .LVU42
 169              	.LBB289:
 170              	.LBI289:
 171              		.file 4 "./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h"
   1:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /*
   2:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     ChibiOS - Copyright (C) 2006..2018 Giovanni Di Sirio.
   3:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
   4:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     This file is part of ChibiOS.
   5:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
   6:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     ChibiOS is free software; you can redistribute it and/or modify
   7:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     it under the terms of the GNU General Public License as published by
   8:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     the Free Software Foundation; either version 3 of the License, or
   9:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     (at your option) any later version.
  10:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
  11:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     ChibiOS is distributed in the hope that it will be useful,
  12:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     but WITHOUT ANY WARRANTY; without even the implied warranty of
  13:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  14:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     GNU General Public License for more details.
  15:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
  16:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     You should have received a copy of the GNU General Public License
  17:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     along with this program.  If not, see <http://www.gnu.org/licenses/>.
  18:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** */
  19:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
  20:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
  21:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @file    chcore_v7m.h
  22:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   ARMv7-M architecture port macros and structures.
  23:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *
  24:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @addtogroup ARMCMx_V7M_CORE
  25:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @{
  26:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
  27:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
  28:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #ifndef CHCORE_V7M_H
  29:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define CHCORE_V7M_H
  30:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
  31:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /*===========================================================================*/
  32:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /* Module constants.                                                         */
  33:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /*===========================================================================*/
  34:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
  35:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
  36:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @name    Port Capabilities and Constants
  37:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @{
  38:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
  39:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
  40:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   This port supports a realtime counter.
  41:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
  42:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_SUPPORTS_RT                TRUE
  43:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
  44:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
  45:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Natural alignment constant.
  46:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @note    It is the minimum alignment for pointer-size variables.
  47:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
  48:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_NATURAL_ALIGN              sizeof (void *)
  49:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
  50:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
  51:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Stack alignment constant.
  52:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @note    It is the alignment required for the stack pointer.
  53:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
  54:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_STACK_ALIGN                sizeof (stkalign_t)
  55:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
  56:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
  57:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Working Areas alignment constant.
  58:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @note    It is the alignment to be enforced for thread working areas.
  59:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
  60:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_WORKING_AREA_ALIGN         ((PORT_ENABLE_GUARD_PAGES == TRUE) ?\
  61:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****                                          32U : PORT_STACK_ALIGN)
  62:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /** @} */
  63:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
  64:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
  65:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Disabled value for BASEPRI register.
  66:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
  67:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define CORTEX_BASEPRI_DISABLED         0U
  68:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
  69:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /*===========================================================================*/
  70:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /* Module pre-compile time settings.                                         */
  71:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /*===========================================================================*/
  72:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
  73:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
  74:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Implements a syscall interface on SVC.
  75:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
  76:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if !defined(PORT_USE_SYSCALL) || defined(__DOXYGEN__)
  77:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_USE_SYSCALL                FALSE
  78:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
  79:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
  80:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
  81:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Number of MPU regions to be saved/restored during context switch.
  82:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @note    The first region is always region zero.
  83:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @note    The use of this option has an overhead of 8 bytes for each
  84:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          region for each thread.
  85:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @note    Allowed values are 0..4, zero means none.
  86:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
  87:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if !defined(PORT_SWITCHED_REGIONS_NUMBER) || defined(__DOXYGEN__)
  88:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_SWITCHED_REGIONS_NUMBER    0
  89:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
  90:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
  91:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
  92:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Enables stack overflow guard pages using MPU.
  93:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @note    This option can only be enabled if also option
  94:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          @p CH_DBG_ENABLE_STACK_CHECK is enabled.
  95:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @note    The use of this option has an overhead of 32 bytes for each
  96:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          thread.
  97:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
  98:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if !defined(PORT_ENABLE_GUARD_PAGES) || defined(__DOXYGEN__)
  99:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_ENABLE_GUARD_PAGES         FALSE
 100:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 101:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 102:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 103:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   MPU region to be used to stack guards.
 104:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @note    Make sure this region is not included in the
 105:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          @p PORT_SWITCHED_REGIONS_NUMBER regions range.
 106:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 107:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if !defined(PORT_USE_GUARD_MPU_REGION) || defined(__DOXYGEN__)
 108:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_USE_GUARD_MPU_REGION       MPU_REGION_7
 109:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 110:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 111:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 112:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Stack size for the system idle thread.
 113:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @details This size depends on the idle thread implementation, usually
 114:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          the idle thread should take no more space than those reserved
 115:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          by @p PORT_INT_REQUIRED_STACK.
 116:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @note    In this port it is set to 16 because the idle thread does have
 117:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          a stack frame when compiling without optimizations. You may
 118:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          reduce this value to zero when compiling with optimizations.
 119:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 120:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if !defined(PORT_IDLE_THREAD_STACK_SIZE) || defined(__DOXYGEN__)
 121:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_IDLE_THREAD_STACK_SIZE     16
 122:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 123:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 124:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 125:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Per-thread stack overhead for interrupts servicing.
 126:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @details This constant is used in the calculation of the correct working
 127:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          area size.
 128:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @note    In this port this value is conservatively set to 64 because the
 129:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          function @p chSchDoReschedule() can have a stack frame, especially
 130:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          with compiler optimizations disabled. The value can be reduced
 131:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          when compiler optimizations are enabled.
 132:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 133:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if !defined(PORT_INT_REQUIRED_STACK) || defined(__DOXYGEN__)
 134:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_INT_REQUIRED_STACK         64
 135:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 136:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 137:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 138:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Enables the use of the WFI instruction in the idle thread loop.
 139:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 140:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if !defined(CORTEX_ENABLE_WFI_IDLE)
 141:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define CORTEX_ENABLE_WFI_IDLE          FALSE
 142:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 143:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 144:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 145:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   FPU support in context switch.
 146:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @details Activating this option activates the FPU support in the kernel.
 147:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 148:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if !defined(CORTEX_USE_FPU)
 149:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define CORTEX_USE_FPU                  CORTEX_HAS_FPU
 150:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #elif (CORTEX_USE_FPU == TRUE) && (CORTEX_HAS_FPU == FALSE)
 151:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /* This setting requires an FPU presence check in case it is externally
 152:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****    redefined.*/
 153:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #error "the selected core does not have an FPU"
 154:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 155:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 156:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 157:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Simplified priority handling flag.
 158:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @details Activating this option makes the Kernel work in compact mode.
 159:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          In compact mode interrupts are disabled globally instead of
 160:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          raising the priority mask to some intermediate level.
 161:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 162:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if !defined(CORTEX_SIMPLIFIED_PRIORITY)
 163:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define CORTEX_SIMPLIFIED_PRIORITY      FALSE
 164:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 165:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 166:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 167:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   SVCALL handler priority.
 168:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @note    The default SVCALL handler priority is defaulted to
 169:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          @p CORTEX_MAXIMUM_PRIORITY+1, this reserves the
 170:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          @p CORTEX_MAXIMUM_PRIORITY priority level as fast interrupts
 171:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          priority level.
 172:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 173:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if !defined(CORTEX_PRIORITY_SVCALL)
 174:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define CORTEX_PRIORITY_SVCALL          (CORTEX_MAXIMUM_PRIORITY + 1U)
 175:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #elif !PORT_IRQ_IS_VALID_PRIORITY(CORTEX_PRIORITY_SVCALL)
 176:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /* If it is externally redefined then better perform a validity check on it.*/
 177:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #error "invalid priority level specified for CORTEX_PRIORITY_SVCALL"
 178:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 179:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 180:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 181:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   NVIC PRIGROUP initialization expression.
 182:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @details The default assigns all available priority bits as preemption
 183:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          priority with no sub-priority.
 184:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 185:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if !defined(CORTEX_PRIGROUP_INIT) || defined(__DOXYGEN__)
 186:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define CORTEX_PRIGROUP_INIT            (7 - CORTEX_PRIORITY_BITS)
 187:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 188:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 189:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /*===========================================================================*/
 190:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /* Derived constants and error checks.                                       */
 191:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /*===========================================================================*/
 192:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 193:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if (PORT_SWITCHED_REGIONS_NUMBER < 0) || (PORT_SWITCHED_REGIONS_NUMBER > 4)
 194:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #error "invalid PORT_SWITCHED_REGIONS_NUMBER value"
 195:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 196:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 197:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if !defined(_FROM_ASM_)
 198:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 199:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   MPU guard page size.
 200:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 201:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if (PORT_ENABLE_GUARD_PAGES == TRUE) || defined(__DOXYGEN__)
 202:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #if CH_DBG_ENABLE_STACK_CHECK == FALSE
 203:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     #error "PORT_ENABLE_GUARD_PAGES requires CH_DBG_ENABLE_STACK_CHECK"
 204:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #endif
 205:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #if __MPU_PRESENT == 0
 206:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     #error "MPU not present in current device"
 207:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #endif
 208:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #define PORT_GUARD_PAGE_SIZE          32U
 209:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else
 210:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #define PORT_GUARD_PAGE_SIZE          0U
 211:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 212:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif /* !defined(_FROM_ASM_) */
 213:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 214:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 215:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @name    Architecture and Compiler
 216:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @{
 217:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 218:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if (CORTEX_MODEL == 3) || defined(__DOXYGEN__)
 219:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 220:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #if !defined(CH_CUSTOMER_LIC_PORT_CM3)
 221:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     #error "CH_CUSTOMER_LIC_PORT_CM3 not defined"
 222:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #endif
 223:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 224:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #if CH_CUSTOMER_LIC_PORT_CM3 == FALSE
 225:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     #error "ChibiOS Cortex-M3 port not licensed"
 226:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #endif
 227:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 228:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 229:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Macro defining the specific ARM architecture.
 230:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 231:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_ARCHITECTURE_ARM_v7M
 232:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 233:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 234:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Name of the implemented architecture.
 235:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 236:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_ARCHITECTURE_NAME          "ARMv7-M"
 237:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 238:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 239:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Name of the architecture variant.
 240:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 241:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if (PORT_ENABLE_GUARD_PAGES == FALSE) || defined(__DOXYGEN__)
 242:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #define PORT_CORE_VARIANT_NAME        "Cortex-M3"
 243:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else
 244:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #define PORT_CORE_VARIANT_NAME        "Cortex-M3 (MPU)"
 245:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 246:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 247:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #elif (CORTEX_MODEL == 4)
 248:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 249:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #if !defined(CH_CUSTOMER_LIC_PORT_CM4)
 250:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     #error "CH_CUSTOMER_LIC_PORT_CM4 not defined"
 251:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #endif
 252:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 253:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #if CH_CUSTOMER_LIC_PORT_CM4 == FALSE
 254:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #error "ChibiOS Cortex-M4 port not licensed"
 255:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #endif
 256:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 257:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #define PORT_ARCHITECTURE_ARM_v7ME
 258:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #define PORT_ARCHITECTURE_NAME        "ARMv7E-M"
 259:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #if CORTEX_USE_FPU
 260:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     #if PORT_ENABLE_GUARD_PAGES == FALSE
 261:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****       #define PORT_CORE_VARIANT_NAME    "Cortex-M4F"
 262:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     #else
 263:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****       #define PORT_CORE_VARIANT_NAME    "Cortex-M4F (MPU)"
 264:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     #endif
 265:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #else
 266:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     #if PORT_ENABLE_GUARD_PAGES == FALSE
 267:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****       #define PORT_CORE_VARIANT_NAME    "Cortex-M4"
 268:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     #else
 269:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****       #define PORT_CORE_VARIANT_NAME    "Cortex-M4 (MPU)"
 270:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     #endif
 271:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #endif
 272:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 273:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #elif (CORTEX_MODEL == 7)
 274:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 275:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #if !defined(CH_CUSTOMER_LIC_PORT_CM7)
 276:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     #error "CH_CUSTOMER_LIC_PORT_CM7 not defined"
 277:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #endif
 278:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 279:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #if CH_CUSTOMER_LIC_PORT_CM7 == FALSE
 280:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     #error "ChibiOS Cortex-M7 port not licensed"
 281:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #endif
 282:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 283:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_ARCHITECTURE_ARM_v7ME
 284:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #define PORT_ARCHITECTURE_NAME        "ARMv7E-M"
 285:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #if CORTEX_USE_FPU
 286:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     #if PORT_ENABLE_GUARD_PAGES == FALSE
 287:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****       #define PORT_CORE_VARIANT_NAME    "Cortex-M7F"
 288:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     #else
 289:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****       #define PORT_CORE_VARIANT_NAME    "Cortex-M7F (MPU)"
 290:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     #endif
 291:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #else
 292:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     #if PORT_ENABLE_GUARD_PAGES == FALSE
 293:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****       #define PORT_CORE_VARIANT_NAME    "Cortex-M7"
 294:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     #else
 295:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****       #define PORT_CORE_VARIANT_NAME    "Cortex-M7 (MPU)"
 296:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     #endif
 297:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #endif
 298:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 299:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 300:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 301:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Port-specific information string.
 302:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 303:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if (CORTEX_SIMPLIFIED_PRIORITY == FALSE) || defined(__DOXYGEN__)
 304:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_INFO                       "Advanced kernel mode"
 305:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else
 306:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_INFO                       "Compact kernel mode"
 307:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 308:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /** @} */
 309:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 310:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if (CORTEX_SIMPLIFIED_PRIORITY == FALSE) || defined(__DOXYGEN__)
 311:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 312:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Maximum usable priority for normal ISRs.
 313:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 314:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define CORTEX_MAX_KERNEL_PRIORITY      (CORTEX_PRIORITY_SVCALL + 1U)
 315:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 316:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 317:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   BASEPRI level within kernel lock.
 318:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 319:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define CORTEX_BASEPRI_KERNEL                                               \
 320:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   CORTEX_PRIO_MASK(CORTEX_MAX_KERNEL_PRIORITY)
 321:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else
 322:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 323:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define CORTEX_MAX_KERNEL_PRIORITY      0U
 324:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 325:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 326:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 327:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   PendSV priority level.
 328:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @note    This priority is enforced to be equal to
 329:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          @p CORTEX_MAX_KERNEL_PRIORITY, this handler always have the
 330:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          highest priority that cannot preempt the kernel.
 331:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 332:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define CORTEX_PRIORITY_PENDSV          CORTEX_MAX_KERNEL_PRIORITY
 333:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 334:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /*===========================================================================*/
 335:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /* Module data structures and types.                                         */
 336:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /*===========================================================================*/
 337:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 338:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /* The following code is not processed when the file is included from an
 339:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****    asm module.*/
 340:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if !defined(_FROM_ASM_)
 341:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 342:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /* The documentation of the following declarations is in chconf.h in order
 343:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****    to not have duplicated structure names into the documentation.*/
 344:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if !defined(__DOXYGEN__)
 345:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** struct port_extctx {
 346:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      r0;
 347:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      r1;
 348:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      r2;
 349:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      r3;
 350:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      r12;
 351:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      lr_thd;
 352:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      pc;
 353:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      xpsr;
 354:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if CORTEX_USE_FPU
 355:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s0;
 356:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s1;
 357:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s2;
 358:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s3;
 359:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s4;
 360:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s5;
 361:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s6;
 362:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s7;
 363:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s8;
 364:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s9;
 365:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s10;
 366:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s11;
 367:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s12;
 368:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s13;
 369:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s14;
 370:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s15;
 371:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      fpscr;
 372:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      reserved;
 373:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif /* CORTEX_USE_FPU */
 374:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** };
 375:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 376:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if (PORT_USE_SYSCALL == TRUE) || defined(__DOXYGEN__)
 377:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 378:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Link context structure.
 379:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @details This structure is used when there is the need to save extra
 380:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          context information that is not part of the registers stacked
 381:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          in HW.
 382:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 383:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** struct port_linkctx {
 384:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t              control;
 385:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   struct port_extctx    *ectxp;
 386:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** };
 387:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 388:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 389:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** struct port_intctx {
 390:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if (PORT_SWITCHED_REGIONS_NUMBER > 0) || defined(__DOXYGEN__)
 391:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   struct {
 392:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     uint32_t    rbar;
 393:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     uint32_t    rasr;
 394:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   } regions[PORT_SWITCHED_REGIONS_NUMBER];
 395:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 396:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if CORTEX_USE_FPU
 397:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s16;
 398:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s17;
 399:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s18;
 400:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s19;
 401:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s20;
 402:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s21;
 403:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s22;
 404:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s23;
 405:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s24;
 406:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s25;
 407:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s26;
 408:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s27;
 409:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s28;
 410:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s29;
 411:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s30;
 412:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s31;
 413:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif /* CORTEX_USE_FPU */
 414:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      r4;
 415:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      r5;
 416:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      r6;
 417:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      r7;
 418:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      r8;
 419:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      r9;
 420:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      r10;
 421:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      r11;
 422:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      lr;
 423:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** };
 424:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 425:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** struct port_context {
 426:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   struct port_intctx    *sp;
 427:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if (PORT_USE_SYSCALL == TRUE) || defined(__DOXYGEN__)
 428:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   struct {
 429:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     uint32_t            psp;
 430:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     const void          *p;
 431:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   } syscall;
 432:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 433:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** };
 434:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif /* !defined(__DOXYGEN__) */
 435:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 436:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /*===========================================================================*/
 437:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /* Module macros.                                                            */
 438:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /*===========================================================================*/
 439:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 440:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /* By default threads have no syscall context information.*/
 441:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if (PORT_USE_SYSCALL == TRUE) || defined(__DOXYGEN__)
 442:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define __PORT_SETUP_CONTEXT_SYSCALL(tp, wtop)                              \
 443:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.syscall.psp = (uint32_t)(wtop);                                 \
 444:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.syscall.p   = NULL;
 445:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else
 446:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define __PORT_SETUP_CONTEXT_SYSCALL(tp, wtop)
 447:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 448:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 449:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /* By default threads have all regions disabled.*/
 450:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if (PORT_SWITCHED_REGIONS_NUMBER == 0) || defined(__DOXYGEN__)
 451:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define __PORT_SETUP_CONTEXT_MPU(tp)
 452:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #elif (PORT_SWITCHED_REGIONS_NUMBER == 1) || defined(__DOXYGEN__)
 453:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define __PORT_SETUP_CONTEXT_MPU(tp)                                        \
 454:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp->regions[0].rbar  = 0U;                                      \
 455:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp->regions[0].rasr  = 0U
 456:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #elif (PORT_SWITCHED_REGIONS_NUMBER == 2) || defined(__DOXYGEN__)
 457:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define __PORT_SETUP_CONTEXT_MPU(tp)                                        \
 458:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp->regions[0].rbar  = 0U;                                      \
 459:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp->regions[0].rasr  = 0U;                                      \
 460:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp->regions[1].rbar  = 0U;                                      \
 461:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp->regions[1].rasr  = 0U
 462:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #elif (PORT_SWITCHED_REGIONS_NUMBER == 3) || defined(__DOXYGEN__)
 463:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define __PORT_SETUP_CONTEXT_MPU(tp)                                        \
 464:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp->regions[0].rbar  = 0U;                                      \
 465:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp->regions[0].rasr  = 0U;                                      \
 466:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp->regions[1].rbar  = 0U;                                      \
 467:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp->regions[1].rasr  = 0U;                                      \
 468:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp->regions[2].rbar  = 0U;                                      \
 469:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp->regions[2].rasr  = 0U
 470:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #elif (PORT_SWITCHED_REGIONS_NUMBER == 4) || defined(__DOXYGEN__)
 471:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define __PORT_SETUP_CONTEXT_MPU(tp)                                        \
 472:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp->regions[0].rbar  = 0U;                                      \
 473:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp->regions[0].rasr  = 0U;                                      \
 474:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp->regions[1].rbar  = 0U;                                      \
 475:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp->regions[1].rasr  = 0U;                                      \
 476:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp->regions[2].rbar  = 0U;                                      \
 477:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp->regions[2].rasr  = 0U;                                      \
 478:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp->regions[3].rbar  = 0U;                                      \
 479:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp->regions[3].rasr  = 0U
 480:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else
 481:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 482:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 483:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 484:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Platform dependent part of the @p chThdCreateI() API.
 485:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @details This code usually setup the context switching frame represented
 486:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          by an @p port_intctx structure.
 487:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 488:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_SETUP_CONTEXT(tp, wbase, wtop, pf, arg) {                      \
 489:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp = (struct port_intctx *)((uint8_t *)(wtop) -                 \
 490:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****                                         sizeof (struct port_intctx));       \
 491:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp->r4 = (uint32_t)(pf);                                        \
 492:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp->r5 = (uint32_t)(arg);                                       \
 493:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp->lr = (uint32_t)_port_thread_start;                          \
 494:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   __PORT_SETUP_CONTEXT_MPU(tp);                                             \
 495:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   __PORT_SETUP_CONTEXT_SYSCALL(tp, wtop);                                   \
 496:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** }
 497:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 498:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** //  __PORT_SETUP_CONTEXT_MPU(tp)
 499:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 500:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 501:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Computes the thread working area global size.
 502:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @note    There is no need to perform alignments in this macro.
 503:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 504:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_WA_SIZE(n) ((size_t)PORT_GUARD_PAGE_SIZE +                     \
 505:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****                          sizeof (struct port_intctx) +                      \
 506:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****                          sizeof (struct port_extctx) +                      \
 507:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****                          (size_t)(n) +                                      \
 508:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****                          (size_t)PORT_INT_REQUIRED_STACK)
 509:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 510:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 511:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Static working area allocation.
 512:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @details This macro is used to allocate a static thread working area
 513:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          aligned as both position and size.
 514:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *
 515:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @param[in] s         the name to be assigned to the stack array
 516:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @param[in] n         the stack size to be assigned to the thread
 517:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 518:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if (PORT_ENABLE_GUARD_PAGES == FALSE) || defined(__DOXYGEN__)
 519:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_WORKING_AREA(s, n)                                             \
 520:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   stkalign_t s[THD_WORKING_AREA_SIZE(n) / sizeof (stkalign_t)]
 521:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else
 522:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_WORKING_AREA(s, n)                                             \
 523:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   ALIGNED_VAR(32) stkalign_t s[THD_WORKING_AREA_SIZE(n) / sizeof (stkalign_t)]
 524:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 525:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 526:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 527:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   IRQ prologue code.
 528:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @details This macro must be inserted at the start of all IRQ handlers
 529:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          enabled to invoke system APIs.
 530:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 531:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_IRQ_PROLOGUE()
 532:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 533:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 534:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   IRQ epilogue code.
 535:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @details This macro must be inserted at the end of all IRQ handlers
 536:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          enabled to invoke system APIs.
 537:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 538:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_IRQ_EPILOGUE() _port_irq_epilogue()
 539:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 540:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 541:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   IRQ handler function declaration.
 542:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @note    @p id can be a function name or a vector number depending on the
 543:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          port implementation.
 544:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 545:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #ifdef __cplusplus
 546:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_IRQ_HANDLER(id) extern "C" void id(void)
 547:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else
 548:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_IRQ_HANDLER(id) void id(void)
 549:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 550:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 551:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 552:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Fast IRQ handler function declaration.
 553:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @note    @p id can be a function name or a vector number depending on the
 554:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          port implementation.
 555:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 556:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #ifdef __cplusplus
 557:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_FAST_IRQ_HANDLER(id) extern "C" void id(void)
 558:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else
 559:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_FAST_IRQ_HANDLER(id) void id(void)
 560:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 561:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 562:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 563:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Performs a context switch between two threads.
 564:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @details This is the most critical code in any port, this function
 565:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          is responsible for the context switch between 2 threads.
 566:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @note    The implementation of this code affects <b>directly</b> the context
 567:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          switch performance so optimize here as much as you can.
 568:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *
 569:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @param[in] ntp       the thread to be switched in
 570:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @param[in] otp       the thread to be switched out
 571:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 572:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if (CH_DBG_ENABLE_STACK_CHECK == FALSE) || defined(__DOXYGEN__)
 573:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define port_switch(ntp, otp) _port_switch(ntp, otp)
 574:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else
 575:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if PORT_ENABLE_GUARD_PAGES == FALSE
 576:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define port_switch(ntp, otp) {                                             \
 577:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   struct port_intctx *r13 = (struct port_intctx *)__get_PSP();              \
 578:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   if ((stkalign_t *)(r13 - 1) < (otp)->wabase) {                            \
 579:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     chSysHalt("stack overflow");                                            \
 580:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   }                                                                         \
 581:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   _port_switch(ntp, otp);                                                   \
 582:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** }
 583:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else
 584:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define port_switch(ntp, otp) {                                             \
 585:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   _port_switch(ntp, otp);                                                   \
 586:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****                                                                             \
 587:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   /* Setting up the guard page for the switched-in thread.*/                \
 588:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   mpuSetRegionAddress(PORT_USE_GUARD_MPU_REGION,                            \
 589:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****                       chThdGetSelfX()->wabase);                             \
 590:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** }
 591:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 592:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 593:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 594:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /*===========================================================================*/
 595:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /* External declarations.                                                    */
 596:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /*===========================================================================*/
 597:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 598:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #ifdef __cplusplus
 599:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** extern "C" {
 600:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 601:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   void port_init(void);
 602:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   void _port_irq_epilogue(void);
 603:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   void _port_switch(thread_t *ntp, thread_t *otp);
 604:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   void _port_thread_start(void);
 605:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   void _port_switch_from_isr(void);
 606:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   void _port_exit_from_isr(void);
 607:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if PORT_USE_SYSCALL == TRUE
 608:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   void port_unprivileged_jump(uint32_t pc, uint32_t psp);
 609:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 610:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #ifdef __cplusplus
 611:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** }
 612:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 613:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 614:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /*===========================================================================*/
 615:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /* Module inline functions.                                                  */
 616:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /*===========================================================================*/
 617:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 618:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 619:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Returns a word encoding the current interrupts status.
 620:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *
 621:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @return              The interrupts status.
 622:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 623:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** __STATIC_FORCEINLINE syssts_t port_get_irq_status(void) {
 624:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   syssts_t sts;
 625:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 626:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if CORTEX_SIMPLIFIED_PRIORITY == FALSE
 627:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   sts = (syssts_t)__get_BASEPRI();
 628:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else /* CORTEX_SIMPLIFIED_PRIORITY */
 629:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   sts = (syssts_t)__get_PRIMASK();
 630:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif /* CORTEX_SIMPLIFIED_PRIORITY */
 631:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   return sts;
 632:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** }
 633:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 634:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 635:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Checks the interrupt status.
 636:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *
 637:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @param[in] sts       the interrupt status word
 638:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *
 639:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @return              The interrupt status.
 640:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @retval false        the word specified a disabled interrupts status.
 641:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @retval true         the word specified an enabled interrupts status.
 642:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 643:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** __STATIC_FORCEINLINE bool port_irq_enabled(syssts_t sts) {
 644:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 645:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if CORTEX_SIMPLIFIED_PRIORITY == FALSE
 646:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   return sts == (syssts_t)CORTEX_BASEPRI_DISABLED;
 647:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else /* CORTEX_SIMPLIFIED_PRIORITY */
 648:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   return (sts & (syssts_t)1) == (syssts_t)0;
 649:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif /* CORTEX_SIMPLIFIED_PRIORITY */
 650:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** }
 651:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 652:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 653:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Determines the current execution context.
 654:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *
 655:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @return              The execution context.
 656:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @retval false        not running in ISR mode.
 657:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @retval true         running in ISR mode.
 658:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 659:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** __STATIC_FORCEINLINE bool port_is_isr_context(void) {
 660:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 661:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   return (bool)((__get_IPSR() & 0x1FFU) != 0U);
 662:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** }
 663:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 664:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 665:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Kernel-lock action.
 666:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @details In this port this function raises the base priority to kernel
 667:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          level.
 668:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 669:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** __STATIC_FORCEINLINE void port_lock(void) {
 172              		.loc 4 669 27 view .LVU43
 670:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 671:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if CORTEX_SIMPLIFIED_PRIORITY == FALSE
 672:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if defined(__CM7_REV)
 673:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if __CM7_REV <= 1
 674:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   __disable_irq();
 675:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 676:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 677:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   __set_BASEPRI(CORTEX_BASEPRI_KERNEL);
 173              		.loc 4 677 3 view .LVU44
 174              	.LBB290:
 175              	.LBI290:
 176              		.file 5 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h"
   1:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**************************************************************************//**
   2:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  * @file     cmsis_gcc.h
   3:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  * @brief    CMSIS compiler GCC header file
   4:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  * @version  V5.0.4
   5:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  * @date     09. April 2018
   6:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  ******************************************************************************/
   7:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /*
   8:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  * Copyright (c) 2009-2018 Arm Limited. All rights reserved.
   9:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  *
  10:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  * SPDX-License-Identifier: Apache-2.0
  11:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  *
  12:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  * Licensed under the Apache License, Version 2.0 (the License); you may
  13:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  * not use this file except in compliance with the License.
  14:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  * You may obtain a copy of the License at
  15:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  *
  16:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  * www.apache.org/licenses/LICENSE-2.0
  17:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  *
  18:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  * Unless required by applicable law or agreed to in writing, software
  19:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  * distributed under the License is distributed on an AS IS BASIS, WITHOUT
  20:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  21:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  * See the License for the specific language governing permissions and
  22:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  * limitations under the License.
  23:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
  24:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
  25:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #ifndef __CMSIS_GCC_H
  26:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #define __CMSIS_GCC_H
  27:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
  28:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /* ignore some GCC warnings */
  29:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #pragma GCC diagnostic push
  30:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #pragma GCC diagnostic ignored "-Wsign-conversion"
  31:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #pragma GCC diagnostic ignored "-Wconversion"
  32:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #pragma GCC diagnostic ignored "-Wunused-parameter"
  33:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
  34:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /* Fallback for __has_builtin */
  35:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #ifndef __has_builtin
  36:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #define __has_builtin(x) (0)
  37:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
  38:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
  39:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /* CMSIS compiler specific defines */
  40:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #ifndef   __ASM
  41:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #define __ASM                                  __asm
  42:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
  43:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #ifndef   __INLINE
  44:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #define __INLINE                               inline
  45:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
  46:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #ifndef   __STATIC_INLINE
  47:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #define __STATIC_INLINE                        static inline
  48:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
  49:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #ifndef   __STATIC_FORCEINLINE                 
  50:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #define __STATIC_FORCEINLINE                   __attribute__((always_inline)) static inline
  51:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif                                           
  52:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #ifndef   __NO_RETURN
  53:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #define __NO_RETURN                            __attribute__((__noreturn__))
  54:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
  55:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #ifndef   __USED
  56:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #define __USED                                 __attribute__((used))
  57:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
  58:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #ifndef   __WEAK
  59:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #define __WEAK                                 __attribute__((weak))
  60:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
  61:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #ifndef   __PACKED
  62:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #define __PACKED                               __attribute__((packed, aligned(1)))
  63:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
  64:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #ifndef   __PACKED_STRUCT
  65:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #define __PACKED_STRUCT                        struct __attribute__((packed, aligned(1)))
  66:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
  67:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #ifndef   __PACKED_UNION
  68:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #define __PACKED_UNION                         union __attribute__((packed, aligned(1)))
  69:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
  70:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT32        /* deprecated */
  71:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #pragma GCC diagnostic push
  72:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  73:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  74:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   struct __attribute__((packed)) T_UINT32 { uint32_t v; };
  75:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #pragma GCC diagnostic pop
  76:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #define __UNALIGNED_UINT32(x)                  (((struct T_UINT32 *)(x))->v)
  77:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
  78:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT16_WRITE
  79:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #pragma GCC diagnostic push
  80:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  81:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  82:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __PACKED_STRUCT T_UINT16_WRITE { uint16_t v; };
  83:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #pragma GCC diagnostic pop
  84:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #define __UNALIGNED_UINT16_WRITE(addr, val)    (void)((((struct T_UINT16_WRITE *)(void *)(addr))-
  85:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
  86:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT16_READ
  87:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #pragma GCC diagnostic push
  88:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  89:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  90:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __PACKED_STRUCT T_UINT16_READ { uint16_t v; };
  91:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #pragma GCC diagnostic pop
  92:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #define __UNALIGNED_UINT16_READ(addr)          (((const struct T_UINT16_READ *)(const void *)(add
  93:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
  94:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT32_WRITE
  95:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #pragma GCC diagnostic push
  96:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  97:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  98:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __PACKED_STRUCT T_UINT32_WRITE { uint32_t v; };
  99:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #pragma GCC diagnostic pop
 100:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #define __UNALIGNED_UINT32_WRITE(addr, val)    (void)((((struct T_UINT32_WRITE *)(void *)(addr))-
 101:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
 102:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT32_READ
 103:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #pragma GCC diagnostic push
 104:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
 105:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
 106:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __PACKED_STRUCT T_UINT32_READ { uint32_t v; };
 107:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #pragma GCC diagnostic pop
 108:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #define __UNALIGNED_UINT32_READ(addr)          (((const struct T_UINT32_READ *)(const void *)(add
 109:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
 110:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #ifndef   __ALIGNED
 111:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #define __ALIGNED(x)                           __attribute__((aligned(x)))
 112:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
 113:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #ifndef   __RESTRICT
 114:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #define __RESTRICT                             __restrict
 115:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
 116:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 117:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 118:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /* ###########################  Core Function Access  ########################### */
 119:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /** \ingroup  CMSIS_Core_FunctionInterface
 120:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****     \defgroup CMSIS_Core_RegAccFunctions CMSIS Core Register Access Functions
 121:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   @{
 122:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 123:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 124:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 125:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Enable IRQ Interrupts
 126:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Enables IRQ interrupts by clearing the I-bit in the CPSR.
 127:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****            Can only be executed in Privileged modes.
 128:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 129:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __enable_irq(void)
 130:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 131:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("cpsie i" : : : "memory");
 132:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 133:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 134:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 135:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 136:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Disable IRQ Interrupts
 137:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Disables IRQ interrupts by setting the I-bit in the CPSR.
 138:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****            Can only be executed in Privileged modes.
 139:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 140:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __disable_irq(void)
 141:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 142:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("cpsid i" : : : "memory");
 143:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 144:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 145:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 146:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 147:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Get Control Register
 148:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Returns the content of the Control Register.
 149:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \return               Control Register value
 150:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 151:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __get_CONTROL(void)
 152:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 153:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   uint32_t result;
 154:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 155:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MRS %0, control" : "=r" (result) );
 156:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   return(result);
 157:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 158:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 159:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 160:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #if (defined (__ARM_FEATURE_CMSE ) && (__ARM_FEATURE_CMSE == 3))
 161:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 162:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Get Control Register (non-secure)
 163:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Returns the content of the non-secure Control Register when in secure mode.
 164:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \return               non-secure Control Register value
 165:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 166:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __TZ_get_CONTROL_NS(void)
 167:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 168:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   uint32_t result;
 169:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 170:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MRS %0, control_ns" : "=r" (result) );
 171:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   return(result);
 172:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 173:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
 174:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 175:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 176:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 177:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Set Control Register
 178:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Writes the given value to the Control Register.
 179:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \param [in]    control  Control Register value to set
 180:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 181:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __set_CONTROL(uint32_t control)
 182:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 183:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MSR control, %0" : : "r" (control) : "memory");
 184:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 185:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 186:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 187:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #if (defined (__ARM_FEATURE_CMSE ) && (__ARM_FEATURE_CMSE == 3))
 188:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 189:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Set Control Register (non-secure)
 190:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Writes the given value to the non-secure Control Register when in secure state.
 191:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \param [in]    control  Control Register value to set
 192:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 193:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __TZ_set_CONTROL_NS(uint32_t control)
 194:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 195:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MSR control_ns, %0" : : "r" (control) : "memory");
 196:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 197:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
 198:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 199:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 200:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 201:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Get IPSR Register
 202:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Returns the content of the IPSR Register.
 203:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \return               IPSR Register value
 204:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 205:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __get_IPSR(void)
 206:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 207:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   uint32_t result;
 208:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 209:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MRS %0, ipsr" : "=r" (result) );
 210:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   return(result);
 211:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 212:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 213:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 214:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 215:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Get APSR Register
 216:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Returns the content of the APSR Register.
 217:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \return               APSR Register value
 218:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 219:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __get_APSR(void)
 220:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 221:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   uint32_t result;
 222:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 223:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MRS %0, apsr" : "=r" (result) );
 224:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   return(result);
 225:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 226:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 227:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 228:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 229:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Get xPSR Register
 230:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Returns the content of the xPSR Register.
 231:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \return               xPSR Register value
 232:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 233:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __get_xPSR(void)
 234:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 235:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   uint32_t result;
 236:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 237:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MRS %0, xpsr" : "=r" (result) );
 238:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   return(result);
 239:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 240:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 241:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 242:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 243:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Get Process Stack Pointer
 244:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Returns the current value of the Process Stack Pointer (PSP).
 245:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \return               PSP Register value
 246:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 247:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __get_PSP(void)
 248:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 249:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   uint32_t result;
 250:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 251:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MRS %0, psp"  : "=r" (result) );
 252:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   return(result);
 253:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 254:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 255:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 256:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #if (defined (__ARM_FEATURE_CMSE ) && (__ARM_FEATURE_CMSE == 3))
 257:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 258:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Get Process Stack Pointer (non-secure)
 259:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Returns the current value of the non-secure Process Stack Pointer (PSP) when in secure s
 260:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \return               PSP Register value
 261:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 262:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __TZ_get_PSP_NS(void)
 263:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 264:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   uint32_t result;
 265:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 266:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MRS %0, psp_ns"  : "=r" (result) );
 267:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   return(result);
 268:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 269:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
 270:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 271:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 272:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 273:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Set Process Stack Pointer
 274:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Assigns the given value to the Process Stack Pointer (PSP).
 275:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \param [in]    topOfProcStack  Process Stack Pointer value to set
 276:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 277:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __set_PSP(uint32_t topOfProcStack)
 278:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 279:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MSR psp, %0" : : "r" (topOfProcStack) : );
 280:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 281:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 282:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 283:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #if (defined (__ARM_FEATURE_CMSE ) && (__ARM_FEATURE_CMSE == 3))
 284:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 285:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Set Process Stack Pointer (non-secure)
 286:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Assigns the given value to the non-secure Process Stack Pointer (PSP) when in secure sta
 287:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \param [in]    topOfProcStack  Process Stack Pointer value to set
 288:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 289:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __TZ_set_PSP_NS(uint32_t topOfProcStack)
 290:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 291:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MSR psp_ns, %0" : : "r" (topOfProcStack) : );
 292:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 293:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
 294:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 295:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 296:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 297:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Get Main Stack Pointer
 298:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Returns the current value of the Main Stack Pointer (MSP).
 299:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \return               MSP Register value
 300:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 301:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __get_MSP(void)
 302:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 303:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   uint32_t result;
 304:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 305:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MRS %0, msp" : "=r" (result) );
 306:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   return(result);
 307:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 308:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 309:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 310:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #if (defined (__ARM_FEATURE_CMSE ) && (__ARM_FEATURE_CMSE == 3))
 311:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 312:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Get Main Stack Pointer (non-secure)
 313:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Returns the current value of the non-secure Main Stack Pointer (MSP) when in secure stat
 314:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \return               MSP Register value
 315:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 316:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __TZ_get_MSP_NS(void)
 317:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 318:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   uint32_t result;
 319:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 320:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MRS %0, msp_ns" : "=r" (result) );
 321:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   return(result);
 322:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 323:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
 324:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 325:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 326:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 327:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Set Main Stack Pointer
 328:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Assigns the given value to the Main Stack Pointer (MSP).
 329:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \param [in]    topOfMainStack  Main Stack Pointer value to set
 330:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 331:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __set_MSP(uint32_t topOfMainStack)
 332:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 333:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MSR msp, %0" : : "r" (topOfMainStack) : );
 334:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 335:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 336:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 337:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #if (defined (__ARM_FEATURE_CMSE ) && (__ARM_FEATURE_CMSE == 3))
 338:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 339:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Set Main Stack Pointer (non-secure)
 340:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Assigns the given value to the non-secure Main Stack Pointer (MSP) when in secure state.
 341:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \param [in]    topOfMainStack  Main Stack Pointer value to set
 342:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 343:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __TZ_set_MSP_NS(uint32_t topOfMainStack)
 344:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 345:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MSR msp_ns, %0" : : "r" (topOfMainStack) : );
 346:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 347:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
 348:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 349:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 350:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #if (defined (__ARM_FEATURE_CMSE ) && (__ARM_FEATURE_CMSE == 3))
 351:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 352:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Get Stack Pointer (non-secure)
 353:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Returns the current value of the non-secure Stack Pointer (SP) when in secure state.
 354:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \return               SP Register value
 355:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 356:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __TZ_get_SP_NS(void)
 357:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 358:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   uint32_t result;
 359:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 360:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MRS %0, sp_ns" : "=r" (result) );
 361:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   return(result);
 362:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 363:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 364:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 365:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 366:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Set Stack Pointer (non-secure)
 367:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Assigns the given value to the non-secure Stack Pointer (SP) when in secure state.
 368:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \param [in]    topOfStack  Stack Pointer value to set
 369:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 370:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __TZ_set_SP_NS(uint32_t topOfStack)
 371:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 372:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MSR sp_ns, %0" : : "r" (topOfStack) : );
 373:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 374:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
 375:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 376:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 377:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 378:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Get Priority Mask
 379:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Returns the current state of the priority mask bit from the Priority Mask Register.
 380:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \return               Priority Mask value
 381:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 382:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __get_PRIMASK(void)
 383:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 384:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   uint32_t result;
 385:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 386:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MRS %0, primask" : "=r" (result) :: "memory");
 387:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   return(result);
 388:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 389:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 390:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 391:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #if (defined (__ARM_FEATURE_CMSE ) && (__ARM_FEATURE_CMSE == 3))
 392:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 393:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Get Priority Mask (non-secure)
 394:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Returns the current state of the non-secure priority mask bit from the Priority Mask Reg
 395:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \return               Priority Mask value
 396:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 397:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __TZ_get_PRIMASK_NS(void)
 398:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 399:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   uint32_t result;
 400:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 401:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MRS %0, primask_ns" : "=r" (result) :: "memory");
 402:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   return(result);
 403:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 404:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
 405:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 406:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 407:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 408:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Set Priority Mask
 409:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Assigns the given value to the Priority Mask Register.
 410:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \param [in]    priMask  Priority Mask
 411:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 412:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __set_PRIMASK(uint32_t priMask)
 413:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 414:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MSR primask, %0" : : "r" (priMask) : "memory");
 415:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 416:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 417:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 418:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #if (defined (__ARM_FEATURE_CMSE ) && (__ARM_FEATURE_CMSE == 3))
 419:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 420:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Set Priority Mask (non-secure)
 421:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Assigns the given value to the non-secure Priority Mask Register when in secure state.
 422:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \param [in]    priMask  Priority Mask
 423:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 424:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __TZ_set_PRIMASK_NS(uint32_t priMask)
 425:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 426:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MSR primask_ns, %0" : : "r" (priMask) : "memory");
 427:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 428:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
 429:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 430:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 431:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #if ((defined (__ARM_ARCH_7M__      ) && (__ARM_ARCH_7M__      == 1)) || \
 432:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****      (defined (__ARM_ARCH_7EM__     ) && (__ARM_ARCH_7EM__     == 1)) || \
 433:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****      (defined (__ARM_ARCH_8M_MAIN__ ) && (__ARM_ARCH_8M_MAIN__ == 1))    )
 434:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 435:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Enable FIQ
 436:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Enables FIQ interrupts by clearing the F-bit in the CPSR.
 437:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****            Can only be executed in Privileged modes.
 438:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 439:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __enable_fault_irq(void)
 440:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 441:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("cpsie f" : : : "memory");
 442:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 443:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 444:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 445:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 446:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Disable FIQ
 447:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Disables FIQ interrupts by setting the F-bit in the CPSR.
 448:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****            Can only be executed in Privileged modes.
 449:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 450:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __disable_fault_irq(void)
 451:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 452:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("cpsid f" : : : "memory");
 453:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 454:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 455:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 456:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 457:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Get Base Priority
 458:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Returns the current value of the Base Priority register.
 459:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \return               Base Priority register value
 460:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 461:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __get_BASEPRI(void)
 462:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 463:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   uint32_t result;
 464:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 465:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MRS %0, basepri" : "=r" (result) );
 466:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   return(result);
 467:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 468:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 469:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 470:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #if (defined (__ARM_FEATURE_CMSE ) && (__ARM_FEATURE_CMSE == 3))
 471:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 472:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Get Base Priority (non-secure)
 473:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Returns the current value of the non-secure Base Priority register when in secure state.
 474:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \return               Base Priority register value
 475:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 476:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __TZ_get_BASEPRI_NS(void)
 477:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 478:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   uint32_t result;
 479:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 480:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MRS %0, basepri_ns" : "=r" (result) );
 481:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   return(result);
 482:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 483:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
 484:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 485:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 486:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 487:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Set Base Priority
 488:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Assigns the given value to the Base Priority register.
 489:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \param [in]    basePri  Base Priority value to set
 490:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __set_BASEPRI(uint32_t basePri)
 177              		.loc 5 491 27 view .LVU45
 178              	.LBB291:
 492:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 493:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MSR basepri, %0" : : "r" (basePri) : "memory");
 179              		.loc 5 493 3 view .LVU46
 180              	.LBE291:
 181              	.LBE290:
 182              	.LBE289:
 183              	.LBE288:
 184              	.LBE287:
 303:lib/chibios/os/hal/src/hal_usb.c ****   unsigned i;
 185              		.loc 1 303 57 is_stmt 0 view .LVU47
 186 0000 10B5     		push	{r4, lr}
 187              		.cfi_def_cfa_offset 8
 188              		.cfi_offset 4, -8
 189              		.cfi_offset 14, -4
 190              	.LBB300:
 191              	.LBB298:
 192              	.LBB296:
 193              	.LBB294:
 194              	.LBB292:
 195              		.loc 5 493 3 view .LVU48
 196 0002 2022     		movs	r2, #32
 197              	.LBE292:
 198              	.LBE294:
 199              	.LBE296:
 200              	.LBE298:
 201              	.LBE300:
 303:lib/chibios/os/hal/src/hal_usb.c ****   unsigned i;
 202              		.loc 1 303 57 view .LVU49
 203 0004 0446     		mov	r4, r0
 204              	.LBB301:
 205              	.LBB299:
 206              	.LBB297:
 207              	.LBB295:
 208              	.LBB293:
 209              		.loc 5 493 3 view .LVU50
 210              		.syntax unified
 211              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 212 0006 82F31188 		MSR basepri, r2
 213              	@ 0 "" 2
 214              	.LVL8:
 215              		.loc 5 493 3 view .LVU51
 216              		.thumb
 217              		.syntax unified
 218              	.LBE293:
 219              	.LBE295:
 220              	.LBE297:
 358:./lib/chibios/os/rt/include/chsys.h ****   _stats_start_measure_crit_thd();
 221              		.loc 3 358 34 is_stmt 1 view .LVU52
 359:./lib/chibios/os/rt/include/chsys.h ****   _dbg_check_lock();
 222              		.loc 3 359 20 view .LVU53
 223              	.LBE299:
 224              	.LBE301:
 309:lib/chibios/os/hal/src/hal_usb.c ****   osalDbgAssert((usbp->state == USB_STOP) || (usbp->state == USB_READY),
 225              		.loc 1 309 3 view .LVU54
 226              		.loc 1 309 3 view .LVU55
 227              		.loc 1 309 3 view .LVU56
 310:lib/chibios/os/hal/src/hal_usb.c ****                 "invalid state");
 311:lib/chibios/os/hal/src/hal_usb.c ****   usbp->config = config;
 228              		.loc 1 311 3 view .LVU57
 229              		.loc 1 311 16 is_stmt 0 view .LVU58
 230 000a 4160     		str	r1, [r0, #4]
 312:lib/chibios/os/hal/src/hal_usb.c ****   for (i = 0; i <= (unsigned)USB_MAX_ENDPOINTS; i++) {
 231              		.loc 1 312 3 is_stmt 1 view .LVU59
 232              	.LVL9:
 233              		.loc 1 312 17 view .LVU60
 313:lib/chibios/os/hal/src/hal_usb.c ****     usbp->epc[i] = NULL;
 234              		.loc 1 313 18 is_stmt 0 view .LVU61
 235 000c 0021     		movs	r1, #0
 236              	.LVL10:
 237              		.loc 1 313 18 view .LVU62
 238 000e 0C30     		adds	r0, r0, #12
 239              	.LVL11:
 240              		.loc 1 313 18 view .LVU63
 241 0010 FFF7FEFF 		bl	memset
 242              	.LVL12:
 314:lib/chibios/os/hal/src/hal_usb.c ****   }
 315:lib/chibios/os/hal/src/hal_usb.c ****   usb_lld_start(usbp);
 243              		.loc 1 315 3 is_stmt 1 view .LVU64
 244 0014 2046     		mov	r0, r4
 245 0016 FFF7FEFF 		bl	usb_lld_start
 246              	.LVL13:
 316:lib/chibios/os/hal/src/hal_usb.c ****   usbp->state = USB_READY;
 247              		.loc 1 316 3 view .LVU65
 248              		.loc 1 316 15 is_stmt 0 view .LVU66
 249 001a 0223     		movs	r3, #2
 250 001c 2370     		strb	r3, [r4]
 317:lib/chibios/os/hal/src/hal_usb.c ****   osalSysUnlock();
 251              		.loc 1 317 3 is_stmt 1 view .LVU67
 252              	.LBB302:
 253              	.LBI302:
 576:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 577:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 578:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 579:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Leaves a critical zone from thread context.
 580:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    This function cannot be used for reentrant critical zones.
 581:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 582:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @special
 583:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 584:./lib/chibios/os/hal/osal/rt-nil/osal.h **** static inline void osalSysUnlock(void) {
 254              		.loc 2 584 20 view .LVU68
 585:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 586:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   chSysUnlock();
 255              		.loc 2 586 3 view .LVU69
 256              	.LBB303:
 257              	.LBI303:
 360:./lib/chibios/os/rt/include/chsys.h **** }
 361:./lib/chibios/os/rt/include/chsys.h **** 
 362:./lib/chibios/os/rt/include/chsys.h **** /**
 363:./lib/chibios/os/rt/include/chsys.h ****  * @brief   Leaves the kernel lock state.
 364:./lib/chibios/os/rt/include/chsys.h ****  *
 365:./lib/chibios/os/rt/include/chsys.h ****  * @special
 366:./lib/chibios/os/rt/include/chsys.h ****  */
 367:./lib/chibios/os/rt/include/chsys.h **** static inline void chSysUnlock(void) {
 258              		.loc 3 367 20 view .LVU70
 259              	.LBB304:
 368:./lib/chibios/os/rt/include/chsys.h **** 
 369:./lib/chibios/os/rt/include/chsys.h ****   _dbg_check_unlock();
 260              		.loc 3 369 22 view .LVU71
 370:./lib/chibios/os/rt/include/chsys.h ****   _stats_stop_measure_crit_thd();
 261              		.loc 3 370 33 view .LVU72
 371:./lib/chibios/os/rt/include/chsys.h **** 
 372:./lib/chibios/os/rt/include/chsys.h ****   /* The following condition can be triggered by the use of i-class functions
 373:./lib/chibios/os/rt/include/chsys.h ****      in a critical section not followed by a chSchRescheduleS(), this means
 374:./lib/chibios/os/rt/include/chsys.h ****      that the current thread has a lower priority than the next thread in
 375:./lib/chibios/os/rt/include/chsys.h ****      the ready list.*/
 376:./lib/chibios/os/rt/include/chsys.h ****   chDbgAssert((ch.rlist.pqueue.next == &ch.rlist.pqueue) ||
 262              		.loc 3 376 3 view .LVU73
 263              		.loc 3 376 3 view .LVU74
 264              		.loc 3 376 3 view .LVU75
 377:./lib/chibios/os/rt/include/chsys.h ****               (ch.rlist.current->hdr.pqueue.prio >= ch.rlist.pqueue.next->prio),
 378:./lib/chibios/os/rt/include/chsys.h ****               "priority order violation");
 379:./lib/chibios/os/rt/include/chsys.h **** 
 380:./lib/chibios/os/rt/include/chsys.h ****   port_unlock();
 265              		.loc 3 380 3 view .LVU76
 266              	.LBB305:
 267              	.LBI305:
 678:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if defined(__CM7_REV)
 679:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if __CM7_REV <= 1
 680:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   __enable_irq();
 681:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 682:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 683:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else /* CORTEX_SIMPLIFIED_PRIORITY */
 684:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   __disable_irq();
 685:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif /* CORTEX_SIMPLIFIED_PRIORITY */
 686:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** }
 687:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 688:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 689:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Kernel-unlock action.
 690:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @details In this port this function lowers the base priority to user
 691:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          level.
 692:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 693:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** __STATIC_FORCEINLINE void port_unlock(void) {
 268              		.loc 4 693 27 view .LVU77
 694:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 695:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if CORTEX_SIMPLIFIED_PRIORITY == FALSE
 696:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   __set_BASEPRI(CORTEX_BASEPRI_DISABLED);
 269              		.loc 4 696 3 view .LVU78
 270              	.LVL14:
 271              	.LBB306:
 272              	.LBI306:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 273              		.loc 5 491 27 view .LVU79
 274              	.LBB307:
 275              		.loc 5 493 3 view .LVU80
 276 001e 0023     		movs	r3, #0
 277              		.syntax unified
 278              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 279 0020 83F31188 		MSR basepri, r3
 280              	@ 0 "" 2
 281              	.LVL15:
 282              		.loc 5 493 3 is_stmt 0 view .LVU81
 283              		.thumb
 284              		.syntax unified
 285              	.LBE307:
 286              	.LBE306:
 287              	.LBE305:
 288              	.LBE304:
 289              	.LBE303:
 290              	.LBE302:
 318:lib/chibios/os/hal/src/hal_usb.c **** }
 291              		.loc 1 318 1 view .LVU82
 292 0024 10BD     		pop	{r4, pc}
 293              		.loc 1 318 1 view .LVU83
 294              		.cfi_endproc
 295              	.LFE333:
 297              		.section	.text.usbStop,"ax",%progbits
 298              		.align	1
 299              		.global	usbStop
 300              		.syntax unified
 301              		.thumb
 302              		.thumb_func
 303              		.fpu fpv4-sp-d16
 305              	usbStop:
 306              	.LVL16:
 307              	.LFB334:
 319:lib/chibios/os/hal/src/hal_usb.c **** 
 320:lib/chibios/os/hal/src/hal_usb.c **** /**
 321:lib/chibios/os/hal/src/hal_usb.c ****  * @brief   Deactivates the USB peripheral.
 322:lib/chibios/os/hal/src/hal_usb.c ****  *
 323:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] usbp      pointer to the @p USBDriver object
 324:lib/chibios/os/hal/src/hal_usb.c ****  *
 325:lib/chibios/os/hal/src/hal_usb.c ****  * @api
 326:lib/chibios/os/hal/src/hal_usb.c ****  */
 327:lib/chibios/os/hal/src/hal_usb.c **** void usbStop(USBDriver *usbp) {
 308              		.loc 1 327 31 is_stmt 1 view -0
 309              		.cfi_startproc
 310              		@ args = 0, pretend = 0, frame = 0
 311              		@ frame_needed = 0, uses_anonymous_args = 0
 328:lib/chibios/os/hal/src/hal_usb.c ****   unsigned i;
 312              		.loc 1 328 3 view .LVU85
 329:lib/chibios/os/hal/src/hal_usb.c **** 
 330:lib/chibios/os/hal/src/hal_usb.c ****   osalDbgCheck(usbp != NULL);
 313              		.loc 1 330 3 view .LVU86
 314              		.loc 1 330 3 view .LVU87
 315              		.loc 1 330 3 view .LVU88
 331:lib/chibios/os/hal/src/hal_usb.c **** 
 332:lib/chibios/os/hal/src/hal_usb.c ****   osalSysLock();
 316              		.loc 1 332 3 view .LVU89
 317              	.LBB308:
 318              	.LBI308:
 573:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 319              		.loc 2 573 20 view .LVU90
 575:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 320              		.loc 2 575 3 view .LVU91
 321              	.LBB309:
 322              	.LBI309:
 355:./lib/chibios/os/rt/include/chsys.h **** 
 323              		.loc 3 355 20 view .LVU92
 357:./lib/chibios/os/rt/include/chsys.h ****   _stats_start_measure_crit_thd();
 324              		.loc 3 357 3 view .LVU93
 325              	.LBB310:
 326              	.LBI310:
 669:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 327              		.loc 4 669 27 view .LVU94
 677:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if defined(__CM7_REV)
 328              		.loc 4 677 3 view .LVU95
 329              	.LBB311:
 330              	.LBI311:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 331              		.loc 5 491 27 view .LVU96
 332              	.LBB312:
 333              		.loc 5 493 3 view .LVU97
 334              	.LBE312:
 335              	.LBE311:
 336              	.LBE310:
 337              	.LBE309:
 338              	.LBE308:
 327:lib/chibios/os/hal/src/hal_usb.c ****   unsigned i;
 339              		.loc 1 327 31 is_stmt 0 view .LVU98
 340 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 341              		.cfi_def_cfa_offset 24
 342              		.cfi_offset 3, -24
 343              		.cfi_offset 4, -20
 344              		.cfi_offset 5, -16
 345              		.cfi_offset 6, -12
 346              		.cfi_offset 7, -8
 347              		.cfi_offset 14, -4
 327:lib/chibios/os/hal/src/hal_usb.c ****   unsigned i;
 348              		.loc 1 327 31 view .LVU99
 349 0002 0446     		mov	r4, r0
 350              	.LBB317:
 351              	.LBB316:
 352              	.LBB315:
 353              	.LBB314:
 354              	.LBB313:
 355              		.loc 5 493 3 view .LVU100
 356 0004 2023     		movs	r3, #32
 357              		.syntax unified
 358              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 359 0006 83F31188 		MSR basepri, r3
 360              	@ 0 "" 2
 361              	.LVL17:
 362              		.loc 5 493 3 view .LVU101
 363              		.thumb
 364              		.syntax unified
 365              	.LBE313:
 366              	.LBE314:
 367              	.LBE315:
 358:./lib/chibios/os/rt/include/chsys.h ****   _dbg_check_lock();
 368              		.loc 3 358 34 is_stmt 1 view .LVU102
 359:./lib/chibios/os/rt/include/chsys.h **** }
 369              		.loc 3 359 20 view .LVU103
 370              	.LBE316:
 371              	.LBE317:
 333:lib/chibios/os/hal/src/hal_usb.c **** 
 334:lib/chibios/os/hal/src/hal_usb.c ****   osalDbgAssert((usbp->state == USB_STOP) || (usbp->state == USB_READY) ||
 372              		.loc 1 334 3 view .LVU104
 373              		.loc 1 334 3 view .LVU105
 374              		.loc 1 334 3 view .LVU106
 335:lib/chibios/os/hal/src/hal_usb.c ****                 (usbp->state == USB_SELECTED) || (usbp->state == USB_ACTIVE) ||
 336:lib/chibios/os/hal/src/hal_usb.c ****                 (usbp->state == USB_SUSPENDED),
 337:lib/chibios/os/hal/src/hal_usb.c ****                 "invalid state");
 338:lib/chibios/os/hal/src/hal_usb.c **** 
 339:lib/chibios/os/hal/src/hal_usb.c ****   usb_lld_stop(usbp);
 375              		.loc 1 339 3 view .LVU107
 340:lib/chibios/os/hal/src/hal_usb.c ****   usbp->config = NULL;
 341:lib/chibios/os/hal/src/hal_usb.c ****   usbp->state  = USB_STOP;
 376              		.loc 1 341 16 is_stmt 0 view .LVU108
 377 000a 2546     		mov	r5, r4
 339:lib/chibios/os/hal/src/hal_usb.c ****   usbp->config = NULL;
 378              		.loc 1 339 3 view .LVU109
 379 000c FFF7FEFF 		bl	usb_lld_stop
 380              	.LVL18:
 340:lib/chibios/os/hal/src/hal_usb.c ****   usbp->config = NULL;
 381              		.loc 1 340 3 is_stmt 1 view .LVU110
 340:lib/chibios/os/hal/src/hal_usb.c ****   usbp->config = NULL;
 382              		.loc 1 340 16 is_stmt 0 view .LVU111
 383 0010 0026     		movs	r6, #0
 384              		.loc 1 341 16 view .LVU112
 385 0012 0123     		movs	r3, #1
 340:lib/chibios/os/hal/src/hal_usb.c ****   usbp->config = NULL;
 386              		.loc 1 340 16 view .LVU113
 387 0014 6660     		str	r6, [r4, #4]
 388              		.loc 1 341 3 is_stmt 1 view .LVU114
 389              		.loc 1 341 16 is_stmt 0 view .LVU115
 390 0016 05F80C3B 		strb	r3, [r5], #12
 342:lib/chibios/os/hal/src/hal_usb.c **** 
 343:lib/chibios/os/hal/src/hal_usb.c ****   /* Resetting all ongoing synchronous operations.*/
 344:lib/chibios/os/hal/src/hal_usb.c ****   for (i = 0; i <= (unsigned)USB_MAX_ENDPOINTS; i++) {
 391              		.loc 1 344 3 is_stmt 1 view .LVU116
 392              	.LVL19:
 393              		.loc 1 344 17 view .LVU117
 394 001a 2C34     		adds	r4, r4, #44
 395              	.LVL20:
 345:lib/chibios/os/hal/src/hal_usb.c **** #if USB_USE_WAIT == TRUE
 346:lib/chibios/os/hal/src/hal_usb.c ****     if (usbp->epc[i] != NULL) {
 347:lib/chibios/os/hal/src/hal_usb.c ****       if (usbp->epc[i]->in_state != NULL) {
 348:lib/chibios/os/hal/src/hal_usb.c ****         osalThreadResumeI(&usbp->epc[i]->in_state->thread, MSG_RESET);
 349:lib/chibios/os/hal/src/hal_usb.c ****       }
 350:lib/chibios/os/hal/src/hal_usb.c ****       if (usbp->epc[i]->out_state != NULL) {
 351:lib/chibios/os/hal/src/hal_usb.c ****         osalThreadResumeI(&usbp->epc[i]->out_state->thread, MSG_RESET);
 352:lib/chibios/os/hal/src/hal_usb.c ****       }
 353:lib/chibios/os/hal/src/hal_usb.c ****     }
 354:lib/chibios/os/hal/src/hal_usb.c **** #endif
 355:lib/chibios/os/hal/src/hal_usb.c ****     usbp->epc[i] = NULL;
 396              		.loc 1 355 18 is_stmt 0 view .LVU118
 397 001c 3746     		mov	r7, r6
 398              	.LVL21:
 399              	.L14:
 346:lib/chibios/os/hal/src/hal_usb.c ****       if (usbp->epc[i]->in_state != NULL) {
 400              		.loc 1 346 5 is_stmt 1 view .LVU119
 346:lib/chibios/os/hal/src/hal_usb.c ****       if (usbp->epc[i]->in_state != NULL) {
 401              		.loc 1 346 18 is_stmt 0 view .LVU120
 402 001e 55F8043B 		ldr	r3, [r5], #4
 346:lib/chibios/os/hal/src/hal_usb.c ****       if (usbp->epc[i]->in_state != NULL) {
 403              		.loc 1 346 8 view .LVU121
 404 0022 7BB1     		cbz	r3, .L11
 347:lib/chibios/os/hal/src/hal_usb.c ****         osalThreadResumeI(&usbp->epc[i]->in_state->thread, MSG_RESET);
 405              		.loc 1 347 7 is_stmt 1 view .LVU122
 347:lib/chibios/os/hal/src/hal_usb.c ****         osalThreadResumeI(&usbp->epc[i]->in_state->thread, MSG_RESET);
 406              		.loc 1 347 23 is_stmt 0 view .LVU123
 407 0024 5869     		ldr	r0, [r3, #20]
 347:lib/chibios/os/hal/src/hal_usb.c ****         osalThreadResumeI(&usbp->epc[i]->in_state->thread, MSG_RESET);
 408              		.loc 1 347 10 view .LVU124
 409 0026 20B1     		cbz	r0, .L12
 348:lib/chibios/os/hal/src/hal_usb.c ****       }
 410              		.loc 1 348 9 is_stmt 1 view .LVU125
 411              	.LVL22:
 412              	.LBB318:
 413              	.LBI318:
 587:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 588:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 589:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 590:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Enters a critical zone from ISR context.
 591:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    This function cannot be used for reentrant critical zones.
 592:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 593:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @special
 594:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 595:./lib/chibios/os/hal/osal/rt-nil/osal.h **** static inline void osalSysLockFromISR(void) {
 596:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 597:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   chSysLockFromISR();
 598:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 599:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 600:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 601:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Leaves a critical zone from ISR context.
 602:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    This function cannot be used for reentrant critical zones.
 603:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 604:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @special
 605:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 606:./lib/chibios/os/hal/osal/rt-nil/osal.h **** static inline void osalSysUnlockFromISR(void) {
 607:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 608:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   chSysUnlockFromISR();
 609:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 610:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 611:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 612:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Returns the execution status and enters a critical zone.
 613:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @details This functions enters into a critical zone and can be called
 614:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          from any context. Because its flexibility it is less efficient
 615:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          than @p chSysLock() which is preferable when the calling context
 616:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          is known.
 617:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @post    The system is in a critical zone.
 618:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 619:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @return              The previous system status, the encoding of this
 620:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *                      status word is architecture-dependent and opaque.
 621:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 622:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @xclass
 623:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 624:./lib/chibios/os/hal/osal/rt-nil/osal.h **** static inline syssts_t osalSysGetStatusAndLockX(void) {
 625:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 626:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   return chSysGetStatusAndLockX();
 627:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 628:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 629:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 630:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Restores the specified execution status and leaves a critical zone.
 631:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    A call to @p chSchRescheduleS() is automatically performed
 632:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          if exiting the critical zone and if not in ISR context.
 633:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 634:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] sts       the system status to be restored.
 635:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 636:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @xclass
 637:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 638:./lib/chibios/os/hal/osal/rt-nil/osal.h **** static inline void osalSysRestoreStatusX(syssts_t sts) {
 639:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 640:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   chSysRestoreStatusX(sts);
 641:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 642:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 643:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 644:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Polled delay.
 645:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The real delay is always few cycles in excess of the specified
 646:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          value.
 647:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 648:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] cycles    number of cycles
 649:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 650:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @xclass
 651:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 652:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #if (PORT_SUPPORTS_RT == TRUE) || defined(__DOXYGEN__)
 653:./lib/chibios/os/hal/osal/rt-nil/osal.h **** static inline void osalSysPolledDelayX(rtcnt_t cycles) {
 654:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 655:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   chSysPolledDelayX(cycles);
 656:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 657:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #endif
 658:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 659:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 660:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Systick callback for the underlying OS.
 661:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    This callback is only defined if the OSAL requires such a
 662:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          service from the HAL.
 663:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 664:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #if (OSAL_ST_MODE != OSAL_ST_MODE_NONE) || defined(__DOXYGEN__)
 665:./lib/chibios/os/hal/osal/rt-nil/osal.h **** static inline void osalOsTimerHandlerI(void) {
 666:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 667:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   chSysTimerHandlerI();
 668:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 669:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #endif
 670:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 671:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 672:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Checks if a reschedule is required and performs it.
 673:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    I-Class functions invoked from thread context must not reschedule
 674:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          by themselves, an explicit reschedule using this function is
 675:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          required in this scenario.
 676:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    Not implemented in this simplified OSAL.
 677:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 678:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @sclass
 679:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 680:./lib/chibios/os/hal/osal/rt-nil/osal.h **** static inline void osalOsRescheduleS(void) {
 681:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 682:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   chSchRescheduleS();
 683:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 684:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 685:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 686:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Current system time.
 687:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @details Returns the number of system ticks since the @p osalInit()
 688:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          invocation.
 689:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The counter can reach its maximum and then restart from zero.
 690:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    This function can be called from any context but its atomicity
 691:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          is not guaranteed on architectures whose word size is less than
 692:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          @p systime_t size.
 693:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 694:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @return              The system time in ticks.
 695:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 696:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @xclass
 697:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 698:./lib/chibios/os/hal/osal/rt-nil/osal.h **** static inline systime_t osalOsGetSystemTimeX(void) {
 699:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 700:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   return chVTGetSystemTimeX();
 701:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 702:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 703:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 704:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Adds an interval to a system time returning a system time.
 705:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 706:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] systime   base system time
 707:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] interval  interval to be added
 708:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @return              The new system time.
 709:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 710:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @xclass
 711:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 712:./lib/chibios/os/hal/osal/rt-nil/osal.h **** static inline systime_t osalTimeAddX(systime_t systime,
 713:./lib/chibios/os/hal/osal/rt-nil/osal.h ****                                      sysinterval_t interval) {
 714:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 715:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   return chTimeAddX(systime, interval);
 716:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 717:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 718:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 719:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Subtracts two system times returning an interval.
 720:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 721:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] start     first system time
 722:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] end       second system time
 723:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @return              The interval representing the time difference.
 724:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 725:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @xclass
 726:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 727:./lib/chibios/os/hal/osal/rt-nil/osal.h **** static inline sysinterval_t osalTimeDiffX(systime_t start, systime_t end) {
 728:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 729:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   return chTimeDiffX(start, end);
 730:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 731:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 732:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 733:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Checks if the specified time is within the specified time window.
 734:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    When start==end then the function returns always true because the
 735:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          whole time range is specified.
 736:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    This function can be called from any context.
 737:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 738:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] time      the time to be verified
 739:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] start     the start of the time window (inclusive)
 740:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] end       the end of the time window (non inclusive)
 741:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @retval true         current time within the specified time window.
 742:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @retval false        current time not within the specified time window.
 743:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 744:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @xclass
 745:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 746:./lib/chibios/os/hal/osal/rt-nil/osal.h **** static inline bool osalTimeIsInRangeX(systime_t time,
 747:./lib/chibios/os/hal/osal/rt-nil/osal.h ****                                       systime_t start,
 748:./lib/chibios/os/hal/osal/rt-nil/osal.h ****                                       systime_t end) {
 749:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 750:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   return chTimeIsInRangeX(time, start, end);
 751:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 752:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 753:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 754:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Suspends the invoking thread for the specified time.
 755:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 756:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] delay     the delay in system ticks, the special values are
 757:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *                      handled as follow:
 758:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *                      - @a TIME_INFINITE is allowed but interpreted as a
 759:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *                        normal time specification.
 760:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *                      - @a TIME_IMMEDIATE this value is not allowed.
 761:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *                      .
 762:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 763:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @sclass
 764:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 765:./lib/chibios/os/hal/osal/rt-nil/osal.h **** static inline void osalThreadSleepS(sysinterval_t delay) {
 766:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 767:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   chThdSleepS(delay);
 768:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 769:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 770:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 771:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Suspends the invoking thread for the specified time.
 772:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 773:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] delay     the delay in system ticks, the special values are
 774:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *                      handled as follow:
 775:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *                      - @a TIME_INFINITE is allowed but interpreted as a
 776:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *                        normal time specification.
 777:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *                      - @a TIME_IMMEDIATE this value is not allowed.
 778:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *                      .
 779:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 780:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @api
 781:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 782:./lib/chibios/os/hal/osal/rt-nil/osal.h **** static inline void osalThreadSleep(sysinterval_t delay) {
 783:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 784:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   chThdSleep(delay);
 785:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 786:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 787:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 788:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Sends the current thread sleeping and sets a reference variable.
 789:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    This function must reschedule, it can only be called from thread
 790:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          context.
 791:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 792:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] trp       a pointer to a thread reference object
 793:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @return              The wake up message.
 794:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 795:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @sclass
 796:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 797:./lib/chibios/os/hal/osal/rt-nil/osal.h **** static inline msg_t osalThreadSuspendS(thread_reference_t *trp) {
 798:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 799:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   return chThdSuspendTimeoutS(trp, TIME_INFINITE);
 800:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 801:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 802:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 803:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Sends the current thread sleeping and sets a reference variable.
 804:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    This function must reschedule, it can only be called from thread
 805:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          context.
 806:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 807:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] trp       a pointer to a thread reference object
 808:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] timeout   the timeout in system ticks, the special values are
 809:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *                      handled as follow:
 810:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *                      - @a TIME_INFINITE the thread enters an infinite sleep
 811:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *                        state.
 812:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *                      - @a TIME_IMMEDIATE the thread is not enqueued and
 813:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *                        the function returns @p MSG_TIMEOUT as if a timeout
 814:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *                        occurred.
 815:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *                      .
 816:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @return              The wake up message.
 817:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @retval MSG_TIMEOUT  if the operation timed out.
 818:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 819:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @sclass
 820:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 821:./lib/chibios/os/hal/osal/rt-nil/osal.h **** static inline msg_t osalThreadSuspendTimeoutS(thread_reference_t *trp,
 822:./lib/chibios/os/hal/osal/rt-nil/osal.h ****                                               sysinterval_t timeout) {
 823:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 824:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   return chThdSuspendTimeoutS(trp, timeout);
 825:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 826:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 827:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 828:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Wakes up a thread waiting on a thread reference object.
 829:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    This function must not reschedule because it can be called from
 830:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          ISR context.
 831:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 832:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] trp       a pointer to a thread reference object
 833:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] msg       the message code
 834:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 835:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @iclass
 836:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 837:./lib/chibios/os/hal/osal/rt-nil/osal.h **** static inline void osalThreadResumeI(thread_reference_t *trp, msg_t msg) {
 414              		.loc 2 837 20 view .LVU126
 415              	.LBB319:
 838:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 839:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   chThdResumeI(trp, msg);
 416              		.loc 2 839 3 view .LVU127
 417 0028 6FF00101 		mvn	r1, #1
 418 002c 0C30     		adds	r0, r0, #12
 419              	.LVL23:
 420              		.loc 2 839 3 is_stmt 0 view .LVU128
 421 002e FFF7FEFF 		bl	chThdResumeI
 422              	.LVL24:
 423              	.L12:
 424              		.loc 2 839 3 view .LVU129
 425              	.LBE319:
 426              	.LBE318:
 350:lib/chibios/os/hal/src/hal_usb.c ****         osalThreadResumeI(&usbp->epc[i]->out_state->thread, MSG_RESET);
 427              		.loc 1 350 7 is_stmt 1 view .LVU130
 350:lib/chibios/os/hal/src/hal_usb.c ****         osalThreadResumeI(&usbp->epc[i]->out_state->thread, MSG_RESET);
 428              		.loc 1 350 23 is_stmt 0 view .LVU131
 429 0032 55F8043C 		ldr	r3, [r5, #-4]
 430 0036 9869     		ldr	r0, [r3, #24]
 350:lib/chibios/os/hal/src/hal_usb.c ****         osalThreadResumeI(&usbp->epc[i]->out_state->thread, MSG_RESET);
 431              		.loc 1 350 10 view .LVU132
 432 0038 20B1     		cbz	r0, .L11
 351:lib/chibios/os/hal/src/hal_usb.c ****       }
 433              		.loc 1 351 9 is_stmt 1 view .LVU133
 434              	.LVL25:
 435              	.LBB320:
 436              	.LBI320:
 837:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 437              		.loc 2 837 20 view .LVU134
 438              	.LBB321:
 439              		.loc 2 839 3 view .LVU135
 440 003a 6FF00101 		mvn	r1, #1
 441 003e 0C30     		adds	r0, r0, #12
 442              	.LVL26:
 443              		.loc 2 839 3 is_stmt 0 view .LVU136
 444 0040 FFF7FEFF 		bl	chThdResumeI
 445              	.LVL27:
 446              	.L11:
 447              		.loc 2 839 3 view .LVU137
 448              	.LBE321:
 449              	.LBE320:
 450              		.loc 1 355 5 is_stmt 1 discriminator 2 view .LVU138
 344:lib/chibios/os/hal/src/hal_usb.c **** #if USB_USE_WAIT == TRUE
 451              		.loc 1 344 17 is_stmt 0 discriminator 2 view .LVU139
 452 0044 A542     		cmp	r5, r4
 453              		.loc 1 355 18 discriminator 2 view .LVU140
 454 0046 45F8046C 		str	r6, [r5, #-4]
 344:lib/chibios/os/hal/src/hal_usb.c **** #if USB_USE_WAIT == TRUE
 455              		.loc 1 344 50 is_stmt 1 discriminator 2 view .LVU141
 344:lib/chibios/os/hal/src/hal_usb.c **** #if USB_USE_WAIT == TRUE
 456              		.loc 1 344 17 discriminator 2 view .LVU142
 457 004a E8D1     		bne	.L14
 356:lib/chibios/os/hal/src/hal_usb.c ****   }
 357:lib/chibios/os/hal/src/hal_usb.c ****   osalOsRescheduleS();
 458              		.loc 1 357 3 view .LVU143
 459              	.LBB322:
 460              	.LBI322:
 680:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 461              		.loc 2 680 20 view .LVU144
 462              	.LBB323:
 682:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 463              		.loc 2 682 3 view .LVU145
 464 004c FFF7FEFF 		bl	chSchRescheduleS
 465              	.LVL28:
 466              	.LBE323:
 467              	.LBE322:
 358:lib/chibios/os/hal/src/hal_usb.c **** 
 359:lib/chibios/os/hal/src/hal_usb.c ****   osalSysUnlock();
 468              		.loc 1 359 3 view .LVU146
 469              	.LBB324:
 470              	.LBI324:
 584:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 471              		.loc 2 584 20 view .LVU147
 586:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 472              		.loc 2 586 3 view .LVU148
 473              	.LBB325:
 474              	.LBI325:
 367:./lib/chibios/os/rt/include/chsys.h **** 
 475              		.loc 3 367 20 view .LVU149
 476              	.LBB326:
 369:./lib/chibios/os/rt/include/chsys.h ****   _stats_stop_measure_crit_thd();
 477              		.loc 3 369 22 view .LVU150
 370:./lib/chibios/os/rt/include/chsys.h **** 
 478              		.loc 3 370 33 view .LVU151
 376:./lib/chibios/os/rt/include/chsys.h ****               (ch.rlist.current->hdr.pqueue.prio >= ch.rlist.pqueue.next->prio),
 479              		.loc 3 376 3 view .LVU152
 376:./lib/chibios/os/rt/include/chsys.h ****               (ch.rlist.current->hdr.pqueue.prio >= ch.rlist.pqueue.next->prio),
 480              		.loc 3 376 3 view .LVU153
 376:./lib/chibios/os/rt/include/chsys.h ****               (ch.rlist.current->hdr.pqueue.prio >= ch.rlist.pqueue.next->prio),
 481              		.loc 3 376 3 view .LVU154
 482              		.loc 3 380 3 view .LVU155
 483              	.LBB327:
 484              	.LBI327:
 693:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 485              		.loc 4 693 27 view .LVU156
 486              		.loc 4 696 3 view .LVU157
 487              	.LBB328:
 488              	.LBI328:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 489              		.loc 5 491 27 view .LVU158
 490              	.LBB329:
 491              		.loc 5 493 3 view .LVU159
 492              		.syntax unified
 493              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 494 0050 87F31188 		MSR basepri, r7
 495              	@ 0 "" 2
 496              	.LVL29:
 497              		.loc 5 493 3 is_stmt 0 view .LVU160
 498              		.thumb
 499              		.syntax unified
 500              	.LBE329:
 501              	.LBE328:
 502              	.LBE327:
 503              	.LBE326:
 504              	.LBE325:
 505              	.LBE324:
 360:lib/chibios/os/hal/src/hal_usb.c **** }
 506              		.loc 1 360 1 view .LVU161
 507 0054 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 508              		.loc 1 360 1 view .LVU162
 509              		.cfi_endproc
 510              	.LFE334:
 512              		.section	.text.usbInitEndpointI,"ax",%progbits
 513              		.align	1
 514              		.global	usbInitEndpointI
 515              		.syntax unified
 516              		.thumb
 517              		.thumb_func
 518              		.fpu fpv4-sp-d16
 520              	usbInitEndpointI:
 521              	.LVL30:
 522              	.LFB335:
 361:lib/chibios/os/hal/src/hal_usb.c **** 
 362:lib/chibios/os/hal/src/hal_usb.c **** /**
 363:lib/chibios/os/hal/src/hal_usb.c ****  * @brief   Enables an endpoint.
 364:lib/chibios/os/hal/src/hal_usb.c ****  * @details This function enables an endpoint, both IN and/or OUT directions
 365:lib/chibios/os/hal/src/hal_usb.c ****  *          depending on the configuration structure.
 366:lib/chibios/os/hal/src/hal_usb.c ****  * @note    This function must be invoked in response of a SET_CONFIGURATION
 367:lib/chibios/os/hal/src/hal_usb.c ****  *          or SET_INTERFACE message.
 368:lib/chibios/os/hal/src/hal_usb.c ****  *
 369:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] usbp      pointer to the @p USBDriver object
 370:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] ep        endpoint number
 371:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] epcp      the endpoint configuration
 372:lib/chibios/os/hal/src/hal_usb.c ****  *
 373:lib/chibios/os/hal/src/hal_usb.c ****  * @iclass
 374:lib/chibios/os/hal/src/hal_usb.c ****  */
 375:lib/chibios/os/hal/src/hal_usb.c **** void usbInitEndpointI(USBDriver *usbp, usbep_t ep,
 376:lib/chibios/os/hal/src/hal_usb.c ****                       const USBEndpointConfig *epcp) {
 523              		.loc 1 376 54 is_stmt 1 view -0
 524              		.cfi_startproc
 525              		@ args = 0, pretend = 0, frame = 0
 526              		@ frame_needed = 0, uses_anonymous_args = 0
 377:lib/chibios/os/hal/src/hal_usb.c **** 
 378:lib/chibios/os/hal/src/hal_usb.c ****   osalDbgCheckClassI();
 527              		.loc 1 378 23 view .LVU164
 379:lib/chibios/os/hal/src/hal_usb.c ****   osalDbgCheck((usbp != NULL) && (epcp != NULL));
 528              		.loc 1 379 3 view .LVU165
 529              		.loc 1 379 3 view .LVU166
 530              		.loc 1 379 3 view .LVU167
 380:lib/chibios/os/hal/src/hal_usb.c ****   osalDbgAssert(usbp->state == USB_ACTIVE,
 531              		.loc 1 380 3 view .LVU168
 532              		.loc 1 380 3 view .LVU169
 533              		.loc 1 380 3 view .LVU170
 381:lib/chibios/os/hal/src/hal_usb.c ****                 "invalid state");
 382:lib/chibios/os/hal/src/hal_usb.c ****   osalDbgAssert(usbp->epc[ep] == NULL, "already initialized");
 534              		.loc 1 382 3 view .LVU171
 535              		.loc 1 382 3 view .LVU172
 536              		.loc 1 382 3 view .LVU173
 383:lib/chibios/os/hal/src/hal_usb.c **** 
 384:lib/chibios/os/hal/src/hal_usb.c ****   /* Logically enabling the endpoint in the USBDriver structure.*/
 385:lib/chibios/os/hal/src/hal_usb.c ****   usbp->epc[ep] = epcp;
 537              		.loc 1 385 3 view .LVU174
 376:lib/chibios/os/hal/src/hal_usb.c **** 
 538              		.loc 1 376 54 is_stmt 0 view .LVU175
 539 0000 70B5     		push	{r4, r5, r6, lr}
 540              		.cfi_def_cfa_offset 16
 541              		.cfi_offset 4, -16
 542              		.cfi_offset 5, -12
 543              		.cfi_offset 6, -8
 544              		.cfi_offset 14, -4
 545              		.loc 1 385 17 view .LVU176
 546 0002 00EB8103 		add	r3, r0, r1, lsl #2
 376:lib/chibios/os/hal/src/hal_usb.c **** 
 547              		.loc 1 376 54 view .LVU177
 548 0006 0546     		mov	r5, r0
 386:lib/chibios/os/hal/src/hal_usb.c **** 
 387:lib/chibios/os/hal/src/hal_usb.c ****   /* Clearing the state structures, custom fields as well.*/
 388:lib/chibios/os/hal/src/hal_usb.c ****   if (epcp->in_state != NULL) {
 549              		.loc 1 388 11 view .LVU178
 550 0008 5069     		ldr	r0, [r2, #20]
 551              	.LVL31:
 385:lib/chibios/os/hal/src/hal_usb.c **** 
 552              		.loc 1 385 17 view .LVU179
 553 000a DA60     		str	r2, [r3, #12]
 554              		.loc 1 388 3 is_stmt 1 view .LVU180
 376:lib/chibios/os/hal/src/hal_usb.c **** 
 555              		.loc 1 376 54 is_stmt 0 view .LVU181
 556 000c 0E46     		mov	r6, r1
 557 000e 1446     		mov	r4, r2
 558              		.loc 1 388 6 view .LVU182
 559 0010 18B1     		cbz	r0, .L23
 389:lib/chibios/os/hal/src/hal_usb.c ****     memset(epcp->in_state, 0, sizeof(USBInEndpointState));
 560              		.loc 1 389 5 is_stmt 1 view .LVU183
 561 0012 1422     		movs	r2, #20
 562              	.LVL32:
 563              		.loc 1 389 5 is_stmt 0 view .LVU184
 564 0014 0021     		movs	r1, #0
 565              	.LVL33:
 566              		.loc 1 389 5 view .LVU185
 567 0016 FFF7FEFF 		bl	memset
 568              	.LVL34:
 569              	.L23:
 390:lib/chibios/os/hal/src/hal_usb.c ****   }
 391:lib/chibios/os/hal/src/hal_usb.c ****   if (epcp->out_state != NULL) {
 570              		.loc 1 391 3 is_stmt 1 view .LVU186
 571              		.loc 1 391 11 is_stmt 0 view .LVU187
 572 001a A069     		ldr	r0, [r4, #24]
 573              		.loc 1 391 6 view .LVU188
 574 001c 18B1     		cbz	r0, .L24
 392:lib/chibios/os/hal/src/hal_usb.c ****     memset(epcp->out_state, 0, sizeof(USBOutEndpointState));
 575              		.loc 1 392 5 is_stmt 1 view .LVU189
 576 001e 1422     		movs	r2, #20
 577 0020 0021     		movs	r1, #0
 578 0022 FFF7FEFF 		bl	memset
 579              	.LVL35:
 580              	.L24:
 393:lib/chibios/os/hal/src/hal_usb.c ****   }
 394:lib/chibios/os/hal/src/hal_usb.c **** 
 395:lib/chibios/os/hal/src/hal_usb.c ****   /* Low level endpoint activation.*/
 396:lib/chibios/os/hal/src/hal_usb.c ****   usb_lld_init_endpoint(usbp, ep);
 581              		.loc 1 396 3 view .LVU190
 582 0026 3146     		mov	r1, r6
 583 0028 2846     		mov	r0, r5
 397:lib/chibios/os/hal/src/hal_usb.c **** }
 584              		.loc 1 397 1 is_stmt 0 view .LVU191
 585 002a BDE87040 		pop	{r4, r5, r6, lr}
 586              		.cfi_restore 14
 587              		.cfi_restore 6
 588              		.cfi_restore 5
 589              		.cfi_restore 4
 590              		.cfi_def_cfa_offset 0
 591              	.LVL36:
 396:lib/chibios/os/hal/src/hal_usb.c **** }
 592              		.loc 1 396 3 view .LVU192
 593 002e FFF7FEBF 		b	usb_lld_init_endpoint
 594              	.LVL37:
 396:lib/chibios/os/hal/src/hal_usb.c **** }
 595              		.loc 1 396 3 view .LVU193
 596              		.cfi_endproc
 597              	.LFE335:
 599              		.section	.text.usbDisableEndpointsI,"ax",%progbits
 600              		.align	1
 601              		.global	usbDisableEndpointsI
 602              		.syntax unified
 603              		.thumb
 604              		.thumb_func
 605              		.fpu fpv4-sp-d16
 607              	usbDisableEndpointsI:
 608              	.LVL38:
 609              	.LFB336:
 398:lib/chibios/os/hal/src/hal_usb.c **** 
 399:lib/chibios/os/hal/src/hal_usb.c **** /**
 400:lib/chibios/os/hal/src/hal_usb.c ****  * @brief   Disables all the active endpoints.
 401:lib/chibios/os/hal/src/hal_usb.c ****  * @details This function disables all the active endpoints except the
 402:lib/chibios/os/hal/src/hal_usb.c ****  *          endpoint zero.
 403:lib/chibios/os/hal/src/hal_usb.c ****  * @note    This function must be invoked in response of a SET_CONFIGURATION
 404:lib/chibios/os/hal/src/hal_usb.c ****  *          message with configuration number zero.
 405:lib/chibios/os/hal/src/hal_usb.c ****  *
 406:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] usbp      pointer to the @p USBDriver object
 407:lib/chibios/os/hal/src/hal_usb.c ****  *
 408:lib/chibios/os/hal/src/hal_usb.c ****  * @iclass
 409:lib/chibios/os/hal/src/hal_usb.c ****  */
 410:lib/chibios/os/hal/src/hal_usb.c **** void usbDisableEndpointsI(USBDriver *usbp) {
 610              		.loc 1 410 44 is_stmt 1 view -0
 611              		.cfi_startproc
 612              		@ args = 0, pretend = 0, frame = 0
 613              		@ frame_needed = 0, uses_anonymous_args = 0
 411:lib/chibios/os/hal/src/hal_usb.c ****   unsigned i;
 614              		.loc 1 411 3 view .LVU195
 412:lib/chibios/os/hal/src/hal_usb.c **** 
 413:lib/chibios/os/hal/src/hal_usb.c ****   osalDbgCheckClassI();
 615              		.loc 1 413 23 view .LVU196
 414:lib/chibios/os/hal/src/hal_usb.c ****   osalDbgCheck(usbp != NULL);
 616              		.loc 1 414 3 view .LVU197
 617              		.loc 1 414 3 view .LVU198
 618              		.loc 1 414 3 view .LVU199
 415:lib/chibios/os/hal/src/hal_usb.c ****   osalDbgAssert(usbp->state == USB_ACTIVE, "invalid state");
 619              		.loc 1 415 3 view .LVU200
 620              		.loc 1 415 3 view .LVU201
 621              		.loc 1 415 3 view .LVU202
 416:lib/chibios/os/hal/src/hal_usb.c **** 
 417:lib/chibios/os/hal/src/hal_usb.c ****   usbp->transmitting &= 1U;
 622              		.loc 1 417 3 view .LVU203
 418:lib/chibios/os/hal/src/hal_usb.c ****   usbp->receiving    &= 1U;
 623              		.loc 1 418 3 view .LVU204
 410:lib/chibios/os/hal/src/hal_usb.c ****   unsigned i;
 624              		.loc 1 410 44 is_stmt 0 view .LVU205
 625 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 626              		.cfi_def_cfa_offset 24
 627              		.cfi_offset 3, -24
 628              		.cfi_offset 4, -20
 629              		.cfi_offset 5, -16
 630              		.cfi_offset 6, -12
 631              		.cfi_offset 7, -8
 632              		.cfi_offset 14, -4
 417:lib/chibios/os/hal/src/hal_usb.c ****   usbp->receiving    &= 1U;
 633              		.loc 1 417 22 view .LVU206
 634 0002 8368     		ldr	r3, [r0, #8]
 635 0004 03F00113 		and	r3, r3, #65537
 410:lib/chibios/os/hal/src/hal_usb.c ****   unsigned i;
 636              		.loc 1 410 44 view .LVU207
 637 0008 0446     		mov	r4, r0
 417:lib/chibios/os/hal/src/hal_usb.c ****   usbp->receiving    &= 1U;
 638              		.loc 1 417 22 view .LVU208
 639 000a 8360     		str	r3, [r0, #8]
 419:lib/chibios/os/hal/src/hal_usb.c **** 
 420:lib/chibios/os/hal/src/hal_usb.c ****   for (i = 1; i <= (unsigned)USB_MAX_ENDPOINTS; i++) {
 640              		.loc 1 420 3 is_stmt 1 view .LVU209
 641              	.LVL39:
 642              		.loc 1 420 17 view .LVU210
 643 000c 00F11005 		add	r5, r0, #16
 644 0010 00F12C06 		add	r6, r0, #44
 421:lib/chibios/os/hal/src/hal_usb.c **** #if USB_USE_WAIT == TRUE
 422:lib/chibios/os/hal/src/hal_usb.c ****     /* Signaling the event to threads waiting on endpoints.*/
 423:lib/chibios/os/hal/src/hal_usb.c ****     if (usbp->epc[i] != NULL) {
 424:lib/chibios/os/hal/src/hal_usb.c ****       if (usbp->epc[i]->in_state != NULL) {
 425:lib/chibios/os/hal/src/hal_usb.c ****         osalThreadResumeI(&usbp->epc[i]->in_state->thread, MSG_RESET);
 426:lib/chibios/os/hal/src/hal_usb.c ****       }
 427:lib/chibios/os/hal/src/hal_usb.c ****       if (usbp->epc[i]->out_state != NULL) {
 428:lib/chibios/os/hal/src/hal_usb.c ****         osalThreadResumeI(&usbp->epc[i]->out_state->thread, MSG_RESET);
 429:lib/chibios/os/hal/src/hal_usb.c ****       }
 430:lib/chibios/os/hal/src/hal_usb.c ****     }
 431:lib/chibios/os/hal/src/hal_usb.c **** #endif
 432:lib/chibios/os/hal/src/hal_usb.c ****     usbp->epc[i] = NULL;
 645              		.loc 1 432 18 is_stmt 0 view .LVU211
 646 0014 0027     		movs	r7, #0
 647              	.LVL40:
 648              	.L36:
 423:lib/chibios/os/hal/src/hal_usb.c ****       if (usbp->epc[i]->in_state != NULL) {
 649              		.loc 1 423 5 is_stmt 1 view .LVU212
 423:lib/chibios/os/hal/src/hal_usb.c ****       if (usbp->epc[i]->in_state != NULL) {
 650              		.loc 1 423 18 is_stmt 0 view .LVU213
 651 0016 55F8043B 		ldr	r3, [r5], #4
 423:lib/chibios/os/hal/src/hal_usb.c ****       if (usbp->epc[i]->in_state != NULL) {
 652              		.loc 1 423 8 view .LVU214
 653 001a 7BB1     		cbz	r3, .L33
 424:lib/chibios/os/hal/src/hal_usb.c ****         osalThreadResumeI(&usbp->epc[i]->in_state->thread, MSG_RESET);
 654              		.loc 1 424 7 is_stmt 1 view .LVU215
 424:lib/chibios/os/hal/src/hal_usb.c ****         osalThreadResumeI(&usbp->epc[i]->in_state->thread, MSG_RESET);
 655              		.loc 1 424 23 is_stmt 0 view .LVU216
 656 001c 5869     		ldr	r0, [r3, #20]
 424:lib/chibios/os/hal/src/hal_usb.c ****         osalThreadResumeI(&usbp->epc[i]->in_state->thread, MSG_RESET);
 657              		.loc 1 424 10 view .LVU217
 658 001e 20B1     		cbz	r0, .L34
 425:lib/chibios/os/hal/src/hal_usb.c ****       }
 659              		.loc 1 425 9 is_stmt 1 view .LVU218
 660              	.LVL41:
 661              	.LBB330:
 662              	.LBI330:
 837:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 663              		.loc 2 837 20 view .LVU219
 664              	.LBB331:
 665              		.loc 2 839 3 view .LVU220
 666 0020 6FF00101 		mvn	r1, #1
 667 0024 0C30     		adds	r0, r0, #12
 668              	.LVL42:
 669              		.loc 2 839 3 is_stmt 0 view .LVU221
 670 0026 FFF7FEFF 		bl	chThdResumeI
 671              	.LVL43:
 672              	.L34:
 673              		.loc 2 839 3 view .LVU222
 674              	.LBE331:
 675              	.LBE330:
 427:lib/chibios/os/hal/src/hal_usb.c ****         osalThreadResumeI(&usbp->epc[i]->out_state->thread, MSG_RESET);
 676              		.loc 1 427 7 is_stmt 1 view .LVU223
 427:lib/chibios/os/hal/src/hal_usb.c ****         osalThreadResumeI(&usbp->epc[i]->out_state->thread, MSG_RESET);
 677              		.loc 1 427 23 is_stmt 0 view .LVU224
 678 002a 55F8043C 		ldr	r3, [r5, #-4]
 679 002e 9869     		ldr	r0, [r3, #24]
 427:lib/chibios/os/hal/src/hal_usb.c ****         osalThreadResumeI(&usbp->epc[i]->out_state->thread, MSG_RESET);
 680              		.loc 1 427 10 view .LVU225
 681 0030 20B1     		cbz	r0, .L33
 428:lib/chibios/os/hal/src/hal_usb.c ****       }
 682              		.loc 1 428 9 is_stmt 1 view .LVU226
 683              	.LVL44:
 684              	.LBB332:
 685              	.LBI332:
 837:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 686              		.loc 2 837 20 view .LVU227
 687              	.LBB333:
 688              		.loc 2 839 3 view .LVU228
 689 0032 6FF00101 		mvn	r1, #1
 690 0036 0C30     		adds	r0, r0, #12
 691              	.LVL45:
 692              		.loc 2 839 3 is_stmt 0 view .LVU229
 693 0038 FFF7FEFF 		bl	chThdResumeI
 694              	.LVL46:
 695              	.L33:
 696              		.loc 2 839 3 view .LVU230
 697              	.LBE333:
 698              	.LBE332:
 699              		.loc 1 432 5 is_stmt 1 discriminator 2 view .LVU231
 420:lib/chibios/os/hal/src/hal_usb.c **** #if USB_USE_WAIT == TRUE
 700              		.loc 1 420 17 is_stmt 0 discriminator 2 view .LVU232
 701 003c B542     		cmp	r5, r6
 702              		.loc 1 432 18 discriminator 2 view .LVU233
 703 003e 45F8047C 		str	r7, [r5, #-4]
 420:lib/chibios/os/hal/src/hal_usb.c **** #if USB_USE_WAIT == TRUE
 704              		.loc 1 420 50 is_stmt 1 discriminator 2 view .LVU234
 420:lib/chibios/os/hal/src/hal_usb.c **** #if USB_USE_WAIT == TRUE
 705              		.loc 1 420 17 discriminator 2 view .LVU235
 706 0042 E8D1     		bne	.L36
 433:lib/chibios/os/hal/src/hal_usb.c ****   }
 434:lib/chibios/os/hal/src/hal_usb.c **** 
 435:lib/chibios/os/hal/src/hal_usb.c ****   /* Low level endpoints deactivation.*/
 436:lib/chibios/os/hal/src/hal_usb.c ****   usb_lld_disable_endpoints(usbp);
 707              		.loc 1 436 3 view .LVU236
 708 0044 2046     		mov	r0, r4
 437:lib/chibios/os/hal/src/hal_usb.c **** }
 709              		.loc 1 437 1 is_stmt 0 view .LVU237
 710 0046 BDE8F840 		pop	{r3, r4, r5, r6, r7, lr}
 711              		.cfi_restore 14
 712              		.cfi_restore 7
 713              		.cfi_restore 6
 714              		.cfi_restore 5
 715              		.cfi_restore 4
 716              		.cfi_restore 3
 717              		.cfi_def_cfa_offset 0
 718              	.LVL47:
 436:lib/chibios/os/hal/src/hal_usb.c **** }
 719              		.loc 1 436 3 view .LVU238
 720 004a FFF7FEBF 		b	usb_lld_disable_endpoints
 721              	.LVL48:
 436:lib/chibios/os/hal/src/hal_usb.c **** }
 722              		.loc 1 436 3 view .LVU239
 723              		.cfi_endproc
 724              	.LFE336:
 726              		.section	.text.usbStartReceiveI,"ax",%progbits
 727              		.align	1
 728              		.global	usbStartReceiveI
 729              		.syntax unified
 730              		.thumb
 731              		.thumb_func
 732              		.fpu fpv4-sp-d16
 734              	usbStartReceiveI:
 735              	.LVL49:
 736              	.LFB337:
 438:lib/chibios/os/hal/src/hal_usb.c **** 
 439:lib/chibios/os/hal/src/hal_usb.c **** /**
 440:lib/chibios/os/hal/src/hal_usb.c ****  * @brief   Starts a receive transaction on an OUT endpoint.
 441:lib/chibios/os/hal/src/hal_usb.c ****  * @note    This function is meant to be called from ISR context outside
 442:lib/chibios/os/hal/src/hal_usb.c ****  *          critical zones because there is a potentially slow operation
 443:lib/chibios/os/hal/src/hal_usb.c ****  *          inside.
 444:lib/chibios/os/hal/src/hal_usb.c ****  *
 445:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] usbp      pointer to the @p USBDriver object
 446:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] ep        endpoint number
 447:lib/chibios/os/hal/src/hal_usb.c ****  * @param[out] buf      buffer where to copy the received data
 448:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] n         transaction size. It is recommended a multiple of
 449:lib/chibios/os/hal/src/hal_usb.c ****  *                      the packet size because the excess is discarded.
 450:lib/chibios/os/hal/src/hal_usb.c ****  *
 451:lib/chibios/os/hal/src/hal_usb.c ****  * @iclass
 452:lib/chibios/os/hal/src/hal_usb.c ****  */
 453:lib/chibios/os/hal/src/hal_usb.c **** void usbStartReceiveI(USBDriver *usbp, usbep_t ep,
 454:lib/chibios/os/hal/src/hal_usb.c ****                       uint8_t *buf, size_t n) {
 737              		.loc 1 454 47 is_stmt 1 view -0
 738              		.cfi_startproc
 739              		@ args = 0, pretend = 0, frame = 0
 740              		@ frame_needed = 0, uses_anonymous_args = 0
 741              		@ link register save eliminated.
 455:lib/chibios/os/hal/src/hal_usb.c ****   USBOutEndpointState *osp;
 742              		.loc 1 455 3 view .LVU241
 456:lib/chibios/os/hal/src/hal_usb.c **** 
 457:lib/chibios/os/hal/src/hal_usb.c ****   osalDbgCheckClassI();
 743              		.loc 1 457 23 view .LVU242
 458:lib/chibios/os/hal/src/hal_usb.c ****   osalDbgCheck((usbp != NULL) && (ep <= (usbep_t)USB_MAX_ENDPOINTS));
 744              		.loc 1 458 3 view .LVU243
 745              		.loc 1 458 3 view .LVU244
 746              		.loc 1 458 3 view .LVU245
 459:lib/chibios/os/hal/src/hal_usb.c ****   osalDbgAssert(!usbGetReceiveStatusI(usbp, ep), "already receiving");
 747              		.loc 1 459 3 view .LVU246
 748              		.loc 1 459 3 view .LVU247
 749              		.loc 1 459 3 view .LVU248
 460:lib/chibios/os/hal/src/hal_usb.c **** 
 461:lib/chibios/os/hal/src/hal_usb.c ****   /* Marking the endpoint as active.*/
 462:lib/chibios/os/hal/src/hal_usb.c ****   usbp->receiving |= (uint16_t)((unsigned)1U << (unsigned)ep);
 750              		.loc 1 462 3 view .LVU249
 454:lib/chibios/os/hal/src/hal_usb.c ****   USBOutEndpointState *osp;
 751              		.loc 1 454 47 is_stmt 0 view .LVU250
 752 0000 F0B4     		push	{r4, r5, r6, r7}
 753              		.cfi_def_cfa_offset 16
 754              		.cfi_offset 4, -16
 755              		.cfi_offset 5, -12
 756              		.cfi_offset 6, -8
 757              		.cfi_offset 7, -4
 463:lib/chibios/os/hal/src/hal_usb.c **** 
 464:lib/chibios/os/hal/src/hal_usb.c ****   /* Setting up the transfer.*/
 465:lib/chibios/os/hal/src/hal_usb.c ****   /*lint -save -e661 [18.1] pclint is confused by the check on ep.*/
 466:lib/chibios/os/hal/src/hal_usb.c ****   osp = usbp->epc[ep]->out_state;
 758              		.loc 1 466 18 view .LVU251
 759 0002 00EB8104 		add	r4, r0, r1, lsl #2
 462:lib/chibios/os/hal/src/hal_usb.c **** 
 760              		.loc 1 462 19 view .LVU252
 761 0006 4789     		ldrh	r7, [r0, #10]
 762              		.loc 1 466 7 view .LVU253
 763 0008 E468     		ldr	r4, [r4, #12]
 462:lib/chibios/os/hal/src/hal_usb.c **** 
 764              		.loc 1 462 46 view .LVU254
 765 000a 0125     		movs	r5, #1
 766              		.loc 1 466 7 view .LVU255
 767 000c A469     		ldr	r4, [r4, #24]
 462:lib/chibios/os/hal/src/hal_usb.c **** 
 768              		.loc 1 462 46 view .LVU256
 769 000e 8D40     		lsls	r5, r5, r1
 462:lib/chibios/os/hal/src/hal_usb.c **** 
 770              		.loc 1 462 19 view .LVU257
 771 0010 3D43     		orrs	r5, r5, r7
 772 0012 4581     		strh	r5, [r0, #10]	@ movhi
 773              		.loc 1 466 3 is_stmt 1 view .LVU258
 774              	.LVL50:
 467:lib/chibios/os/hal/src/hal_usb.c ****   /*lint -restore*/
 468:lib/chibios/os/hal/src/hal_usb.c ****   osp->rxbuf  = buf;
 775              		.loc 1 468 3 view .LVU259
 469:lib/chibios/os/hal/src/hal_usb.c ****   osp->rxsize = n;
 776              		.loc 1 469 15 is_stmt 0 view .LVU260
 777 0014 2360     		str	r3, [r4]
 470:lib/chibios/os/hal/src/hal_usb.c ****   osp->rxcnt  = 0;
 778              		.loc 1 470 15 view .LVU261
 779 0016 0023     		movs	r3, #0
 780              	.LVL51:
 468:lib/chibios/os/hal/src/hal_usb.c ****   osp->rxsize = n;
 781              		.loc 1 468 15 view .LVU262
 782 0018 A260     		str	r2, [r4, #8]
 469:lib/chibios/os/hal/src/hal_usb.c ****   osp->rxsize = n;
 783              		.loc 1 469 3 is_stmt 1 view .LVU263
 784              		.loc 1 470 3 view .LVU264
 785              		.loc 1 470 15 is_stmt 0 view .LVU265
 786 001a 6360     		str	r3, [r4, #4]
 471:lib/chibios/os/hal/src/hal_usb.c **** #if USB_USE_WAIT == TRUE
 472:lib/chibios/os/hal/src/hal_usb.c ****   osp->thread = NULL;
 787              		.loc 1 472 3 is_stmt 1 view .LVU266
 788              		.loc 1 472 15 is_stmt 0 view .LVU267
 789 001c E360     		str	r3, [r4, #12]
 473:lib/chibios/os/hal/src/hal_usb.c **** #endif
 474:lib/chibios/os/hal/src/hal_usb.c **** 
 475:lib/chibios/os/hal/src/hal_usb.c ****   /* Starting transfer.*/
 476:lib/chibios/os/hal/src/hal_usb.c ****   usb_lld_start_out(usbp, ep);
 790              		.loc 1 476 3 is_stmt 1 view .LVU268
 477:lib/chibios/os/hal/src/hal_usb.c **** }
 791              		.loc 1 477 1 is_stmt 0 view .LVU269
 792 001e F0BC     		pop	{r4, r5, r6, r7}
 793              		.cfi_restore 7
 794              		.cfi_restore 6
 795              		.cfi_restore 5
 796              		.cfi_restore 4
 797              		.cfi_def_cfa_offset 0
 798              	.LVL52:
 476:lib/chibios/os/hal/src/hal_usb.c **** }
 799              		.loc 1 476 3 view .LVU270
 800 0020 FFF7FEBF 		b	usb_lld_start_out
 801              	.LVL53:
 476:lib/chibios/os/hal/src/hal_usb.c **** }
 802              		.loc 1 476 3 view .LVU271
 803              		.cfi_endproc
 804              	.LFE337:
 806              		.section	.text.usbStartTransmitI,"ax",%progbits
 807              		.align	1
 808              		.global	usbStartTransmitI
 809              		.syntax unified
 810              		.thumb
 811              		.thumb_func
 812              		.fpu fpv4-sp-d16
 814              	usbStartTransmitI:
 815              	.LVL54:
 816              	.LFB338:
 478:lib/chibios/os/hal/src/hal_usb.c **** 
 479:lib/chibios/os/hal/src/hal_usb.c **** /**
 480:lib/chibios/os/hal/src/hal_usb.c ****  * @brief   Starts a transmit transaction on an IN endpoint.
 481:lib/chibios/os/hal/src/hal_usb.c ****  * @note    This function is meant to be called from ISR context outside
 482:lib/chibios/os/hal/src/hal_usb.c ****  *          critical zones because there is a potentially slow operation
 483:lib/chibios/os/hal/src/hal_usb.c ****  *          inside.
 484:lib/chibios/os/hal/src/hal_usb.c ****  *
 485:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] usbp      pointer to the @p USBDriver object
 486:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] ep        endpoint number
 487:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] buf       buffer where to fetch the data to be transmitted
 488:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] n         transaction size
 489:lib/chibios/os/hal/src/hal_usb.c ****  *
 490:lib/chibios/os/hal/src/hal_usb.c ****  * @iclass
 491:lib/chibios/os/hal/src/hal_usb.c ****  */
 492:lib/chibios/os/hal/src/hal_usb.c **** void usbStartTransmitI(USBDriver *usbp, usbep_t ep,
 493:lib/chibios/os/hal/src/hal_usb.c ****                        const uint8_t *buf, size_t n) {
 817              		.loc 1 493 54 is_stmt 1 view -0
 818              		.cfi_startproc
 819              		@ args = 0, pretend = 0, frame = 0
 820              		@ frame_needed = 0, uses_anonymous_args = 0
 821              		@ link register save eliminated.
 494:lib/chibios/os/hal/src/hal_usb.c ****   USBInEndpointState *isp;
 822              		.loc 1 494 3 view .LVU273
 495:lib/chibios/os/hal/src/hal_usb.c **** 
 496:lib/chibios/os/hal/src/hal_usb.c ****   osalDbgCheckClassI();
 823              		.loc 1 496 23 view .LVU274
 497:lib/chibios/os/hal/src/hal_usb.c ****   osalDbgCheck((usbp != NULL) && (ep <= (usbep_t)USB_MAX_ENDPOINTS));
 824              		.loc 1 497 3 view .LVU275
 825              		.loc 1 497 3 view .LVU276
 826              		.loc 1 497 3 view .LVU277
 498:lib/chibios/os/hal/src/hal_usb.c ****   osalDbgAssert(!usbGetTransmitStatusI(usbp, ep), "already transmitting");
 827              		.loc 1 498 3 view .LVU278
 828              		.loc 1 498 3 view .LVU279
 829              		.loc 1 498 3 view .LVU280
 499:lib/chibios/os/hal/src/hal_usb.c **** 
 500:lib/chibios/os/hal/src/hal_usb.c ****   /* Marking the endpoint as active.*/
 501:lib/chibios/os/hal/src/hal_usb.c ****   usbp->transmitting |= (uint16_t)((unsigned)1U << (unsigned)ep);
 830              		.loc 1 501 3 view .LVU281
 493:lib/chibios/os/hal/src/hal_usb.c ****   USBInEndpointState *isp;
 831              		.loc 1 493 54 is_stmt 0 view .LVU282
 832 0000 F0B4     		push	{r4, r5, r6, r7}
 833              		.cfi_def_cfa_offset 16
 834              		.cfi_offset 4, -16
 835              		.cfi_offset 5, -12
 836              		.cfi_offset 6, -8
 837              		.cfi_offset 7, -4
 502:lib/chibios/os/hal/src/hal_usb.c **** 
 503:lib/chibios/os/hal/src/hal_usb.c ****   /* Setting up the transfer.*/
 504:lib/chibios/os/hal/src/hal_usb.c ****   /*lint -save -e661 [18.1] pclint is confused by the check on ep.*/
 505:lib/chibios/os/hal/src/hal_usb.c ****   isp = usbp->epc[ep]->in_state;
 838              		.loc 1 505 18 view .LVU283
 839 0002 00EB8104 		add	r4, r0, r1, lsl #2
 501:lib/chibios/os/hal/src/hal_usb.c **** 
 840              		.loc 1 501 22 view .LVU284
 841 0006 0789     		ldrh	r7, [r0, #8]
 842              		.loc 1 505 7 view .LVU285
 843 0008 E468     		ldr	r4, [r4, #12]
 501:lib/chibios/os/hal/src/hal_usb.c **** 
 844              		.loc 1 501 49 view .LVU286
 845 000a 0125     		movs	r5, #1
 846              		.loc 1 505 7 view .LVU287
 847 000c 6469     		ldr	r4, [r4, #20]
 501:lib/chibios/os/hal/src/hal_usb.c **** 
 848              		.loc 1 501 49 view .LVU288
 849 000e 8D40     		lsls	r5, r5, r1
 501:lib/chibios/os/hal/src/hal_usb.c **** 
 850              		.loc 1 501 22 view .LVU289
 851 0010 3D43     		orrs	r5, r5, r7
 852 0012 0581     		strh	r5, [r0, #8]	@ movhi
 853              		.loc 1 505 3 is_stmt 1 view .LVU290
 854              	.LVL55:
 506:lib/chibios/os/hal/src/hal_usb.c ****   /*lint -restore*/
 507:lib/chibios/os/hal/src/hal_usb.c ****   isp->txbuf  = buf;
 855              		.loc 1 507 3 view .LVU291
 508:lib/chibios/os/hal/src/hal_usb.c ****   isp->txsize = n;
 856              		.loc 1 508 15 is_stmt 0 view .LVU292
 857 0014 2360     		str	r3, [r4]
 509:lib/chibios/os/hal/src/hal_usb.c ****   isp->txcnt  = 0;
 858              		.loc 1 509 15 view .LVU293
 859 0016 0023     		movs	r3, #0
 860              	.LVL56:
 507:lib/chibios/os/hal/src/hal_usb.c ****   isp->txsize = n;
 861              		.loc 1 507 15 view .LVU294
 862 0018 A260     		str	r2, [r4, #8]
 508:lib/chibios/os/hal/src/hal_usb.c ****   isp->txsize = n;
 863              		.loc 1 508 3 is_stmt 1 view .LVU295
 864              		.loc 1 509 3 view .LVU296
 865              		.loc 1 509 15 is_stmt 0 view .LVU297
 866 001a 6360     		str	r3, [r4, #4]
 510:lib/chibios/os/hal/src/hal_usb.c **** #if USB_USE_WAIT == TRUE
 511:lib/chibios/os/hal/src/hal_usb.c ****   isp->thread = NULL;
 867              		.loc 1 511 3 is_stmt 1 view .LVU298
 868              		.loc 1 511 15 is_stmt 0 view .LVU299
 869 001c E360     		str	r3, [r4, #12]
 512:lib/chibios/os/hal/src/hal_usb.c **** #endif
 513:lib/chibios/os/hal/src/hal_usb.c **** 
 514:lib/chibios/os/hal/src/hal_usb.c ****   /* Starting transfer.*/
 515:lib/chibios/os/hal/src/hal_usb.c ****   usb_lld_start_in(usbp, ep);
 870              		.loc 1 515 3 is_stmt 1 view .LVU300
 516:lib/chibios/os/hal/src/hal_usb.c **** }
 871              		.loc 1 516 1 is_stmt 0 view .LVU301
 872 001e F0BC     		pop	{r4, r5, r6, r7}
 873              		.cfi_restore 7
 874              		.cfi_restore 6
 875              		.cfi_restore 5
 876              		.cfi_restore 4
 877              		.cfi_def_cfa_offset 0
 878              	.LVL57:
 515:lib/chibios/os/hal/src/hal_usb.c **** }
 879              		.loc 1 515 3 view .LVU302
 880 0020 FFF7FEBF 		b	usb_lld_start_in
 881              	.LVL58:
 515:lib/chibios/os/hal/src/hal_usb.c **** }
 882              		.loc 1 515 3 view .LVU303
 883              		.cfi_endproc
 884              	.LFE338:
 886              		.section	.text.usbReceive,"ax",%progbits
 887              		.align	1
 888              		.global	usbReceive
 889              		.syntax unified
 890              		.thumb
 891              		.thumb_func
 892              		.fpu fpv4-sp-d16
 894              	usbReceive:
 895              	.LVL59:
 896              	.LFB339:
 517:lib/chibios/os/hal/src/hal_usb.c **** 
 518:lib/chibios/os/hal/src/hal_usb.c **** #if (USB_USE_WAIT == TRUE) || defined(__DOXYGEN__)
 519:lib/chibios/os/hal/src/hal_usb.c **** /**
 520:lib/chibios/os/hal/src/hal_usb.c ****  * @brief   Performs a receive transaction on an OUT endpoint.
 521:lib/chibios/os/hal/src/hal_usb.c ****  *
 522:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] usbp      pointer to the @p USBDriver object
 523:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] ep        endpoint number
 524:lib/chibios/os/hal/src/hal_usb.c ****  * @param[out] buf      buffer where to copy the received data
 525:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] n         transaction size. It is recommended a multiple of
 526:lib/chibios/os/hal/src/hal_usb.c ****  *                      the packet size because the excess is discarded.
 527:lib/chibios/os/hal/src/hal_usb.c ****  *
 528:lib/chibios/os/hal/src/hal_usb.c ****  * @return              The received effective data size, it can be less than
 529:lib/chibios/os/hal/src/hal_usb.c ****  *                      the amount specified.
 530:lib/chibios/os/hal/src/hal_usb.c ****  * @retval MSG_RESET    driver not in @p USB_ACTIVE state or the operation
 531:lib/chibios/os/hal/src/hal_usb.c ****  *                      has been aborted by an USB reset or a transition to
 532:lib/chibios/os/hal/src/hal_usb.c ****  *                      the @p USB_SUSPENDED state.
 533:lib/chibios/os/hal/src/hal_usb.c ****  *
 534:lib/chibios/os/hal/src/hal_usb.c ****  * @api
 535:lib/chibios/os/hal/src/hal_usb.c ****  */
 536:lib/chibios/os/hal/src/hal_usb.c **** msg_t usbReceive(USBDriver *usbp, usbep_t ep, uint8_t *buf, size_t n) {
 897              		.loc 1 536 71 is_stmt 1 view -0
 898              		.cfi_startproc
 899              		@ args = 0, pretend = 0, frame = 0
 900              		@ frame_needed = 0, uses_anonymous_args = 0
 537:lib/chibios/os/hal/src/hal_usb.c ****   msg_t msg;
 901              		.loc 1 537 3 view .LVU305
 538:lib/chibios/os/hal/src/hal_usb.c **** 
 539:lib/chibios/os/hal/src/hal_usb.c ****   osalSysLock();
 902              		.loc 1 539 3 view .LVU306
 903              	.LBB353:
 904              	.LBI353:
 573:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 905              		.loc 2 573 20 view .LVU307
 575:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 906              		.loc 2 575 3 view .LVU308
 907              	.LBB354:
 908              	.LBI354:
 355:./lib/chibios/os/rt/include/chsys.h **** 
 909              		.loc 3 355 20 view .LVU309
 357:./lib/chibios/os/rt/include/chsys.h ****   _stats_start_measure_crit_thd();
 910              		.loc 3 357 3 view .LVU310
 911              	.LBB355:
 912              	.LBI355:
 669:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 913              		.loc 4 669 27 view .LVU311
 677:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if defined(__CM7_REV)
 914              		.loc 4 677 3 view .LVU312
 915              	.LBB356:
 916              	.LBI356:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 917              		.loc 5 491 27 view .LVU313
 918              	.LBB357:
 919              		.loc 5 493 3 view .LVU314
 920              	.LBE357:
 921              	.LBE356:
 922              	.LBE355:
 923              	.LBE354:
 924              	.LBE353:
 536:lib/chibios/os/hal/src/hal_usb.c ****   msg_t msg;
 925              		.loc 1 536 71 is_stmt 0 view .LVU315
 926 0000 70B5     		push	{r4, r5, r6, lr}
 927              		.cfi_def_cfa_offset 16
 928              		.cfi_offset 4, -16
 929              		.cfi_offset 5, -12
 930              		.cfi_offset 6, -8
 931              		.cfi_offset 14, -4
 536:lib/chibios/os/hal/src/hal_usb.c ****   msg_t msg;
 932              		.loc 1 536 71 view .LVU316
 933 0002 0446     		mov	r4, r0
 934 0004 0D46     		mov	r5, r1
 935              	.LBB362:
 936              	.LBB361:
 937              	.LBB360:
 938              	.LBB359:
 939              	.LBB358:
 940              		.loc 5 493 3 view .LVU317
 941 0006 2026     		movs	r6, #32
 942              		.syntax unified
 943              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 944 0008 86F31188 		MSR basepri, r6
 945              	@ 0 "" 2
 946              	.LVL60:
 947              		.loc 5 493 3 view .LVU318
 948              		.thumb
 949              		.syntax unified
 950              	.LBE358:
 951              	.LBE359:
 952              	.LBE360:
 358:./lib/chibios/os/rt/include/chsys.h ****   _dbg_check_lock();
 953              		.loc 3 358 34 is_stmt 1 view .LVU319
 359:./lib/chibios/os/rt/include/chsys.h **** }
 954              		.loc 3 359 20 view .LVU320
 955              	.LBE361:
 956              	.LBE362:
 540:lib/chibios/os/hal/src/hal_usb.c **** 
 541:lib/chibios/os/hal/src/hal_usb.c ****   if (usbGetDriverStateI(usbp) != USB_ACTIVE) {
 957              		.loc 1 541 3 view .LVU321
 958              		.loc 1 541 6 is_stmt 0 view .LVU322
 959 000c 0678     		ldrb	r6, [r0]	@ zero_extendqisi2
 960 000e 042E     		cmp	r6, #4
 961 0010 05D0     		beq	.L47
 542:lib/chibios/os/hal/src/hal_usb.c ****     osalSysUnlock();
 962              		.loc 1 542 5 is_stmt 1 view .LVU323
 963              	.LBB363:
 964              	.LBI363:
 584:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 965              		.loc 2 584 20 view .LVU324
 586:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 966              		.loc 2 586 3 view .LVU325
 967              	.LBB364:
 968              	.LBI364:
 367:./lib/chibios/os/rt/include/chsys.h **** 
 969              		.loc 3 367 20 view .LVU326
 970              	.LBB365:
 369:./lib/chibios/os/rt/include/chsys.h ****   _stats_stop_measure_crit_thd();
 971              		.loc 3 369 22 view .LVU327
 370:./lib/chibios/os/rt/include/chsys.h **** 
 972              		.loc 3 370 33 view .LVU328
 376:./lib/chibios/os/rt/include/chsys.h ****               (ch.rlist.current->hdr.pqueue.prio >= ch.rlist.pqueue.next->prio),
 973              		.loc 3 376 3 view .LVU329
 376:./lib/chibios/os/rt/include/chsys.h ****               (ch.rlist.current->hdr.pqueue.prio >= ch.rlist.pqueue.next->prio),
 974              		.loc 3 376 3 view .LVU330
 376:./lib/chibios/os/rt/include/chsys.h ****               (ch.rlist.current->hdr.pqueue.prio >= ch.rlist.pqueue.next->prio),
 975              		.loc 3 376 3 view .LVU331
 976              		.loc 3 380 3 view .LVU332
 977              	.LBB366:
 978              	.LBI366:
 693:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 979              		.loc 4 693 27 view .LVU333
 980              		.loc 4 696 3 view .LVU334
 981              	.LVL61:
 982              	.LBB367:
 983              	.LBI367:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 984              		.loc 5 491 27 view .LVU335
 985              	.LBB368:
 986              		.loc 5 493 3 view .LVU336
 987 0012 0023     		movs	r3, #0
 988              	.LVL62:
 989              		.loc 5 493 3 is_stmt 0 view .LVU337
 990              		.syntax unified
 991              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 992 0014 83F31188 		MSR basepri, r3
 993              	@ 0 "" 2
 994              	.LVL63:
 995              		.loc 5 493 3 view .LVU338
 996              		.thumb
 997              		.syntax unified
 998              	.LBE368:
 999              	.LBE367:
 1000              	.LBE366:
 1001              	.LBE365:
 1002              	.LBE364:
 1003              	.LBE363:
 543:lib/chibios/os/hal/src/hal_usb.c ****     return MSG_RESET;
 1004              		.loc 1 543 5 is_stmt 1 view .LVU339
 1005              		.loc 1 543 12 is_stmt 0 view .LVU340
 1006 0018 6FF00100 		mvn	r0, #1
 1007              	.LVL64:
 1008              	.L46:
 544:lib/chibios/os/hal/src/hal_usb.c ****   }
 545:lib/chibios/os/hal/src/hal_usb.c **** 
 546:lib/chibios/os/hal/src/hal_usb.c ****   usbStartReceiveI(usbp, ep, buf, n);
 547:lib/chibios/os/hal/src/hal_usb.c ****   msg = osalThreadSuspendS(&usbp->epc[ep]->out_state->thread);
 548:lib/chibios/os/hal/src/hal_usb.c ****   osalSysUnlock();
 549:lib/chibios/os/hal/src/hal_usb.c **** 
 550:lib/chibios/os/hal/src/hal_usb.c ****   return msg;
 551:lib/chibios/os/hal/src/hal_usb.c **** }
 1009              		.loc 1 551 1 view .LVU341
 1010 001c 70BD     		pop	{r4, r5, r6, pc}
 1011              	.LVL65:
 1012              	.L47:
 546:lib/chibios/os/hal/src/hal_usb.c ****   msg = osalThreadSuspendS(&usbp->epc[ep]->out_state->thread);
 1013              		.loc 1 546 3 is_stmt 1 view .LVU342
 1014 001e FFF7FEFF 		bl	usbStartReceiveI
 1015              	.LVL66:
 547:lib/chibios/os/hal/src/hal_usb.c ****   osalSysUnlock();
 1016              		.loc 1 547 3 view .LVU343
 1017              	.LBB369:
 1018              	.LBI369:
 797:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 1019              		.loc 2 797 21 view .LVU344
 1020              	.LBB370:
 799:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 1021              		.loc 2 799 3 view .LVU345
 1022              	.LBE370:
 1023              	.LBE369:
 547:lib/chibios/os/hal/src/hal_usb.c ****   osalSysUnlock();
 1024              		.loc 1 547 38 is_stmt 0 view .LVU346
 1025 0022 04EB8501 		add	r1, r4, r5, lsl #2
 547:lib/chibios/os/hal/src/hal_usb.c ****   osalSysUnlock();
 1026              		.loc 1 547 42 view .LVU347
 1027 0026 CB68     		ldr	r3, [r1, #12]
 547:lib/chibios/os/hal/src/hal_usb.c ****   osalSysUnlock();
 1028              		.loc 1 547 9 view .LVU348
 1029 0028 9869     		ldr	r0, [r3, #24]
 1030              	.LBB372:
 1031              	.LBB371:
 799:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 1032              		.loc 2 799 10 view .LVU349
 1033 002a 4FF0FF31 		mov	r1, #-1
 1034 002e 0C30     		adds	r0, r0, #12
 1035 0030 FFF7FEFF 		bl	chThdSuspendTimeoutS
 1036              	.LVL67:
 799:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 1037              		.loc 2 799 10 view .LVU350
 1038              	.LBE371:
 1039              	.LBE372:
 548:lib/chibios/os/hal/src/hal_usb.c **** 
 1040              		.loc 1 548 3 is_stmt 1 view .LVU351
 1041              	.LBB373:
 1042              	.LBI373:
 584:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 1043              		.loc 2 584 20 view .LVU352
 586:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 1044              		.loc 2 586 3 view .LVU353
 1045              	.LBB374:
 1046              	.LBI374:
 367:./lib/chibios/os/rt/include/chsys.h **** 
 1047              		.loc 3 367 20 view .LVU354
 1048              	.LBB375:
 369:./lib/chibios/os/rt/include/chsys.h ****   _stats_stop_measure_crit_thd();
 1049              		.loc 3 369 22 view .LVU355
 370:./lib/chibios/os/rt/include/chsys.h **** 
 1050              		.loc 3 370 33 view .LVU356
 376:./lib/chibios/os/rt/include/chsys.h ****               (ch.rlist.current->hdr.pqueue.prio >= ch.rlist.pqueue.next->prio),
 1051              		.loc 3 376 3 view .LVU357
 376:./lib/chibios/os/rt/include/chsys.h ****               (ch.rlist.current->hdr.pqueue.prio >= ch.rlist.pqueue.next->prio),
 1052              		.loc 3 376 3 view .LVU358
 376:./lib/chibios/os/rt/include/chsys.h ****               (ch.rlist.current->hdr.pqueue.prio >= ch.rlist.pqueue.next->prio),
 1053              		.loc 3 376 3 view .LVU359
 1054              		.loc 3 380 3 view .LVU360
 1055              	.LBB376:
 1056              	.LBI376:
 693:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 1057              		.loc 4 693 27 view .LVU361
 1058              		.loc 4 696 3 view .LVU362
 1059              	.LBB377:
 1060              	.LBI377:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 1061              		.loc 5 491 27 view .LVU363
 1062              	.LBB378:
 1063              		.loc 5 493 3 view .LVU364
 1064 0034 0023     		movs	r3, #0
 1065              		.syntax unified
 1066              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 1067 0036 83F31188 		MSR basepri, r3
 1068              	@ 0 "" 2
 1069              	.LVL68:
 1070              		.loc 5 493 3 is_stmt 0 view .LVU365
 1071              		.thumb
 1072              		.syntax unified
 1073              	.LBE378:
 1074              	.LBE377:
 1075              	.LBE376:
 1076              	.LBE375:
 1077              	.LBE374:
 1078              	.LBE373:
 550:lib/chibios/os/hal/src/hal_usb.c **** }
 1079              		.loc 1 550 3 is_stmt 1 view .LVU366
 550:lib/chibios/os/hal/src/hal_usb.c **** }
 1080              		.loc 1 550 10 is_stmt 0 view .LVU367
 1081 003a EFE7     		b	.L46
 1082              		.cfi_endproc
 1083              	.LFE339:
 1085              		.section	.text.usbTransmit,"ax",%progbits
 1086              		.align	1
 1087              		.global	usbTransmit
 1088              		.syntax unified
 1089              		.thumb
 1090              		.thumb_func
 1091              		.fpu fpv4-sp-d16
 1093              	usbTransmit:
 1094              	.LVL69:
 1095              	.LFB340:
 552:lib/chibios/os/hal/src/hal_usb.c **** 
 553:lib/chibios/os/hal/src/hal_usb.c **** /**
 554:lib/chibios/os/hal/src/hal_usb.c ****  * @brief   Performs a transmit transaction on an IN endpoint.
 555:lib/chibios/os/hal/src/hal_usb.c ****  *
 556:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] usbp      pointer to the @p USBDriver object
 557:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] ep        endpoint number
 558:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] buf       buffer where to fetch the data to be transmitted
 559:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] n         transaction size
 560:lib/chibios/os/hal/src/hal_usb.c ****  *
 561:lib/chibios/os/hal/src/hal_usb.c ****  * @return              The operation status.
 562:lib/chibios/os/hal/src/hal_usb.c ****  * @retval MSG_OK       operation performed successfully.
 563:lib/chibios/os/hal/src/hal_usb.c ****  * @retval MSG_RESET    driver not in @p USB_ACTIVE state or the operation
 564:lib/chibios/os/hal/src/hal_usb.c ****  *                      has been aborted by an USB reset or a transition to
 565:lib/chibios/os/hal/src/hal_usb.c ****  *                      the @p USB_SUSPENDED state.
 566:lib/chibios/os/hal/src/hal_usb.c ****  *
 567:lib/chibios/os/hal/src/hal_usb.c ****  * @api
 568:lib/chibios/os/hal/src/hal_usb.c ****  */
 569:lib/chibios/os/hal/src/hal_usb.c **** msg_t usbTransmit(USBDriver *usbp, usbep_t ep, const uint8_t *buf, size_t n) {
 1096              		.loc 1 569 78 is_stmt 1 view -0
 1097              		.cfi_startproc
 1098              		@ args = 0, pretend = 0, frame = 0
 1099              		@ frame_needed = 0, uses_anonymous_args = 0
 570:lib/chibios/os/hal/src/hal_usb.c ****   msg_t msg;
 1100              		.loc 1 570 3 view .LVU369
 571:lib/chibios/os/hal/src/hal_usb.c **** 
 572:lib/chibios/os/hal/src/hal_usb.c ****   osalSysLock();
 1101              		.loc 1 572 3 view .LVU370
 1102              	.LBB398:
 1103              	.LBI398:
 573:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 1104              		.loc 2 573 20 view .LVU371
 575:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 1105              		.loc 2 575 3 view .LVU372
 1106              	.LBB399:
 1107              	.LBI399:
 355:./lib/chibios/os/rt/include/chsys.h **** 
 1108              		.loc 3 355 20 view .LVU373
 357:./lib/chibios/os/rt/include/chsys.h ****   _stats_start_measure_crit_thd();
 1109              		.loc 3 357 3 view .LVU374
 1110              	.LBB400:
 1111              	.LBI400:
 669:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 1112              		.loc 4 669 27 view .LVU375
 677:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if defined(__CM7_REV)
 1113              		.loc 4 677 3 view .LVU376
 1114              	.LBB401:
 1115              	.LBI401:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 1116              		.loc 5 491 27 view .LVU377
 1117              	.LBB402:
 1118              		.loc 5 493 3 view .LVU378
 1119              	.LBE402:
 1120              	.LBE401:
 1121              	.LBE400:
 1122              	.LBE399:
 1123              	.LBE398:
 569:lib/chibios/os/hal/src/hal_usb.c ****   msg_t msg;
 1124              		.loc 1 569 78 is_stmt 0 view .LVU379
 1125 0000 70B5     		push	{r4, r5, r6, lr}
 1126              		.cfi_def_cfa_offset 16
 1127              		.cfi_offset 4, -16
 1128              		.cfi_offset 5, -12
 1129              		.cfi_offset 6, -8
 1130              		.cfi_offset 14, -4
 569:lib/chibios/os/hal/src/hal_usb.c ****   msg_t msg;
 1131              		.loc 1 569 78 view .LVU380
 1132 0002 0446     		mov	r4, r0
 1133 0004 0D46     		mov	r5, r1
 1134              	.LBB407:
 1135              	.LBB406:
 1136              	.LBB405:
 1137              	.LBB404:
 1138              	.LBB403:
 1139              		.loc 5 493 3 view .LVU381
 1140 0006 2026     		movs	r6, #32
 1141              		.syntax unified
 1142              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 1143 0008 86F31188 		MSR basepri, r6
 1144              	@ 0 "" 2
 1145              	.LVL70:
 1146              		.loc 5 493 3 view .LVU382
 1147              		.thumb
 1148              		.syntax unified
 1149              	.LBE403:
 1150              	.LBE404:
 1151              	.LBE405:
 358:./lib/chibios/os/rt/include/chsys.h ****   _dbg_check_lock();
 1152              		.loc 3 358 34 is_stmt 1 view .LVU383
 359:./lib/chibios/os/rt/include/chsys.h **** }
 1153              		.loc 3 359 20 view .LVU384
 1154              	.LBE406:
 1155              	.LBE407:
 573:lib/chibios/os/hal/src/hal_usb.c **** 
 574:lib/chibios/os/hal/src/hal_usb.c ****   if (usbGetDriverStateI(usbp) != USB_ACTIVE) {
 1156              		.loc 1 574 3 view .LVU385
 1157              		.loc 1 574 6 is_stmt 0 view .LVU386
 1158 000c 0678     		ldrb	r6, [r0]	@ zero_extendqisi2
 1159 000e 042E     		cmp	r6, #4
 1160 0010 05D0     		beq	.L50
 575:lib/chibios/os/hal/src/hal_usb.c ****     osalSysUnlock();
 1161              		.loc 1 575 5 is_stmt 1 view .LVU387
 1162              	.LBB408:
 1163              	.LBI408:
 584:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 1164              		.loc 2 584 20 view .LVU388
 586:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 1165              		.loc 2 586 3 view .LVU389
 1166              	.LBB409:
 1167              	.LBI409:
 367:./lib/chibios/os/rt/include/chsys.h **** 
 1168              		.loc 3 367 20 view .LVU390
 1169              	.LBB410:
 369:./lib/chibios/os/rt/include/chsys.h ****   _stats_stop_measure_crit_thd();
 1170              		.loc 3 369 22 view .LVU391
 370:./lib/chibios/os/rt/include/chsys.h **** 
 1171              		.loc 3 370 33 view .LVU392
 376:./lib/chibios/os/rt/include/chsys.h ****               (ch.rlist.current->hdr.pqueue.prio >= ch.rlist.pqueue.next->prio),
 1172              		.loc 3 376 3 view .LVU393
 376:./lib/chibios/os/rt/include/chsys.h ****               (ch.rlist.current->hdr.pqueue.prio >= ch.rlist.pqueue.next->prio),
 1173              		.loc 3 376 3 view .LVU394
 376:./lib/chibios/os/rt/include/chsys.h ****               (ch.rlist.current->hdr.pqueue.prio >= ch.rlist.pqueue.next->prio),
 1174              		.loc 3 376 3 view .LVU395
 1175              		.loc 3 380 3 view .LVU396
 1176              	.LBB411:
 1177              	.LBI411:
 693:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 1178              		.loc 4 693 27 view .LVU397
 1179              		.loc 4 696 3 view .LVU398
 1180              	.LVL71:
 1181              	.LBB412:
 1182              	.LBI412:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 1183              		.loc 5 491 27 view .LVU399
 1184              	.LBB413:
 1185              		.loc 5 493 3 view .LVU400
 1186 0012 0023     		movs	r3, #0
 1187              	.LVL72:
 1188              		.loc 5 493 3 is_stmt 0 view .LVU401
 1189              		.syntax unified
 1190              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 1191 0014 83F31188 		MSR basepri, r3
 1192              	@ 0 "" 2
 1193              	.LVL73:
 1194              		.loc 5 493 3 view .LVU402
 1195              		.thumb
 1196              		.syntax unified
 1197              	.LBE413:
 1198              	.LBE412:
 1199              	.LBE411:
 1200              	.LBE410:
 1201              	.LBE409:
 1202              	.LBE408:
 576:lib/chibios/os/hal/src/hal_usb.c ****     return MSG_RESET;
 1203              		.loc 1 576 5 is_stmt 1 view .LVU403
 1204              		.loc 1 576 12 is_stmt 0 view .LVU404
 1205 0018 6FF00100 		mvn	r0, #1
 1206              	.LVL74:
 1207              	.L49:
 577:lib/chibios/os/hal/src/hal_usb.c ****   }
 578:lib/chibios/os/hal/src/hal_usb.c **** 
 579:lib/chibios/os/hal/src/hal_usb.c ****   usbStartTransmitI(usbp, ep, buf, n);
 580:lib/chibios/os/hal/src/hal_usb.c ****   msg = osalThreadSuspendS(&usbp->epc[ep]->in_state->thread);
 581:lib/chibios/os/hal/src/hal_usb.c ****   osalSysUnlock();
 582:lib/chibios/os/hal/src/hal_usb.c **** 
 583:lib/chibios/os/hal/src/hal_usb.c ****   return msg;
 584:lib/chibios/os/hal/src/hal_usb.c **** }
 1208              		.loc 1 584 1 view .LVU405
 1209 001c 70BD     		pop	{r4, r5, r6, pc}
 1210              	.LVL75:
 1211              	.L50:
 579:lib/chibios/os/hal/src/hal_usb.c ****   msg = osalThreadSuspendS(&usbp->epc[ep]->in_state->thread);
 1212              		.loc 1 579 3 is_stmt 1 view .LVU406
 1213 001e FFF7FEFF 		bl	usbStartTransmitI
 1214              	.LVL76:
 580:lib/chibios/os/hal/src/hal_usb.c ****   osalSysUnlock();
 1215              		.loc 1 580 3 view .LVU407
 1216              	.LBB414:
 1217              	.LBI414:
 797:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 1218              		.loc 2 797 21 view .LVU408
 1219              	.LBB415:
 799:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 1220              		.loc 2 799 3 view .LVU409
 1221              	.LBE415:
 1222              	.LBE414:
 580:lib/chibios/os/hal/src/hal_usb.c ****   osalSysUnlock();
 1223              		.loc 1 580 38 is_stmt 0 view .LVU410
 1224 0022 04EB8501 		add	r1, r4, r5, lsl #2
 580:lib/chibios/os/hal/src/hal_usb.c ****   osalSysUnlock();
 1225              		.loc 1 580 42 view .LVU411
 1226 0026 CB68     		ldr	r3, [r1, #12]
 580:lib/chibios/os/hal/src/hal_usb.c ****   osalSysUnlock();
 1227              		.loc 1 580 9 view .LVU412
 1228 0028 5869     		ldr	r0, [r3, #20]
 1229              	.LBB417:
 1230              	.LBB416:
 799:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 1231              		.loc 2 799 10 view .LVU413
 1232 002a 4FF0FF31 		mov	r1, #-1
 1233 002e 0C30     		adds	r0, r0, #12
 1234 0030 FFF7FEFF 		bl	chThdSuspendTimeoutS
 1235              	.LVL77:
 799:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 1236              		.loc 2 799 10 view .LVU414
 1237              	.LBE416:
 1238              	.LBE417:
 581:lib/chibios/os/hal/src/hal_usb.c **** 
 1239              		.loc 1 581 3 is_stmt 1 view .LVU415
 1240              	.LBB418:
 1241              	.LBI418:
 584:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 1242              		.loc 2 584 20 view .LVU416
 586:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 1243              		.loc 2 586 3 view .LVU417
 1244              	.LBB419:
 1245              	.LBI419:
 367:./lib/chibios/os/rt/include/chsys.h **** 
 1246              		.loc 3 367 20 view .LVU418
 1247              	.LBB420:
 369:./lib/chibios/os/rt/include/chsys.h ****   _stats_stop_measure_crit_thd();
 1248              		.loc 3 369 22 view .LVU419
 370:./lib/chibios/os/rt/include/chsys.h **** 
 1249              		.loc 3 370 33 view .LVU420
 376:./lib/chibios/os/rt/include/chsys.h ****               (ch.rlist.current->hdr.pqueue.prio >= ch.rlist.pqueue.next->prio),
 1250              		.loc 3 376 3 view .LVU421
 376:./lib/chibios/os/rt/include/chsys.h ****               (ch.rlist.current->hdr.pqueue.prio >= ch.rlist.pqueue.next->prio),
 1251              		.loc 3 376 3 view .LVU422
 376:./lib/chibios/os/rt/include/chsys.h ****               (ch.rlist.current->hdr.pqueue.prio >= ch.rlist.pqueue.next->prio),
 1252              		.loc 3 376 3 view .LVU423
 1253              		.loc 3 380 3 view .LVU424
 1254              	.LBB421:
 1255              	.LBI421:
 693:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 1256              		.loc 4 693 27 view .LVU425
 1257              		.loc 4 696 3 view .LVU426
 1258              	.LBB422:
 1259              	.LBI422:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 1260              		.loc 5 491 27 view .LVU427
 1261              	.LBB423:
 1262              		.loc 5 493 3 view .LVU428
 1263 0034 0023     		movs	r3, #0
 1264              		.syntax unified
 1265              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 1266 0036 83F31188 		MSR basepri, r3
 1267              	@ 0 "" 2
 1268              	.LVL78:
 1269              		.loc 5 493 3 is_stmt 0 view .LVU429
 1270              		.thumb
 1271              		.syntax unified
 1272              	.LBE423:
 1273              	.LBE422:
 1274              	.LBE421:
 1275              	.LBE420:
 1276              	.LBE419:
 1277              	.LBE418:
 583:lib/chibios/os/hal/src/hal_usb.c **** }
 1278              		.loc 1 583 3 is_stmt 1 view .LVU430
 583:lib/chibios/os/hal/src/hal_usb.c **** }
 1279              		.loc 1 583 10 is_stmt 0 view .LVU431
 1280 003a EFE7     		b	.L49
 1281              		.cfi_endproc
 1282              	.LFE340:
 1284              		.section	.text.usbStallReceiveI,"ax",%progbits
 1285              		.align	1
 1286              		.global	usbStallReceiveI
 1287              		.syntax unified
 1288              		.thumb
 1289              		.thumb_func
 1290              		.fpu fpv4-sp-d16
 1292              	usbStallReceiveI:
 1293              	.LVL79:
 1294              	.LFB341:
 585:lib/chibios/os/hal/src/hal_usb.c **** #endif /* USB_USE_WAIT == TRUE */
 586:lib/chibios/os/hal/src/hal_usb.c **** 
 587:lib/chibios/os/hal/src/hal_usb.c **** /**
 588:lib/chibios/os/hal/src/hal_usb.c ****  * @brief   Stalls an OUT endpoint.
 589:lib/chibios/os/hal/src/hal_usb.c ****  *
 590:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] usbp      pointer to the @p USBDriver object
 591:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] ep        endpoint number
 592:lib/chibios/os/hal/src/hal_usb.c ****  *
 593:lib/chibios/os/hal/src/hal_usb.c ****  * @return              The operation status.
 594:lib/chibios/os/hal/src/hal_usb.c ****  * @retval false        Endpoint stalled.
 595:lib/chibios/os/hal/src/hal_usb.c ****  * @retval true         Endpoint busy, not stalled.
 596:lib/chibios/os/hal/src/hal_usb.c ****  *
 597:lib/chibios/os/hal/src/hal_usb.c ****  * @iclass
 598:lib/chibios/os/hal/src/hal_usb.c ****  */
 599:lib/chibios/os/hal/src/hal_usb.c **** bool usbStallReceiveI(USBDriver *usbp, usbep_t ep) {
 1295              		.loc 1 599 52 is_stmt 1 view -0
 1296              		.cfi_startproc
 1297              		@ args = 0, pretend = 0, frame = 0
 1298              		@ frame_needed = 0, uses_anonymous_args = 0
 600:lib/chibios/os/hal/src/hal_usb.c **** 
 601:lib/chibios/os/hal/src/hal_usb.c ****   osalDbgCheckClassI();
 1299              		.loc 1 601 23 view .LVU433
 602:lib/chibios/os/hal/src/hal_usb.c ****   osalDbgCheck(usbp != NULL);
 1300              		.loc 1 602 3 view .LVU434
 1301              		.loc 1 602 3 view .LVU435
 1302              		.loc 1 602 3 view .LVU436
 603:lib/chibios/os/hal/src/hal_usb.c **** 
 604:lib/chibios/os/hal/src/hal_usb.c ****   if (usbGetReceiveStatusI(usbp, ep)) {
 1303              		.loc 1 604 3 view .LVU437
 599:lib/chibios/os/hal/src/hal_usb.c **** 
 1304              		.loc 1 599 52 is_stmt 0 view .LVU438
 1305 0000 10B5     		push	{r4, lr}
 1306              		.cfi_def_cfa_offset 8
 1307              		.cfi_offset 4, -8
 1308              		.cfi_offset 14, -4
 1309              		.loc 1 604 7 view .LVU439
 1310 0002 0122     		movs	r2, #1
 1311 0004 4489     		ldrh	r4, [r0, #10]
 1312 0006 02FA01F3 		lsl	r3, r2, r1
 1313              		.loc 1 604 6 view .LVU440
 1314 000a 1C40     		ands	r4, r3, r4
 1315 000c 03D1     		bne	.L54
 605:lib/chibios/os/hal/src/hal_usb.c ****     return true;
 606:lib/chibios/os/hal/src/hal_usb.c ****   }
 607:lib/chibios/os/hal/src/hal_usb.c **** 
 608:lib/chibios/os/hal/src/hal_usb.c ****   usb_lld_stall_out(usbp, ep);
 1316              		.loc 1 608 3 is_stmt 1 view .LVU441
 1317 000e FFF7FEFF 		bl	usb_lld_stall_out
 1318              	.LVL80:
 609:lib/chibios/os/hal/src/hal_usb.c ****   return false;
 1319              		.loc 1 609 3 view .LVU442
 1320              		.loc 1 609 10 is_stmt 0 view .LVU443
 1321 0012 2046     		mov	r0, r4
 1322              	.L53:
 610:lib/chibios/os/hal/src/hal_usb.c **** }
 1323              		.loc 1 610 1 view .LVU444
 1324 0014 10BD     		pop	{r4, pc}
 1325              	.LVL81:
 1326              	.L54:
 605:lib/chibios/os/hal/src/hal_usb.c ****     return true;
 1327              		.loc 1 605 12 view .LVU445
 1328 0016 1046     		mov	r0, r2
 1329              	.LVL82:
 605:lib/chibios/os/hal/src/hal_usb.c ****     return true;
 1330              		.loc 1 605 12 view .LVU446
 1331 0018 FCE7     		b	.L53
 1332              		.cfi_endproc
 1333              	.LFE341:
 1335              		.section	.text.usbStallTransmitI,"ax",%progbits
 1336              		.align	1
 1337              		.global	usbStallTransmitI
 1338              		.syntax unified
 1339              		.thumb
 1340              		.thumb_func
 1341              		.fpu fpv4-sp-d16
 1343              	usbStallTransmitI:
 1344              	.LVL83:
 1345              	.LFB342:
 611:lib/chibios/os/hal/src/hal_usb.c **** 
 612:lib/chibios/os/hal/src/hal_usb.c **** /**
 613:lib/chibios/os/hal/src/hal_usb.c ****  * @brief   Stalls an IN endpoint.
 614:lib/chibios/os/hal/src/hal_usb.c ****  *
 615:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] usbp      pointer to the @p USBDriver object
 616:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] ep        endpoint number
 617:lib/chibios/os/hal/src/hal_usb.c ****  *
 618:lib/chibios/os/hal/src/hal_usb.c ****  * @return              The operation status.
 619:lib/chibios/os/hal/src/hal_usb.c ****  * @retval false        Endpoint stalled.
 620:lib/chibios/os/hal/src/hal_usb.c ****  * @retval true         Endpoint busy, not stalled.
 621:lib/chibios/os/hal/src/hal_usb.c ****  *
 622:lib/chibios/os/hal/src/hal_usb.c ****  * @iclass
 623:lib/chibios/os/hal/src/hal_usb.c ****  */
 624:lib/chibios/os/hal/src/hal_usb.c **** bool usbStallTransmitI(USBDriver *usbp, usbep_t ep) {
 1346              		.loc 1 624 53 is_stmt 1 view -0
 1347              		.cfi_startproc
 1348              		@ args = 0, pretend = 0, frame = 0
 1349              		@ frame_needed = 0, uses_anonymous_args = 0
 625:lib/chibios/os/hal/src/hal_usb.c **** 
 626:lib/chibios/os/hal/src/hal_usb.c ****   osalDbgCheckClassI();
 1350              		.loc 1 626 23 view .LVU448
 627:lib/chibios/os/hal/src/hal_usb.c ****   osalDbgCheck(usbp != NULL);
 1351              		.loc 1 627 3 view .LVU449
 1352              		.loc 1 627 3 view .LVU450
 1353              		.loc 1 627 3 view .LVU451
 628:lib/chibios/os/hal/src/hal_usb.c **** 
 629:lib/chibios/os/hal/src/hal_usb.c ****   if (usbGetTransmitStatusI(usbp, ep)) {
 1354              		.loc 1 629 3 view .LVU452
 624:lib/chibios/os/hal/src/hal_usb.c **** 
 1355              		.loc 1 624 53 is_stmt 0 view .LVU453
 1356 0000 10B5     		push	{r4, lr}
 1357              		.cfi_def_cfa_offset 8
 1358              		.cfi_offset 4, -8
 1359              		.cfi_offset 14, -4
 1360              		.loc 1 629 7 view .LVU454
 1361 0002 0122     		movs	r2, #1
 1362 0004 0489     		ldrh	r4, [r0, #8]
 1363 0006 02FA01F3 		lsl	r3, r2, r1
 1364              		.loc 1 629 6 view .LVU455
 1365 000a 1C40     		ands	r4, r3, r4
 1366 000c 03D1     		bne	.L57
 630:lib/chibios/os/hal/src/hal_usb.c ****     return true;
 631:lib/chibios/os/hal/src/hal_usb.c ****   }
 632:lib/chibios/os/hal/src/hal_usb.c **** 
 633:lib/chibios/os/hal/src/hal_usb.c ****   usb_lld_stall_in(usbp, ep);
 1367              		.loc 1 633 3 is_stmt 1 view .LVU456
 1368 000e FFF7FEFF 		bl	usb_lld_stall_in
 1369              	.LVL84:
 634:lib/chibios/os/hal/src/hal_usb.c ****   return false;
 1370              		.loc 1 634 3 view .LVU457
 1371              		.loc 1 634 10 is_stmt 0 view .LVU458
 1372 0012 2046     		mov	r0, r4
 1373              	.L56:
 635:lib/chibios/os/hal/src/hal_usb.c **** }
 1374              		.loc 1 635 1 view .LVU459
 1375 0014 10BD     		pop	{r4, pc}
 1376              	.LVL85:
 1377              	.L57:
 630:lib/chibios/os/hal/src/hal_usb.c ****     return true;
 1378              		.loc 1 630 12 view .LVU460
 1379 0016 1046     		mov	r0, r2
 1380              	.LVL86:
 630:lib/chibios/os/hal/src/hal_usb.c ****     return true;
 1381              		.loc 1 630 12 view .LVU461
 1382 0018 FCE7     		b	.L56
 1383              		.cfi_endproc
 1384              	.LFE342:
 1386              		.section	.text.usbWakeupHost,"ax",%progbits
 1387              		.align	1
 1388              		.global	usbWakeupHost
 1389              		.syntax unified
 1390              		.thumb
 1391              		.thumb_func
 1392              		.fpu fpv4-sp-d16
 1394              	usbWakeupHost:
 1395              	.LVL87:
 1396              	.LFB343:
 636:lib/chibios/os/hal/src/hal_usb.c **** 
 637:lib/chibios/os/hal/src/hal_usb.c **** /**
 638:lib/chibios/os/hal/src/hal_usb.c ****  * @brief   Host wake-up procedure.
 639:lib/chibios/os/hal/src/hal_usb.c ****  * @note    It is silently ignored if the USB device is not in the
 640:lib/chibios/os/hal/src/hal_usb.c ****  *          @p USB_SUSPENDED state.
 641:lib/chibios/os/hal/src/hal_usb.c ****  *
 642:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] usbp      pointer to the @p USBDriver object
 643:lib/chibios/os/hal/src/hal_usb.c ****  *
 644:lib/chibios/os/hal/src/hal_usb.c ****  * @api
 645:lib/chibios/os/hal/src/hal_usb.c ****  */
 646:lib/chibios/os/hal/src/hal_usb.c **** void usbWakeupHost(USBDriver *usbp) {
 1397              		.loc 1 646 37 is_stmt 1 view -0
 1398              		.cfi_startproc
 1399              		@ args = 0, pretend = 0, frame = 0
 1400              		@ frame_needed = 0, uses_anonymous_args = 0
 647:lib/chibios/os/hal/src/hal_usb.c **** 
 648:lib/chibios/os/hal/src/hal_usb.c ****   if (usbp->state == USB_SUSPENDED) {
 1401              		.loc 1 648 3 view .LVU463
 646:lib/chibios/os/hal/src/hal_usb.c **** 
 1402              		.loc 1 646 37 is_stmt 0 view .LVU464
 1403 0000 10B5     		push	{r4, lr}
 1404              		.cfi_def_cfa_offset 8
 1405              		.cfi_offset 4, -8
 1406              		.cfi_offset 14, -4
 1407              		.loc 1 648 6 view .LVU465
 1408 0002 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 1409 0004 052B     		cmp	r3, #5
 1410 0006 0BD1     		bne	.L58
 649:lib/chibios/os/hal/src/hal_usb.c ****     /* Starting host wakeup procedure.*/
 650:lib/chibios/os/hal/src/hal_usb.c ****     usb_lld_wakeup_host(usbp);
 1411              		.loc 1 650 5 is_stmt 1 view .LVU466
 1412              		.loc 1 650 5 view .LVU467
 1413 0008 064C     		ldr	r4, .L60
 1414 000a 236C     		ldr	r3, [r4, #64]
 1415 000c 43F01003 		orr	r3, r3, #16
 1416 0010 2364     		str	r3, [r4, #64]
 1417              		.loc 1 650 5 view .LVU468
 1418              	.LVL88:
 1419              	.LBB424:
 1420              	.LBI424:
 782:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 1421              		.loc 2 782 20 view .LVU469
 1422              	.LBB425:
 784:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 1423              		.loc 2 784 3 view .LVU470
 1424 0012 1420     		movs	r0, #20
 1425              	.LVL89:
 784:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 1426              		.loc 2 784 3 is_stmt 0 view .LVU471
 1427 0014 FFF7FEFF 		bl	chThdSleep
 1428              	.LVL90:
 784:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 1429              		.loc 2 784 3 view .LVU472
 1430              	.LBE425:
 1431              	.LBE424:
 1432              		.loc 1 650 5 is_stmt 1 view .LVU473
 1433 0018 236C     		ldr	r3, [r4, #64]
 1434 001a 23F01003 		bic	r3, r3, #16
 1435 001e 2364     		str	r3, [r4, #64]
 1436              		.loc 1 650 5 view .LVU474
 1437              	.L58:
 651:lib/chibios/os/hal/src/hal_usb.c ****   }
 652:lib/chibios/os/hal/src/hal_usb.c **** }
 1438              		.loc 1 652 1 is_stmt 0 view .LVU475
 1439 0020 10BD     		pop	{r4, pc}
 1440              	.L61:
 1441 0022 00BF     		.align	2
 1442              	.L60:
 1443 0024 005C0040 		.word	1073765376
 1444              		.cfi_endproc
 1445              	.LFE343:
 1447              		.section	.text._usb_reset,"ax",%progbits
 1448              		.align	1
 1449              		.global	_usb_reset
 1450              		.syntax unified
 1451              		.thumb
 1452              		.thumb_func
 1453              		.fpu fpv4-sp-d16
 1455              	_usb_reset:
 1456              	.LVL91:
 1457              	.LFB344:
 653:lib/chibios/os/hal/src/hal_usb.c **** 
 654:lib/chibios/os/hal/src/hal_usb.c **** /**
 655:lib/chibios/os/hal/src/hal_usb.c ****  * @brief   USB reset routine.
 656:lib/chibios/os/hal/src/hal_usb.c ****  * @details This function must be invoked when an USB bus reset condition is
 657:lib/chibios/os/hal/src/hal_usb.c ****  *          detected.
 658:lib/chibios/os/hal/src/hal_usb.c ****  *
 659:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] usbp      pointer to the @p USBDriver object
 660:lib/chibios/os/hal/src/hal_usb.c ****  *
 661:lib/chibios/os/hal/src/hal_usb.c ****  * @notapi
 662:lib/chibios/os/hal/src/hal_usb.c ****  */
 663:lib/chibios/os/hal/src/hal_usb.c **** void _usb_reset(USBDriver *usbp) {
 1458              		.loc 1 663 34 is_stmt 1 view -0
 1459              		.cfi_startproc
 1460              		@ args = 0, pretend = 0, frame = 0
 1461              		@ frame_needed = 0, uses_anonymous_args = 0
 664:lib/chibios/os/hal/src/hal_usb.c ****   unsigned i;
 1462              		.loc 1 664 3 view .LVU477
 665:lib/chibios/os/hal/src/hal_usb.c **** 
 666:lib/chibios/os/hal/src/hal_usb.c ****   /* State transition.*/
 667:lib/chibios/os/hal/src/hal_usb.c ****   usbp->state         = USB_READY;
 1463              		.loc 1 667 3 view .LVU478
 663:lib/chibios/os/hal/src/hal_usb.c ****   unsigned i;
 1464              		.loc 1 663 34 is_stmt 0 view .LVU479
 1465 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 1466              		.cfi_def_cfa_offset 32
 1467              		.cfi_offset 4, -32
 1468              		.cfi_offset 5, -28
 1469              		.cfi_offset 6, -24
 1470              		.cfi_offset 7, -20
 1471              		.cfi_offset 8, -16
 1472              		.cfi_offset 9, -12
 1473              		.cfi_offset 10, -8
 1474              		.cfi_offset 14, -4
 1475              		.loc 1 667 23 view .LVU480
 1476 0004 0223     		movs	r3, #2
 668:lib/chibios/os/hal/src/hal_usb.c **** 
 669:lib/chibios/os/hal/src/hal_usb.c ****   /* Resetting internal state.*/
 670:lib/chibios/os/hal/src/hal_usb.c ****   usbp->status        = 0;
 1477              		.loc 1 670 23 view .LVU481
 1478 0006 0026     		movs	r6, #0
 663:lib/chibios/os/hal/src/hal_usb.c ****   unsigned i;
 1479              		.loc 1 663 34 view .LVU482
 1480 0008 0446     		mov	r4, r0
 667:lib/chibios/os/hal/src/hal_usb.c **** 
 1481              		.loc 1 667 23 view .LVU483
 1482 000a 0370     		strb	r3, [r0]
 1483              		.loc 1 670 3 is_stmt 1 view .LVU484
 671:lib/chibios/os/hal/src/hal_usb.c ****   usbp->address       = 0;
 1484              		.loc 1 671 3 view .LVU485
 672:lib/chibios/os/hal/src/hal_usb.c ****   usbp->configuration = 0;
 1485              		.loc 1 672 3 view .LVU486
 670:lib/chibios/os/hal/src/hal_usb.c ****   usbp->address       = 0;
 1486              		.loc 1 670 23 is_stmt 0 view .LVU487
 1487 000c C667     		str	r6, [r0, #124]
 673:lib/chibios/os/hal/src/hal_usb.c ****   usbp->transmitting  = 0;
 1488              		.loc 1 673 3 is_stmt 1 view .LVU488
 674:lib/chibios/os/hal/src/hal_usb.c ****   usbp->receiving     = 0;
 1489              		.loc 1 674 3 view .LVU489
 673:lib/chibios/os/hal/src/hal_usb.c ****   usbp->transmitting  = 0;
 1490              		.loc 1 673 23 is_stmt 0 view .LVU490
 1491 000e 8660     		str	r6, [r0, #8]
 675:lib/chibios/os/hal/src/hal_usb.c **** 
 676:lib/chibios/os/hal/src/hal_usb.c ****   /* Invalidates all endpoints into the USBDriver structure.*/
 677:lib/chibios/os/hal/src/hal_usb.c ****   for (i = 0; i <= (unsigned)USB_MAX_ENDPOINTS; i++) {
 1492              		.loc 1 677 3 is_stmt 1 view .LVU491
 1493              	.LVL92:
 1494              		.loc 1 677 17 view .LVU492
 1495 0010 00F10C05 		add	r5, r0, #12
 1496 0014 00F12C07 		add	r7, r0, #44
 1497              	.LBB426:
 1498              	.LBB427:
 1499              	.LBB428:
 1500              	.LBB429:
 1501              	.LBB430:
 1502              	.LBB431:
 1503              		.loc 5 493 3 is_stmt 0 view .LVU493
 1504 0018 4FF02008 		mov	r8, #32
 1505              	.LBE431:
 1506              	.LBE430:
 1507              	.LBE429:
 1508              	.LBE428:
 1509              	.LBE427:
 1510              	.LBE426:
 1511              	.LBB437:
 1512              	.LBB438:
 1513              	.LBB439:
 1514              	.LBB440:
 1515              	.LBB441:
 1516              	.LBB442:
 1517              	.LBB443:
 1518 001c B146     		mov	r9, r6
 1519              	.LVL93:
 1520              	.L66:
 1521              		.loc 5 493 3 view .LVU494
 1522              	.LBE443:
 1523              	.LBE442:
 1524              	.LBE441:
 1525              	.LBE440:
 1526              	.LBE439:
 1527              	.LBE438:
 1528              	.LBE437:
 678:lib/chibios/os/hal/src/hal_usb.c **** #if USB_USE_WAIT == TRUE
 679:lib/chibios/os/hal/src/hal_usb.c ****     /* Signaling the event to threads waiting on endpoints.*/
 680:lib/chibios/os/hal/src/hal_usb.c ****     if (usbp->epc[i] != NULL) {
 1529              		.loc 1 680 5 is_stmt 1 view .LVU495
 1530              		.loc 1 680 18 is_stmt 0 view .LVU496
 1531 001e 55F8043B 		ldr	r3, [r5], #4
 1532              		.loc 1 680 8 view .LVU497
 1533 0022 ABB1     		cbz	r3, .L63
 681:lib/chibios/os/hal/src/hal_usb.c ****       osalSysLockFromISR();
 1534              		.loc 1 681 7 is_stmt 1 view .LVU498
 1535              	.LBB450:
 1536              	.LBI426:
 595:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 1537              		.loc 2 595 20 view .LVU499
 597:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 1538              		.loc 2 597 3 view .LVU500
 1539              	.LBB436:
 1540              	.LBI427:
 381:./lib/chibios/os/rt/include/chsys.h **** }
 382:./lib/chibios/os/rt/include/chsys.h **** 
 383:./lib/chibios/os/rt/include/chsys.h **** /**
 384:./lib/chibios/os/rt/include/chsys.h ****  * @brief   Enters the kernel lock state from within an interrupt handler.
 385:./lib/chibios/os/rt/include/chsys.h ****  * @note    This API may do nothing on some architectures, it is required
 386:./lib/chibios/os/rt/include/chsys.h ****  *          because on ports that support preemptable interrupt handlers
 387:./lib/chibios/os/rt/include/chsys.h ****  *          it is required to raise the interrupt mask to the same level of
 388:./lib/chibios/os/rt/include/chsys.h ****  *          the system mutual exclusion zone.<br>
 389:./lib/chibios/os/rt/include/chsys.h ****  *          It is good practice to invoke this API before invoking any I-class
 390:./lib/chibios/os/rt/include/chsys.h ****  *          syscall from an interrupt handler.
 391:./lib/chibios/os/rt/include/chsys.h ****  * @note    This API must be invoked exclusively from interrupt handlers.
 392:./lib/chibios/os/rt/include/chsys.h ****  *
 393:./lib/chibios/os/rt/include/chsys.h ****  * @special
 394:./lib/chibios/os/rt/include/chsys.h ****  */
 395:./lib/chibios/os/rt/include/chsys.h **** static inline void chSysLockFromISR(void) {
 1541              		.loc 3 395 20 view .LVU501
 396:./lib/chibios/os/rt/include/chsys.h **** 
 397:./lib/chibios/os/rt/include/chsys.h ****   port_lock_from_isr();
 1542              		.loc 3 397 3 view .LVU502
 1543              	.LBB435:
 1544              	.LBI428:
 697:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else /* CORTEX_SIMPLIFIED_PRIORITY */
 698:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   __enable_irq();
 699:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif /* CORTEX_SIMPLIFIED_PRIORITY */
 700:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** }
 701:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 702:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 703:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Kernel-lock action from an interrupt handler.
 704:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @details In this port this function raises the base priority to kernel
 705:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          level.
 706:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @note    Same as @p port_lock() in this port.
 707:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 708:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** __STATIC_FORCEINLINE void port_lock_from_isr(void) {
 1545              		.loc 4 708 27 view .LVU503
 709:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 710:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   port_lock();
 1546              		.loc 4 710 3 view .LVU504
 1547              	.LBB434:
 1548              	.LBI429:
 669:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 1549              		.loc 4 669 27 view .LVU505
 677:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if defined(__CM7_REV)
 1550              		.loc 4 677 3 view .LVU506
 1551              	.LVL94:
 1552              	.LBB433:
 1553              	.LBI430:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 1554              		.loc 5 491 27 view .LVU507
 1555              	.LBB432:
 1556              		.loc 5 493 3 view .LVU508
 1557              		.syntax unified
 1558              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 1559 0024 88F31188 		MSR basepri, r8
 1560              	@ 0 "" 2
 1561              	.LVL95:
 1562              		.loc 5 493 3 is_stmt 0 view .LVU509
 1563              		.thumb
 1564              		.syntax unified
 1565              	.LBE432:
 1566              	.LBE433:
 1567              	.LBE434:
 1568              	.LBE435:
 398:./lib/chibios/os/rt/include/chsys.h ****   _stats_start_measure_crit_isr();
 1569              		.loc 3 398 34 is_stmt 1 view .LVU510
 399:./lib/chibios/os/rt/include/chsys.h ****   _dbg_check_lock_from_isr();
 1570              		.loc 3 399 29 view .LVU511
 1571              	.LBE436:
 1572              	.LBE450:
 682:lib/chibios/os/hal/src/hal_usb.c ****       if (usbp->epc[i]->in_state != NULL) {
 1573              		.loc 1 682 7 view .LVU512
 1574              		.loc 1 682 23 is_stmt 0 view .LVU513
 1575 0028 55F8043C 		ldr	r3, [r5, #-4]
 1576 002c 5869     		ldr	r0, [r3, #20]
 1577              		.loc 1 682 10 view .LVU514
 1578 002e 20B1     		cbz	r0, .L64
 683:lib/chibios/os/hal/src/hal_usb.c ****         osalThreadResumeI(&usbp->epc[i]->in_state->thread, MSG_RESET);
 1579              		.loc 1 683 9 is_stmt 1 view .LVU515
 1580              	.LVL96:
 1581              	.LBB451:
 1582              	.LBI451:
 837:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 1583              		.loc 2 837 20 view .LVU516
 1584              	.LBB452:
 1585              		.loc 2 839 3 view .LVU517
 1586 0030 6FF00101 		mvn	r1, #1
 1587 0034 0C30     		adds	r0, r0, #12
 1588              	.LVL97:
 1589              		.loc 2 839 3 is_stmt 0 view .LVU518
 1590 0036 FFF7FEFF 		bl	chThdResumeI
 1591              	.LVL98:
 1592              	.L64:
 1593              		.loc 2 839 3 view .LVU519
 1594              	.LBE452:
 1595              	.LBE451:
 684:lib/chibios/os/hal/src/hal_usb.c ****       }
 685:lib/chibios/os/hal/src/hal_usb.c ****       if (usbp->epc[i]->out_state != NULL) {
 1596              		.loc 1 685 7 is_stmt 1 view .LVU520
 1597              		.loc 1 685 23 is_stmt 0 view .LVU521
 1598 003a 55F8043C 		ldr	r3, [r5, #-4]
 1599 003e 9869     		ldr	r0, [r3, #24]
 1600              		.loc 1 685 10 view .LVU522
 1601 0040 20B1     		cbz	r0, .L65
 686:lib/chibios/os/hal/src/hal_usb.c ****         osalThreadResumeI(&usbp->epc[i]->out_state->thread, MSG_RESET);
 1602              		.loc 1 686 9 is_stmt 1 view .LVU523
 1603              	.LVL99:
 1604              	.LBB453:
 1605              	.LBI453:
 837:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 1606              		.loc 2 837 20 view .LVU524
 1607              	.LBB454:
 1608              		.loc 2 839 3 view .LVU525
 1609 0042 6FF00101 		mvn	r1, #1
 1610 0046 0C30     		adds	r0, r0, #12
 1611              	.LVL100:
 1612              		.loc 2 839 3 is_stmt 0 view .LVU526
 1613 0048 FFF7FEFF 		bl	chThdResumeI
 1614              	.LVL101:
 1615              	.L65:
 1616              		.loc 2 839 3 view .LVU527
 1617              	.LBE454:
 1618              	.LBE453:
 687:lib/chibios/os/hal/src/hal_usb.c ****       }
 688:lib/chibios/os/hal/src/hal_usb.c ****       osalSysUnlockFromISR();
 1619              		.loc 1 688 7 is_stmt 1 view .LVU528
 1620              	.LBB455:
 1621              	.LBI437:
 606:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 1622              		.loc 2 606 20 view .LVU529
 1623              	.LBB449:
 608:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 1624              		.loc 2 608 3 view .LVU530
 1625              	.LBB448:
 1626              	.LBI439:
 400:./lib/chibios/os/rt/include/chsys.h **** }
 401:./lib/chibios/os/rt/include/chsys.h **** 
 402:./lib/chibios/os/rt/include/chsys.h **** /**
 403:./lib/chibios/os/rt/include/chsys.h ****  * @brief   Leaves the kernel lock state from within an interrupt handler.
 404:./lib/chibios/os/rt/include/chsys.h ****  *
 405:./lib/chibios/os/rt/include/chsys.h ****  * @note    This API may do nothing on some architectures, it is required
 406:./lib/chibios/os/rt/include/chsys.h ****  *          because on ports that support preemptable interrupt handlers
 407:./lib/chibios/os/rt/include/chsys.h ****  *          it is required to raise the interrupt mask to the same level of
 408:./lib/chibios/os/rt/include/chsys.h ****  *          the system mutual exclusion zone.<br>
 409:./lib/chibios/os/rt/include/chsys.h ****  *          It is good practice to invoke this API after invoking any I-class
 410:./lib/chibios/os/rt/include/chsys.h ****  *          syscall from an interrupt handler.
 411:./lib/chibios/os/rt/include/chsys.h ****  * @note    This API must be invoked exclusively from interrupt handlers.
 412:./lib/chibios/os/rt/include/chsys.h ****  *
 413:./lib/chibios/os/rt/include/chsys.h ****  * @special
 414:./lib/chibios/os/rt/include/chsys.h ****  */
 415:./lib/chibios/os/rt/include/chsys.h **** static inline void chSysUnlockFromISR(void) {
 1627              		.loc 3 415 20 view .LVU531
 416:./lib/chibios/os/rt/include/chsys.h **** 
 417:./lib/chibios/os/rt/include/chsys.h ****   _dbg_check_unlock_from_isr();
 1628              		.loc 3 417 31 view .LVU532
 418:./lib/chibios/os/rt/include/chsys.h ****   _stats_stop_measure_crit_isr();
 1629              		.loc 3 418 33 view .LVU533
 419:./lib/chibios/os/rt/include/chsys.h ****   port_unlock_from_isr();
 1630              		.loc 3 419 3 view .LVU534
 1631              	.LBB447:
 1632              	.LBI440:
 711:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** }
 712:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 713:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 714:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Kernel-unlock action from an interrupt handler.
 715:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @details In this port this function lowers the base priority to user
 716:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          level.
 717:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @note    Same as @p port_unlock() in this port.
 718:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 719:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** __STATIC_FORCEINLINE void port_unlock_from_isr(void) {
 1633              		.loc 4 719 27 view .LVU535
 720:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 721:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   port_unlock();
 1634              		.loc 4 721 3 view .LVU536
 1635              	.LBB446:
 1636              	.LBI441:
 693:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 1637              		.loc 4 693 27 view .LVU537
 696:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else /* CORTEX_SIMPLIFIED_PRIORITY */
 1638              		.loc 4 696 3 view .LVU538
 1639              	.LBB445:
 1640              	.LBI442:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 1641              		.loc 5 491 27 view .LVU539
 1642              	.LBB444:
 1643              		.loc 5 493 3 view .LVU540
 1644              		.syntax unified
 1645              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 1646 004c 89F31188 		MSR basepri, r9
 1647              	@ 0 "" 2
 1648              	.LVL102:
 1649              		.thumb
 1650              		.syntax unified
 1651              	.L63:
 1652              		.loc 5 493 3 is_stmt 0 view .LVU541
 1653              	.LBE444:
 1654              	.LBE445:
 1655              	.LBE446:
 1656              	.LBE447:
 1657              	.LBE448:
 1658              	.LBE449:
 1659              	.LBE455:
 689:lib/chibios/os/hal/src/hal_usb.c ****     }
 690:lib/chibios/os/hal/src/hal_usb.c **** #endif
 691:lib/chibios/os/hal/src/hal_usb.c ****     usbp->epc[i] = NULL;
 1660              		.loc 1 691 5 is_stmt 1 discriminator 2 view .LVU542
 677:lib/chibios/os/hal/src/hal_usb.c **** #if USB_USE_WAIT == TRUE
 1661              		.loc 1 677 17 is_stmt 0 discriminator 2 view .LVU543
 1662 0050 BD42     		cmp	r5, r7
 1663              		.loc 1 691 18 discriminator 2 view .LVU544
 1664 0052 45F8046C 		str	r6, [r5, #-4]
 677:lib/chibios/os/hal/src/hal_usb.c **** #if USB_USE_WAIT == TRUE
 1665              		.loc 1 677 50 is_stmt 1 discriminator 2 view .LVU545
 677:lib/chibios/os/hal/src/hal_usb.c **** #if USB_USE_WAIT == TRUE
 1666              		.loc 1 677 17 discriminator 2 view .LVU546
 1667 0056 E2D1     		bne	.L66
 692:lib/chibios/os/hal/src/hal_usb.c ****   }
 693:lib/chibios/os/hal/src/hal_usb.c **** 
 694:lib/chibios/os/hal/src/hal_usb.c ****   /* EP0 state machine initialization.*/
 695:lib/chibios/os/hal/src/hal_usb.c ****   usbp->ep0state = USB_EP0_STP_WAITING;
 1668              		.loc 1 695 3 view .LVU547
 1669              		.loc 1 695 18 is_stmt 0 view .LVU548
 1670 0058 84F86460 		strb	r6, [r4, #100]
 696:lib/chibios/os/hal/src/hal_usb.c **** 
 697:lib/chibios/os/hal/src/hal_usb.c ****   /* Low level reset.*/
 698:lib/chibios/os/hal/src/hal_usb.c ****   usb_lld_reset(usbp);
 1671              		.loc 1 698 3 is_stmt 1 view .LVU549
 1672 005c 2046     		mov	r0, r4
 1673 005e FFF7FEFF 		bl	usb_lld_reset
 1674              	.LVL103:
 699:lib/chibios/os/hal/src/hal_usb.c **** 
 700:lib/chibios/os/hal/src/hal_usb.c ****   /* Notification of reset event.*/
 701:lib/chibios/os/hal/src/hal_usb.c ****   _usb_isr_invoke_event_cb(usbp, USB_EVENT_RESET);
 1675              		.loc 1 701 3 view .LVU550
 1676 0062 6368     		ldr	r3, [r4, #4]
 1677 0064 1B68     		ldr	r3, [r3]
 1678 0066 23B1     		cbz	r3, .L62
 1679              		.loc 1 701 3 discriminator 1 view .LVU551
 1680 0068 2046     		mov	r0, r4
 1681 006a 0021     		movs	r1, #0
 702:lib/chibios/os/hal/src/hal_usb.c **** }
 1682              		.loc 1 702 1 is_stmt 0 discriminator 1 view .LVU552
 1683 006c BDE8F047 		pop	{r4, r5, r6, r7, r8, r9, r10, lr}
 1684              		.cfi_remember_state
 1685              		.cfi_restore 14
 1686              		.cfi_restore 10
 1687              		.cfi_restore 9
 1688              		.cfi_restore 8
 1689              		.cfi_restore 7
 1690              		.cfi_restore 6
 1691              		.cfi_restore 5
 1692              		.cfi_restore 4
 1693              		.cfi_def_cfa_offset 0
 1694              	.LVL104:
 701:lib/chibios/os/hal/src/hal_usb.c **** }
 1695              		.loc 1 701 3 discriminator 1 view .LVU553
 1696 0070 1847     		bx	r3	@ indirect register sibling call
 1697              	.LVL105:
 1698              	.L62:
 1699              		.cfi_restore_state
 1700              		.loc 1 702 1 view .LVU554
 1701 0072 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 1702              		.loc 1 702 1 view .LVU555
 1703              		.cfi_endproc
 1704              	.LFE344:
 1706              		.section	.text._usb_suspend,"ax",%progbits
 1707              		.align	1
 1708              		.global	_usb_suspend
 1709              		.syntax unified
 1710              		.thumb
 1711              		.thumb_func
 1712              		.fpu fpv4-sp-d16
 1714              	_usb_suspend:
 1715              	.LVL106:
 1716              	.LFB345:
 703:lib/chibios/os/hal/src/hal_usb.c **** 
 704:lib/chibios/os/hal/src/hal_usb.c **** /**
 705:lib/chibios/os/hal/src/hal_usb.c ****  * @brief   USB suspend routine.
 706:lib/chibios/os/hal/src/hal_usb.c ****  * @details This function must be invoked when an USB bus suspend condition is
 707:lib/chibios/os/hal/src/hal_usb.c ****  *          detected.
 708:lib/chibios/os/hal/src/hal_usb.c ****  *
 709:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] usbp      pointer to the @p USBDriver object
 710:lib/chibios/os/hal/src/hal_usb.c ****  *
 711:lib/chibios/os/hal/src/hal_usb.c ****  * @notapi
 712:lib/chibios/os/hal/src/hal_usb.c ****  */
 713:lib/chibios/os/hal/src/hal_usb.c **** void _usb_suspend(USBDriver *usbp) {
 1717              		.loc 1 713 36 is_stmt 1 view -0
 1718              		.cfi_startproc
 1719              		@ args = 0, pretend = 0, frame = 0
 1720              		@ frame_needed = 0, uses_anonymous_args = 0
 714:lib/chibios/os/hal/src/hal_usb.c ****   /* No state change, suspend always returns to previous state. */
 715:lib/chibios/os/hal/src/hal_usb.c **** 
 716:lib/chibios/os/hal/src/hal_usb.c ****   /* State transition.*/
 717:lib/chibios/os/hal/src/hal_usb.c ****   usbp->saved_state = usbp->state;
 1721              		.loc 1 717 3 view .LVU557
 713:lib/chibios/os/hal/src/hal_usb.c ****   /* No state change, suspend always returns to previous state. */
 1722              		.loc 1 713 36 is_stmt 0 view .LVU558
 1723 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1724              		.cfi_def_cfa_offset 24
 1725              		.cfi_offset 3, -24
 1726              		.cfi_offset 4, -20
 1727              		.cfi_offset 5, -16
 1728              		.cfi_offset 6, -12
 1729              		.cfi_offset 7, -8
 1730              		.cfi_offset 14, -4
 1731              		.loc 1 717 21 view .LVU559
 1732 0002 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 1733 0004 80F88030 		strb	r3, [r0, #128]
 718:lib/chibios/os/hal/src/hal_usb.c ****   usbp->state       = USB_SUSPENDED;
 1734              		.loc 1 718 3 is_stmt 1 view .LVU560
 1735              		.loc 1 718 21 is_stmt 0 view .LVU561
 1736 0008 0523     		movs	r3, #5
 1737 000a 0370     		strb	r3, [r0]
 719:lib/chibios/os/hal/src/hal_usb.c **** 
 720:lib/chibios/os/hal/src/hal_usb.c ****   /* Notification of suspend event.*/
 721:lib/chibios/os/hal/src/hal_usb.c ****   _usb_isr_invoke_event_cb(usbp, USB_EVENT_SUSPEND);
 1738              		.loc 1 721 3 is_stmt 1 view .LVU562
 1739 000c 4368     		ldr	r3, [r0, #4]
 1740 000e 1B68     		ldr	r3, [r3]
 713:lib/chibios/os/hal/src/hal_usb.c ****   /* No state change, suspend always returns to previous state. */
 1741              		.loc 1 713 36 is_stmt 0 view .LVU563
 1742 0010 0446     		mov	r4, r0
 1743              		.loc 1 721 3 view .LVU564
 1744 0012 0BB1     		cbz	r3, .L79
 1745              		.loc 1 721 3 is_stmt 1 discriminator 1 view .LVU565
 1746 0014 0421     		movs	r1, #4
 1747 0016 9847     		blx	r3
 1748              	.LVL107:
 1749              	.L79:
 1750              		.loc 1 721 52 discriminator 3 view .LVU566
 722:lib/chibios/os/hal/src/hal_usb.c **** 
 723:lib/chibios/os/hal/src/hal_usb.c ****   /* Terminating all pending transactions.*/
 724:lib/chibios/os/hal/src/hal_usb.c ****   usbp->transmitting  = 0;
 1751              		.loc 1 724 3 discriminator 3 view .LVU567
 725:lib/chibios/os/hal/src/hal_usb.c ****   usbp->receiving     = 0;
 1752              		.loc 1 725 3 discriminator 3 view .LVU568
 724:lib/chibios/os/hal/src/hal_usb.c ****   usbp->receiving     = 0;
 1753              		.loc 1 724 23 is_stmt 0 discriminator 3 view .LVU569
 1754 0018 0026     		movs	r6, #0
 1755 001a A660     		str	r6, [r4, #8]
 1756              	.LBB456:
 726:lib/chibios/os/hal/src/hal_usb.c **** 
 727:lib/chibios/os/hal/src/hal_usb.c ****   /* Signaling the event to threads waiting on endpoints.*/
 728:lib/chibios/os/hal/src/hal_usb.c **** #if USB_USE_WAIT == TRUE
 729:lib/chibios/os/hal/src/hal_usb.c ****   {
 730:lib/chibios/os/hal/src/hal_usb.c ****     unsigned i;
 1757              		.loc 1 730 5 is_stmt 1 discriminator 3 view .LVU570
 731:lib/chibios/os/hal/src/hal_usb.c **** 
 732:lib/chibios/os/hal/src/hal_usb.c ****     for (i = 0; i <= (unsigned)USB_MAX_ENDPOINTS; i++) {
 1758              		.loc 1 732 5 discriminator 3 view .LVU571
 1759              	.LVL108:
 1760              		.loc 1 732 19 discriminator 3 view .LVU572
 1761 001c 04F10C05 		add	r5, r4, #12
 1762              	.LBB457:
 1763              	.LBB458:
 1764              	.LBB459:
 1765              	.LBB460:
 1766              	.LBB461:
 1767              	.LBB462:
 1768              		.loc 5 493 3 is_stmt 0 discriminator 3 view .LVU573
 1769 0020 2027     		movs	r7, #32
 1770 0022 2C34     		adds	r4, r4, #44
 1771              	.LVL109:
 1772              	.L83:
 1773              		.loc 5 493 3 discriminator 3 view .LVU574
 1774              	.LBE462:
 1775              	.LBE461:
 1776              	.LBE460:
 1777              	.LBE459:
 1778              	.LBE458:
 1779              	.LBE457:
 733:lib/chibios/os/hal/src/hal_usb.c ****       if (usbp->epc[i] != NULL) {
 1780              		.loc 1 733 7 is_stmt 1 view .LVU575
 1781              		.loc 1 733 20 is_stmt 0 view .LVU576
 1782 0024 55F8043B 		ldr	r3, [r5], #4
 1783              		.loc 1 733 10 view .LVU577
 1784 0028 ABB1     		cbz	r3, .L80
 734:lib/chibios/os/hal/src/hal_usb.c ****         osalSysLockFromISR();
 1785              		.loc 1 734 9 is_stmt 1 view .LVU578
 1786              	.LBB468:
 1787              	.LBI457:
 595:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 1788              		.loc 2 595 20 view .LVU579
 597:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 1789              		.loc 2 597 3 view .LVU580
 1790              	.LBB467:
 1791              	.LBI458:
 395:./lib/chibios/os/rt/include/chsys.h **** 
 1792              		.loc 3 395 20 view .LVU581
 397:./lib/chibios/os/rt/include/chsys.h ****   _stats_start_measure_crit_isr();
 1793              		.loc 3 397 3 view .LVU582
 1794              	.LBB466:
 1795              	.LBI459:
 708:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 1796              		.loc 4 708 27 view .LVU583
 710:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** }
 1797              		.loc 4 710 3 view .LVU584
 1798              	.LBB465:
 1799              	.LBI460:
 669:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 1800              		.loc 4 669 27 view .LVU585
 677:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if defined(__CM7_REV)
 1801              		.loc 4 677 3 view .LVU586
 1802              	.LVL110:
 1803              	.LBB464:
 1804              	.LBI461:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 1805              		.loc 5 491 27 view .LVU587
 1806              	.LBB463:
 1807              		.loc 5 493 3 view .LVU588
 1808              		.syntax unified
 1809              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 1810 002a 87F31188 		MSR basepri, r7
 1811              	@ 0 "" 2
 1812              	.LVL111:
 1813              		.loc 5 493 3 is_stmt 0 view .LVU589
 1814              		.thumb
 1815              		.syntax unified
 1816              	.LBE463:
 1817              	.LBE464:
 1818              	.LBE465:
 1819              	.LBE466:
 398:./lib/chibios/os/rt/include/chsys.h ****   _dbg_check_lock_from_isr();
 1820              		.loc 3 398 34 is_stmt 1 view .LVU590
 399:./lib/chibios/os/rt/include/chsys.h **** }
 1821              		.loc 3 399 29 view .LVU591
 1822              	.LBE467:
 1823              	.LBE468:
 735:lib/chibios/os/hal/src/hal_usb.c ****         if (usbp->epc[i]->in_state != NULL) {
 1824              		.loc 1 735 9 view .LVU592
 1825              		.loc 1 735 25 is_stmt 0 view .LVU593
 1826 002e 55F8043C 		ldr	r3, [r5, #-4]
 1827 0032 5869     		ldr	r0, [r3, #20]
 1828              		.loc 1 735 12 view .LVU594
 1829 0034 20B1     		cbz	r0, .L81
 736:lib/chibios/os/hal/src/hal_usb.c ****           osalThreadResumeI(&usbp->epc[i]->in_state->thread, MSG_RESET);
 1830              		.loc 1 736 11 is_stmt 1 view .LVU595
 1831              	.LVL112:
 1832              	.LBB469:
 1833              	.LBI469:
 837:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 1834              		.loc 2 837 20 view .LVU596
 1835              	.LBB470:
 1836              		.loc 2 839 3 view .LVU597
 1837 0036 6FF00101 		mvn	r1, #1
 1838 003a 0C30     		adds	r0, r0, #12
 1839              	.LVL113:
 1840              		.loc 2 839 3 is_stmt 0 view .LVU598
 1841 003c FFF7FEFF 		bl	chThdResumeI
 1842              	.LVL114:
 1843              	.L81:
 1844              		.loc 2 839 3 view .LVU599
 1845              	.LBE470:
 1846              	.LBE469:
 737:lib/chibios/os/hal/src/hal_usb.c ****         }
 738:lib/chibios/os/hal/src/hal_usb.c ****         if (usbp->epc[i]->out_state != NULL) {
 1847              		.loc 1 738 9 is_stmt 1 view .LVU600
 1848              		.loc 1 738 25 is_stmt 0 view .LVU601
 1849 0040 55F8043C 		ldr	r3, [r5, #-4]
 1850 0044 9869     		ldr	r0, [r3, #24]
 1851              		.loc 1 738 12 view .LVU602
 1852 0046 20B1     		cbz	r0, .L82
 739:lib/chibios/os/hal/src/hal_usb.c ****           osalThreadResumeI(&usbp->epc[i]->out_state->thread, MSG_RESET);
 1853              		.loc 1 739 11 is_stmt 1 view .LVU603
 1854              	.LVL115:
 1855              	.LBB471:
 1856              	.LBI471:
 837:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 1857              		.loc 2 837 20 view .LVU604
 1858              	.LBB472:
 1859              		.loc 2 839 3 view .LVU605
 1860 0048 6FF00101 		mvn	r1, #1
 1861 004c 0C30     		adds	r0, r0, #12
 1862              	.LVL116:
 1863              		.loc 2 839 3 is_stmt 0 view .LVU606
 1864 004e FFF7FEFF 		bl	chThdResumeI
 1865              	.LVL117:
 1866              	.L82:
 1867              		.loc 2 839 3 view .LVU607
 1868              	.LBE472:
 1869              	.LBE471:
 740:lib/chibios/os/hal/src/hal_usb.c ****         }
 741:lib/chibios/os/hal/src/hal_usb.c ****         osalSysUnlockFromISR();
 1870              		.loc 1 741 9 is_stmt 1 view .LVU608
 1871              	.LBB473:
 1872              	.LBI473:
 606:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 1873              		.loc 2 606 20 view .LVU609
 1874              	.LBB474:
 608:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 1875              		.loc 2 608 3 view .LVU610
 1876              	.LBB475:
 1877              	.LBI475:
 415:./lib/chibios/os/rt/include/chsys.h **** 
 1878              		.loc 3 415 20 view .LVU611
 417:./lib/chibios/os/rt/include/chsys.h ****   _stats_stop_measure_crit_isr();
 1879              		.loc 3 417 31 view .LVU612
 418:./lib/chibios/os/rt/include/chsys.h ****   port_unlock_from_isr();
 1880              		.loc 3 418 33 view .LVU613
 1881              		.loc 3 419 3 view .LVU614
 1882              	.LBB476:
 1883              	.LBI476:
 719:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 1884              		.loc 4 719 27 view .LVU615
 1885              		.loc 4 721 3 view .LVU616
 1886              	.LBB477:
 1887              	.LBI477:
 693:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 1888              		.loc 4 693 27 view .LVU617
 696:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else /* CORTEX_SIMPLIFIED_PRIORITY */
 1889              		.loc 4 696 3 view .LVU618
 1890              	.LBB478:
 1891              	.LBI478:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 1892              		.loc 5 491 27 view .LVU619
 1893              	.LBB479:
 1894              		.loc 5 493 3 view .LVU620
 1895              		.syntax unified
 1896              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 1897 0052 86F31188 		MSR basepri, r6
 1898              	@ 0 "" 2
 1899              	.LVL118:
 1900              		.thumb
 1901              		.syntax unified
 1902              	.L80:
 1903              		.loc 5 493 3 is_stmt 0 view .LVU621
 1904              	.LBE479:
 1905              	.LBE478:
 1906              	.LBE477:
 1907              	.LBE476:
 1908              	.LBE475:
 1909              	.LBE474:
 1910              	.LBE473:
 732:lib/chibios/os/hal/src/hal_usb.c ****       if (usbp->epc[i] != NULL) {
 1911              		.loc 1 732 52 is_stmt 1 discriminator 2 view .LVU622
 732:lib/chibios/os/hal/src/hal_usb.c ****       if (usbp->epc[i] != NULL) {
 1912              		.loc 1 732 19 discriminator 2 view .LVU623
 1913 0056 A542     		cmp	r5, r4
 1914 0058 E4D1     		bne	.L83
 1915              	.LBE456:
 742:lib/chibios/os/hal/src/hal_usb.c ****       }
 743:lib/chibios/os/hal/src/hal_usb.c ****     }
 744:lib/chibios/os/hal/src/hal_usb.c ****   }
 745:lib/chibios/os/hal/src/hal_usb.c **** #endif
 746:lib/chibios/os/hal/src/hal_usb.c **** }
 1916              		.loc 1 746 1 is_stmt 0 view .LVU624
 1917 005a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1918              		.loc 1 746 1 view .LVU625
 1919              		.cfi_endproc
 1920              	.LFE345:
 1922              		.section	.text._usb_wakeup,"ax",%progbits
 1923              		.align	1
 1924              		.global	_usb_wakeup
 1925              		.syntax unified
 1926              		.thumb
 1927              		.thumb_func
 1928              		.fpu fpv4-sp-d16
 1930              	_usb_wakeup:
 1931              	.LVL119:
 1932              	.LFB346:
 747:lib/chibios/os/hal/src/hal_usb.c **** 
 748:lib/chibios/os/hal/src/hal_usb.c **** /**
 749:lib/chibios/os/hal/src/hal_usb.c ****  * @brief   USB wake-up routine.
 750:lib/chibios/os/hal/src/hal_usb.c ****  * @details This function must be invoked when an USB bus wake-up condition is
 751:lib/chibios/os/hal/src/hal_usb.c ****  *          detected.
 752:lib/chibios/os/hal/src/hal_usb.c ****  *
 753:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] usbp      pointer to the @p USBDriver object
 754:lib/chibios/os/hal/src/hal_usb.c ****  *
 755:lib/chibios/os/hal/src/hal_usb.c ****  * @notapi
 756:lib/chibios/os/hal/src/hal_usb.c ****  */
 757:lib/chibios/os/hal/src/hal_usb.c **** void _usb_wakeup(USBDriver *usbp) {
 1933              		.loc 1 757 35 is_stmt 1 view -0
 1934              		.cfi_startproc
 1935              		@ args = 0, pretend = 0, frame = 0
 1936              		@ frame_needed = 0, uses_anonymous_args = 0
 1937              		@ link register save eliminated.
 758:lib/chibios/os/hal/src/hal_usb.c **** 
 759:lib/chibios/os/hal/src/hal_usb.c ****   /* State transition, returning to the previous state.*/
 760:lib/chibios/os/hal/src/hal_usb.c ****   usbp->state = usbp->saved_state;
 1938              		.loc 1 760 3 view .LVU627
 1939              		.loc 1 760 15 is_stmt 0 view .LVU628
 1940 0000 90F88020 		ldrb	r2, [r0, #128]	@ zero_extendqisi2
 761:lib/chibios/os/hal/src/hal_usb.c **** 
 762:lib/chibios/os/hal/src/hal_usb.c ****   /* Notification of suspend event.*/
 763:lib/chibios/os/hal/src/hal_usb.c ****   _usb_isr_invoke_event_cb(usbp, USB_EVENT_WAKEUP);
 1941              		.loc 1 763 3 view .LVU629
 1942 0004 4368     		ldr	r3, [r0, #4]
 760:lib/chibios/os/hal/src/hal_usb.c **** 
 1943              		.loc 1 760 15 view .LVU630
 1944 0006 0270     		strb	r2, [r0]
 1945              		.loc 1 763 3 is_stmt 1 view .LVU631
 1946 0008 1B68     		ldr	r3, [r3]
 1947 000a 0BB1     		cbz	r3, .L97
 1948              		.loc 1 763 3 discriminator 1 view .LVU632
 1949 000c 0521     		movs	r1, #5
 1950 000e 1847     		bx	r3	@ indirect register sibling call
 1951              	.LVL120:
 1952              	.L97:
 764:lib/chibios/os/hal/src/hal_usb.c **** }
 1953              		.loc 1 764 1 is_stmt 0 view .LVU633
 1954 0010 7047     		bx	lr
 1955              		.cfi_endproc
 1956              	.LFE346:
 1958              		.section	.text._usb_ep0setup,"ax",%progbits
 1959              		.align	1
 1960              		.global	_usb_ep0setup
 1961              		.syntax unified
 1962              		.thumb
 1963              		.thumb_func
 1964              		.fpu fpv4-sp-d16
 1966              	_usb_ep0setup:
 1967              	.LVL121:
 1968              	.LFB347:
 765:lib/chibios/os/hal/src/hal_usb.c **** 
 766:lib/chibios/os/hal/src/hal_usb.c **** /**
 767:lib/chibios/os/hal/src/hal_usb.c ****  * @brief   Default EP0 SETUP callback.
 768:lib/chibios/os/hal/src/hal_usb.c ****  * @details This function is used by the low level driver as default handler
 769:lib/chibios/os/hal/src/hal_usb.c ****  *          for EP0 SETUP events.
 770:lib/chibios/os/hal/src/hal_usb.c ****  *
 771:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] usbp      pointer to the @p USBDriver object
 772:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] ep        endpoint number, always zero
 773:lib/chibios/os/hal/src/hal_usb.c ****  *
 774:lib/chibios/os/hal/src/hal_usb.c ****  * @notapi
 775:lib/chibios/os/hal/src/hal_usb.c ****  */
 776:lib/chibios/os/hal/src/hal_usb.c **** void _usb_ep0setup(USBDriver *usbp, usbep_t ep) {
 1969              		.loc 1 776 49 is_stmt 1 view -0
 1970              		.cfi_startproc
 1971              		@ args = 0, pretend = 0, frame = 0
 1972              		@ frame_needed = 0, uses_anonymous_args = 0
 777:lib/chibios/os/hal/src/hal_usb.c ****   size_t max;
 1973              		.loc 1 777 3 view .LVU635
 778:lib/chibios/os/hal/src/hal_usb.c **** 
 779:lib/chibios/os/hal/src/hal_usb.c ****   /* Is the EP0 state machine in the correct state for handling setup
 780:lib/chibios/os/hal/src/hal_usb.c ****      packets?*/
 781:lib/chibios/os/hal/src/hal_usb.c ****   if (usbp->ep0state != USB_EP0_STP_WAITING) {
 1974              		.loc 1 781 3 view .LVU636
 776:lib/chibios/os/hal/src/hal_usb.c ****   size_t max;
 1975              		.loc 1 776 49 is_stmt 0 view .LVU637
 1976 0000 70B5     		push	{r4, r5, r6, lr}
 1977              		.cfi_def_cfa_offset 16
 1978              		.cfi_offset 4, -16
 1979              		.cfi_offset 5, -12
 1980              		.cfi_offset 6, -8
 1981              		.cfi_offset 14, -4
 1982              		.loc 1 781 6 view .LVU638
 1983 0002 90F86430 		ldrb	r3, [r0, #100]	@ zero_extendqisi2
 776:lib/chibios/os/hal/src/hal_usb.c ****   size_t max;
 1984              		.loc 1 776 49 view .LVU639
 1985 0006 0446     		mov	r4, r0
 1986              		.loc 1 781 6 view .LVU640
 1987 0008 13B1     		cbz	r3, .L100
 782:lib/chibios/os/hal/src/hal_usb.c ****     /* This is unexpected could require handling with a warning event.*/
 783:lib/chibios/os/hal/src/hal_usb.c ****     /* CHTODO: handling here.*/
 784:lib/chibios/os/hal/src/hal_usb.c **** 
 785:lib/chibios/os/hal/src/hal_usb.c ****     /* Resetting the EP0 state machine and going ahead.*/
 786:lib/chibios/os/hal/src/hal_usb.c ****     usbp->ep0state = USB_EP0_STP_WAITING;
 1988              		.loc 1 786 5 is_stmt 1 view .LVU641
 1989              		.loc 1 786 20 is_stmt 0 view .LVU642
 1990 000a 0023     		movs	r3, #0
 1991 000c 80F86430 		strb	r3, [r0, #100]
 1992              	.L100:
 787:lib/chibios/os/hal/src/hal_usb.c ****   }
 788:lib/chibios/os/hal/src/hal_usb.c **** 
 789:lib/chibios/os/hal/src/hal_usb.c ****   /* Reading the setup data into the driver buffer.*/
 790:lib/chibios/os/hal/src/hal_usb.c ****   usbReadSetup(usbp, ep, usbp->setup);
 1993              		.loc 1 790 3 is_stmt 1 view .LVU643
 1994 0010 04F17402 		add	r2, r4, #116
 1995 0014 2046     		mov	r0, r4
 1996              	.LVL122:
 1997              		.loc 1 790 3 is_stmt 0 view .LVU644
 1998 0016 FFF7FEFF 		bl	usb_lld_read_setup
 1999              	.LVL123:
 791:lib/chibios/os/hal/src/hal_usb.c **** 
 792:lib/chibios/os/hal/src/hal_usb.c ****   /* First verify if the application has an handler installed for this
 793:lib/chibios/os/hal/src/hal_usb.c ****      request.*/
 794:lib/chibios/os/hal/src/hal_usb.c ****   /*lint -save -e9007 [13.5] No side effects, it is intentional.*/
 795:lib/chibios/os/hal/src/hal_usb.c ****   if ((usbp->config->requests_hook_cb == NULL) ||
 2000              		.loc 1 795 3 is_stmt 1 view .LVU645
 2001              		.loc 1 795 20 is_stmt 0 view .LVU646
 2002 001a 6368     		ldr	r3, [r4, #4]
 2003 001c 9B68     		ldr	r3, [r3, #8]
 2004              		.loc 1 795 6 view .LVU647
 2005 001e B3B9     		cbnz	r3, .L101
 2006              	.L105:
 796:lib/chibios/os/hal/src/hal_usb.c ****       !(usbp->config->requests_hook_cb(usbp))) {
 797:lib/chibios/os/hal/src/hal_usb.c ****   /*lint -restore*/
 798:lib/chibios/os/hal/src/hal_usb.c ****     /* Invoking the default handler, if this fails then stalls the
 799:lib/chibios/os/hal/src/hal_usb.c ****        endpoint zero as error.*/
 800:lib/chibios/os/hal/src/hal_usb.c ****     /*lint -save -e9007 [13.5] No side effects, it is intentional.*/
 801:lib/chibios/os/hal/src/hal_usb.c ****     if (((usbp->setup[0] & USB_RTYPE_TYPE_MASK) != USB_RTYPE_TYPE_STD) ||
 2007              		.loc 1 801 5 is_stmt 1 view .LVU648
 2008              		.loc 1 801 22 is_stmt 0 view .LVU649
 2009 0020 94F87430 		ldrb	r3, [r4, #116]	@ zero_extendqisi2
 2010              		.loc 1 801 8 view .LVU650
 2011 0024 13F06005 		ands	r5, r3, #96
 2012 0028 35D0     		beq	.L175
 2013              	.L121:
 802:lib/chibios/os/hal/src/hal_usb.c ****         !default_handler(usbp)) {
 803:lib/chibios/os/hal/src/hal_usb.c ****     /*lint -restore*/
 804:lib/chibios/os/hal/src/hal_usb.c ****       /* Error response, the state machine goes into an error state, the low
 805:lib/chibios/os/hal/src/hal_usb.c ****          level layer will have to reset it to USB_EP0_WAITING_SETUP after
 806:lib/chibios/os/hal/src/hal_usb.c ****          receiving a SETUP packet.*/
 807:lib/chibios/os/hal/src/hal_usb.c ****       usb_lld_stall_in(usbp, 0);
 2014              		.loc 1 807 7 is_stmt 1 view .LVU651
 2015 002a 0021     		movs	r1, #0
 2016 002c 2046     		mov	r0, r4
 2017 002e FFF7FEFF 		bl	usb_lld_stall_in
 2018              	.LVL124:
 808:lib/chibios/os/hal/src/hal_usb.c ****       usb_lld_stall_out(usbp, 0);
 2019              		.loc 1 808 7 view .LVU652
 2020 0032 0021     		movs	r1, #0
 2021 0034 2046     		mov	r0, r4
 2022 0036 FFF7FEFF 		bl	usb_lld_stall_out
 2023              	.LVL125:
 809:lib/chibios/os/hal/src/hal_usb.c ****       _usb_isr_invoke_event_cb(usbp, USB_EVENT_STALLED);
 2024              		.loc 1 809 7 view .LVU653
 2025 003a 6368     		ldr	r3, [r4, #4]
 2026 003c 1B68     		ldr	r3, [r3]
 2027 003e 13B1     		cbz	r3, .L133
 2028              		.loc 1 809 7 discriminator 1 view .LVU654
 2029 0040 0621     		movs	r1, #6
 2030 0042 2046     		mov	r0, r4
 2031 0044 9847     		blx	r3
 2032              	.LVL126:
 2033              	.L133:
 2034              		.loc 1 809 56 discriminator 3 view .LVU655
 810:lib/chibios/os/hal/src/hal_usb.c ****       usbp->ep0state = USB_EP0_ERROR;
 2035              		.loc 1 810 7 discriminator 3 view .LVU656
 2036              		.loc 1 810 22 is_stmt 0 discriminator 3 view .LVU657
 2037 0046 0623     		movs	r3, #6
 2038 0048 84F86430 		strb	r3, [r4, #100]
 811:lib/chibios/os/hal/src/hal_usb.c ****       return;
 2039              		.loc 1 811 7 is_stmt 1 discriminator 3 view .LVU658
 2040              	.L99:
 812:lib/chibios/os/hal/src/hal_usb.c ****     }
 813:lib/chibios/os/hal/src/hal_usb.c ****   }
 814:lib/chibios/os/hal/src/hal_usb.c **** #if (USB_SET_ADDRESS_ACK_HANDLING == USB_SET_ADDRESS_ACK_HW)
 815:lib/chibios/os/hal/src/hal_usb.c ****   if (usbp->setup[1] == USB_REQ_SET_ADDRESS) {
 816:lib/chibios/os/hal/src/hal_usb.c ****     /* Zero-length packet sent by hardware */
 817:lib/chibios/os/hal/src/hal_usb.c ****     return;
 818:lib/chibios/os/hal/src/hal_usb.c ****   }
 819:lib/chibios/os/hal/src/hal_usb.c **** #endif
 820:lib/chibios/os/hal/src/hal_usb.c ****   /* Transfer preparation. The request handler must have populated
 821:lib/chibios/os/hal/src/hal_usb.c ****      correctly the fields ep0next, ep0n and ep0endcb using the macro
 822:lib/chibios/os/hal/src/hal_usb.c ****      usbSetupTransfer().*/
 823:lib/chibios/os/hal/src/hal_usb.c ****   max = (size_t)get_hword(&usbp->setup[6]);
 824:lib/chibios/os/hal/src/hal_usb.c ****   /* The transfer size cannot exceed the specified amount.*/
 825:lib/chibios/os/hal/src/hal_usb.c ****   if (usbp->ep0n > max) {
 826:lib/chibios/os/hal/src/hal_usb.c ****     usbp->ep0n = max;
 827:lib/chibios/os/hal/src/hal_usb.c ****   }
 828:lib/chibios/os/hal/src/hal_usb.c ****   if ((usbp->setup[0] & USB_RTYPE_DIR_MASK) == USB_RTYPE_DIR_DEV2HOST) {
 829:lib/chibios/os/hal/src/hal_usb.c ****     /* IN phase.*/
 830:lib/chibios/os/hal/src/hal_usb.c ****     if (usbp->ep0n != 0U) {
 831:lib/chibios/os/hal/src/hal_usb.c ****       /* Starts the transmit phase.*/
 832:lib/chibios/os/hal/src/hal_usb.c ****       usbp->ep0state = USB_EP0_IN_TX;
 833:lib/chibios/os/hal/src/hal_usb.c ****       osalSysLockFromISR();
 834:lib/chibios/os/hal/src/hal_usb.c ****       usbStartTransmitI(usbp, 0, usbp->ep0next, usbp->ep0n);
 835:lib/chibios/os/hal/src/hal_usb.c ****       osalSysUnlockFromISR();
 836:lib/chibios/os/hal/src/hal_usb.c ****     }
 837:lib/chibios/os/hal/src/hal_usb.c ****     else {
 838:lib/chibios/os/hal/src/hal_usb.c ****       /* No transmission phase, directly receiving the zero sized status
 839:lib/chibios/os/hal/src/hal_usb.c ****          packet.*/
 840:lib/chibios/os/hal/src/hal_usb.c ****       usbp->ep0state = USB_EP0_OUT_WAITING_STS;
 841:lib/chibios/os/hal/src/hal_usb.c **** #if (USB_EP0_STATUS_STAGE == USB_EP0_STATUS_STAGE_SW)
 842:lib/chibios/os/hal/src/hal_usb.c ****       osalSysLockFromISR();
 843:lib/chibios/os/hal/src/hal_usb.c ****       usbStartReceiveI(usbp, 0, NULL, 0);
 844:lib/chibios/os/hal/src/hal_usb.c ****       osalSysUnlockFromISR();
 845:lib/chibios/os/hal/src/hal_usb.c **** #else
 846:lib/chibios/os/hal/src/hal_usb.c ****       usb_lld_end_setup(usbp, ep);
 847:lib/chibios/os/hal/src/hal_usb.c **** #endif
 848:lib/chibios/os/hal/src/hal_usb.c ****     }
 849:lib/chibios/os/hal/src/hal_usb.c ****   }
 850:lib/chibios/os/hal/src/hal_usb.c ****   else {
 851:lib/chibios/os/hal/src/hal_usb.c ****     /* OUT phase.*/
 852:lib/chibios/os/hal/src/hal_usb.c ****     if (usbp->ep0n != 0U) {
 853:lib/chibios/os/hal/src/hal_usb.c ****       /* Starts the receive phase.*/
 854:lib/chibios/os/hal/src/hal_usb.c ****       usbp->ep0state = USB_EP0_OUT_RX;
 855:lib/chibios/os/hal/src/hal_usb.c ****       osalSysLockFromISR();
 856:lib/chibios/os/hal/src/hal_usb.c ****       usbStartReceiveI(usbp, 0, (uint8_t *)usbp->ep0next, usbp->ep0n);
 857:lib/chibios/os/hal/src/hal_usb.c ****       osalSysUnlockFromISR();
 858:lib/chibios/os/hal/src/hal_usb.c ****     }
 859:lib/chibios/os/hal/src/hal_usb.c ****     else {
 860:lib/chibios/os/hal/src/hal_usb.c ****       /* No receive phase, directly sending the zero sized status
 861:lib/chibios/os/hal/src/hal_usb.c ****          packet.*/
 862:lib/chibios/os/hal/src/hal_usb.c ****       usbp->ep0state = USB_EP0_IN_SENDING_STS;
 863:lib/chibios/os/hal/src/hal_usb.c **** #if (USB_EP0_STATUS_STAGE == USB_EP0_STATUS_STAGE_SW)
 864:lib/chibios/os/hal/src/hal_usb.c ****       osalSysLockFromISR();
 865:lib/chibios/os/hal/src/hal_usb.c ****       usbStartTransmitI(usbp, 0, NULL, 0);
 866:lib/chibios/os/hal/src/hal_usb.c ****       osalSysUnlockFromISR();
 867:lib/chibios/os/hal/src/hal_usb.c **** #else
 868:lib/chibios/os/hal/src/hal_usb.c ****       usb_lld_end_setup(usbp, ep);
 869:lib/chibios/os/hal/src/hal_usb.c **** #endif
 870:lib/chibios/os/hal/src/hal_usb.c ****     }
 871:lib/chibios/os/hal/src/hal_usb.c ****   }
 872:lib/chibios/os/hal/src/hal_usb.c **** }
 2041              		.loc 1 872 1 is_stmt 0 view .LVU659
 2042 004c 70BD     		pop	{r4, r5, r6, pc}
 2043              	.LVL127:
 2044              	.L101:
 796:lib/chibios/os/hal/src/hal_usb.c ****   /*lint -restore*/
 2045              		.loc 1 796 9 discriminator 1 view .LVU660
 2046 004e 2046     		mov	r0, r4
 2047 0050 9847     		blx	r3
 2048              	.LVL128:
 795:lib/chibios/os/hal/src/hal_usb.c ****       !(usbp->config->requests_hook_cb(usbp))) {
 2049              		.loc 1 795 48 discriminator 1 view .LVU661
 2050 0052 0028     		cmp	r0, #0
 2051 0054 E4D0     		beq	.L105
 2052              	.L104:
 823:lib/chibios/os/hal/src/hal_usb.c ****   /* The transfer size cannot exceed the specified amount.*/
 2053              		.loc 1 823 3 is_stmt 1 view .LVU662
 823:lib/chibios/os/hal/src/hal_usb.c ****   /* The transfer size cannot exceed the specified amount.*/
 2054              		.loc 1 823 7 is_stmt 0 view .LVU663
 2055 0056 B4F87A30 		ldrh	r3, [r4, #122]	@ unaligned
 2056              	.LVL129:
 825:lib/chibios/os/hal/src/hal_usb.c ****     usbp->ep0n = max;
 2057              		.loc 1 825 3 is_stmt 1 view .LVU664
 825:lib/chibios/os/hal/src/hal_usb.c ****     usbp->ep0n = max;
 2058              		.loc 1 825 6 is_stmt 0 view .LVU665
 2059 005a E26E     		ldr	r2, [r4, #108]
 2060 005c 9A42     		cmp	r2, r3
 826:lib/chibios/os/hal/src/hal_usb.c ****   }
 2061              		.loc 1 826 5 is_stmt 1 view .LVU666
 826:lib/chibios/os/hal/src/hal_usb.c ****   }
 2062              		.loc 1 826 16 is_stmt 0 view .LVU667
 2063 005e 88BF     		it	hi
 2064 0060 E366     		strhi	r3, [r4, #108]
 828:lib/chibios/os/hal/src/hal_usb.c ****     /* IN phase.*/
 2065              		.loc 1 828 3 is_stmt 1 view .LVU668
 828:lib/chibios/os/hal/src/hal_usb.c ****     /* IN phase.*/
 2066              		.loc 1 828 6 is_stmt 0 view .LVU669
 2067 0062 94F97430 		ldrsb	r3, [r4, #116]
 2068              	.LVL130:
 830:lib/chibios/os/hal/src/hal_usb.c ****       /* Starts the transmit phase.*/
 2069              		.loc 1 830 13 view .LVU670
 2070 0066 E56E     		ldr	r5, [r4, #108]
 828:lib/chibios/os/hal/src/hal_usb.c ****     /* IN phase.*/
 2071              		.loc 1 828 6 view .LVU671
 2072 0068 002B     		cmp	r3, #0
 2073 006a 4FF02003 		mov	r3, #32
 2074 006e 80F2EF80 		bge	.L136
 830:lib/chibios/os/hal/src/hal_usb.c ****       /* Starts the transmit phase.*/
 2075              		.loc 1 830 5 is_stmt 1 view .LVU672
 830:lib/chibios/os/hal/src/hal_usb.c ****       /* Starts the transmit phase.*/
 2076              		.loc 1 830 8 is_stmt 0 view .LVU673
 2077 0072 002D     		cmp	r5, #0
 2078 0074 00F0DE80 		beq	.L137
 832:lib/chibios/os/hal/src/hal_usb.c ****       osalSysLockFromISR();
 2079              		.loc 1 832 7 is_stmt 1 view .LVU674
 832:lib/chibios/os/hal/src/hal_usb.c ****       osalSysLockFromISR();
 2080              		.loc 1 832 22 is_stmt 0 view .LVU675
 2081 0078 0922     		movs	r2, #9
 2082 007a 84F86420 		strb	r2, [r4, #100]
 833:lib/chibios/os/hal/src/hal_usb.c ****       usbStartTransmitI(usbp, 0, usbp->ep0next, usbp->ep0n);
 2083              		.loc 1 833 7 is_stmt 1 view .LVU676
 2084              	.LBB550:
 2085              	.LBI550:
 595:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 2086              		.loc 2 595 20 view .LVU677
 597:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 2087              		.loc 2 597 3 view .LVU678
 2088              	.LBB551:
 2089              	.LBI551:
 395:./lib/chibios/os/rt/include/chsys.h **** 
 2090              		.loc 3 395 20 view .LVU679
 397:./lib/chibios/os/rt/include/chsys.h ****   _stats_start_measure_crit_isr();
 2091              		.loc 3 397 3 view .LVU680
 2092              	.LBB552:
 2093              	.LBI552:
 708:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2094              		.loc 4 708 27 view .LVU681
 710:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** }
 2095              		.loc 4 710 3 view .LVU682
 2096              	.LBB553:
 2097              	.LBI553:
 669:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2098              		.loc 4 669 27 view .LVU683
 677:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if defined(__CM7_REV)
 2099              		.loc 4 677 3 view .LVU684
 2100              	.LVL131:
 2101              	.LBB554:
 2102              	.LBI554:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 2103              		.loc 5 491 27 view .LVU685
 2104              	.LBB555:
 2105              		.loc 5 493 3 view .LVU686
 2106              		.syntax unified
 2107              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 2108 007e 83F31188 		MSR basepri, r3
 2109              	@ 0 "" 2
 2110              	.LVL132:
 2111              		.loc 5 493 3 is_stmt 0 view .LVU687
 2112              		.thumb
 2113              		.syntax unified
 2114              	.LBE555:
 2115              	.LBE554:
 2116              	.LBE553:
 2117              	.LBE552:
 398:./lib/chibios/os/rt/include/chsys.h ****   _dbg_check_lock_from_isr();
 2118              		.loc 3 398 34 is_stmt 1 view .LVU688
 399:./lib/chibios/os/rt/include/chsys.h **** }
 2119              		.loc 3 399 29 view .LVU689
 2120              	.LBE551:
 2121              	.LBE550:
 834:lib/chibios/os/hal/src/hal_usb.c ****       osalSysUnlockFromISR();
 2122              		.loc 1 834 7 view .LVU690
 2123 0082 0021     		movs	r1, #0
 2124 0084 D4E91A23 		ldrd	r2, r3, [r4, #104]
 2125 0088 2046     		mov	r0, r4
 2126 008a FFF7FEFF 		bl	usbStartTransmitI
 2127              	.LVL133:
 835:lib/chibios/os/hal/src/hal_usb.c ****     }
 2128              		.loc 1 835 7 view .LVU691
 2129              	.LBB556:
 2130              	.LBI556:
 606:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 2131              		.loc 2 606 20 view .LVU692
 2132              	.LBB557:
 608:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 2133              		.loc 2 608 3 view .LVU693
 2134              	.LBB558:
 2135              	.LBI558:
 415:./lib/chibios/os/rt/include/chsys.h **** 
 2136              		.loc 3 415 20 view .LVU694
 417:./lib/chibios/os/rt/include/chsys.h ****   _stats_stop_measure_crit_isr();
 2137              		.loc 3 417 31 view .LVU695
 418:./lib/chibios/os/rt/include/chsys.h ****   port_unlock_from_isr();
 2138              		.loc 3 418 33 view .LVU696
 2139              		.loc 3 419 3 view .LVU697
 2140              	.LBB559:
 2141              	.LBI559:
 719:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2142              		.loc 4 719 27 view .LVU698
 2143              		.loc 4 721 3 view .LVU699
 2144              	.LBB560:
 2145              	.LBI560:
 693:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2146              		.loc 4 693 27 view .LVU700
 696:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else /* CORTEX_SIMPLIFIED_PRIORITY */
 2147              		.loc 4 696 3 view .LVU701
 2148              	.LBB561:
 2149              	.LBI561:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 2150              		.loc 5 491 27 view .LVU702
 2151              	.LBB562:
 2152              		.loc 5 493 3 view .LVU703
 2153              	.L185:
 2154              		.loc 5 493 3 is_stmt 0 view .LVU704
 2155              	.LBE562:
 2156              	.LBE561:
 2157              	.LBE560:
 2158              	.LBE559:
 2159              	.LBE558:
 2160              	.LBE557:
 2161              	.LBE556:
 857:lib/chibios/os/hal/src/hal_usb.c ****     }
 2162              		.loc 1 857 7 is_stmt 1 view .LVU705
 2163              	.LBB563:
 2164              	.LBI563:
 606:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 2165              		.loc 2 606 20 view .LVU706
 2166              	.LBB564:
 608:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 2167              		.loc 2 608 3 view .LVU707
 2168              	.LBB565:
 2169              	.LBI565:
 415:./lib/chibios/os/rt/include/chsys.h **** 
 2170              		.loc 3 415 20 view .LVU708
 417:./lib/chibios/os/rt/include/chsys.h ****   _stats_stop_measure_crit_isr();
 2171              		.loc 3 417 31 view .LVU709
 418:./lib/chibios/os/rt/include/chsys.h ****   port_unlock_from_isr();
 2172              		.loc 3 418 33 view .LVU710
 2173              		.loc 3 419 3 view .LVU711
 2174              	.LBB566:
 2175              	.LBI566:
 719:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2176              		.loc 4 719 27 view .LVU712
 2177              		.loc 4 721 3 view .LVU713
 2178              	.LBB567:
 2179              	.LBI567:
 693:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2180              		.loc 4 693 27 view .LVU714
 696:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else /* CORTEX_SIMPLIFIED_PRIORITY */
 2181              		.loc 4 696 3 view .LVU715
 2182              	.LBB568:
 2183              	.LBI568:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 2184              		.loc 5 491 27 view .LVU716
 2185              	.LBB569:
 2186              		.loc 5 493 3 view .LVU717
 2187 008e 0023     		movs	r3, #0
 2188              		.syntax unified
 2189              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 2190 0090 83F31188 		MSR basepri, r3
 2191              	@ 0 "" 2
 2192              	.LVL134:
 2193              		.loc 5 493 3 is_stmt 0 view .LVU718
 2194              		.thumb
 2195              		.syntax unified
 2196              	.LBE569:
 2197              	.LBE568:
 2198              	.LBE567:
 2199              	.LBE566:
 2200              	.LBE565:
 609:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 2201              		.loc 2 609 1 view .LVU719
 2202 0094 DAE7     		b	.L99
 2203              	.L175:
 2204              	.LVL135:
 609:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 2205              		.loc 2 609 1 view .LVU720
 2206              	.LBE564:
 2207              	.LBE563:
 2208              	.LBB570:
 2209              	.LBI570:
  84:lib/chibios/os/hal/src/hal_usb.c ****   const USBDescriptor *dp;
 2210              		.loc 1 84 13 is_stmt 1 view .LVU721
 2211              	.LBB571:
  85:lib/chibios/os/hal/src/hal_usb.c **** 
 2212              		.loc 1 85 3 view .LVU722
  88:lib/chibios/os/hal/src/hal_usb.c ****                                         USB_RTYPE_TYPE_MASK)) |
 2213              		.loc 1 88 3 view .LVU723
  90:lib/chibios/os/hal/src/hal_usb.c ****   case (uint32_t)USB_RTYPE_RECIPIENT_DEVICE | ((uint32_t)USB_REQ_GET_STATUS << 8):
 2214              		.loc 1 90 13 is_stmt 0 view .LVU724
 2215 0096 94F87520 		ldrb	r2, [r4, #117]	@ zero_extendqisi2
  88:lib/chibios/os/hal/src/hal_usb.c ****                                         USB_RTYPE_TYPE_MASK)) |
 2216              		.loc 1 88 38 view .LVU725
 2217 009a 03F07F03 		and	r3, r3, #127
  89:lib/chibios/os/hal/src/hal_usb.c ****            ((uint32_t)usbp->setup[1] << 8U))) {
 2218              		.loc 1 89 63 view .LVU726
 2219 009e 43EA0223 		orr	r3, r3, r2, lsl #8
  88:lib/chibios/os/hal/src/hal_usb.c ****                                         USB_RTYPE_TYPE_MASK)) |
 2220              		.loc 1 88 3 view .LVU727
 2221 00a2 40F20232 		movw	r2, #770
 2222 00a6 9342     		cmp	r3, r2
 2223 00a8 00F0B180 		beq	.L106
 2224 00ac 20D8     		bhi	.L107
 2225 00ae B3F5807F 		cmp	r3, #256
 2226 00b2 47D0     		beq	.L108
 2227 00b4 0CD8     		bhi	.L109
 2228 00b6 012B     		cmp	r3, #1
 2229 00b8 3ED0     		beq	.L110
 2230 00ba 022B     		cmp	r3, #2
 2231 00bc 7FD0     		beq	.L111
 2232 00be 002B     		cmp	r3, #0
 2233 00c0 B3D1     		bne	.L121
  93:lib/chibios/os/hal/src/hal_usb.c ****     return true;
 2234              		.loc 1 93 5 is_stmt 1 view .LVU728
 2235 00c2 04F17C02 		add	r2, r4, #124
 2236 00c6 A266     		str	r2, [r4, #104]
  93:lib/chibios/os/hal/src/hal_usb.c ****     return true;
 2237              		.loc 1 93 5 view .LVU729
 2238 00c8 0222     		movs	r2, #2
 2239 00ca E266     		str	r2, [r4, #108]
  93:lib/chibios/os/hal/src/hal_usb.c ****     return true;
 2240              		.loc 1 93 5 view .LVU730
 2241              	.L182:
 190:lib/chibios/os/hal/src/hal_usb.c ****         /*lint -restore*/
 2242              		.loc 1 190 9 is_stmt 0 view .LVU731
 2243 00cc 2367     		str	r3, [r4, #112]
 190:lib/chibios/os/hal/src/hal_usb.c ****         /*lint -restore*/
 2244              		.loc 1 190 66 is_stmt 1 view .LVU732
 192:lib/chibios/os/hal/src/hal_usb.c ****       case EP_STATUS_DISABLED:
 2245              		.loc 1 192 9 view .LVU733
 2246              	.LVL136:
 192:lib/chibios/os/hal/src/hal_usb.c ****       case EP_STATUS_DISABLED:
 2247              		.loc 1 192 9 is_stmt 0 view .LVU734
 2248 00ce C2E7     		b	.L104
 2249              	.LVL137:
 2250              	.L109:
  88:lib/chibios/os/hal/src/hal_usb.c ****                                         USB_RTYPE_TYPE_MASK)) |
 2251              		.loc 1 88 3 view .LVU735
 2252 00d0 B3F5817F 		cmp	r3, #258
 2253 00d4 00F08880 		beq	.L114
 2254 00d8 B3F5407F 		cmp	r3, #768
 2255 00dc A5D1     		bne	.L121
 107:lib/chibios/os/hal/src/hal_usb.c ****       usbp->status |= 2U;
 2256              		.loc 1 107 5 is_stmt 1 view .LVU736
 107:lib/chibios/os/hal/src/hal_usb.c ****       usbp->status |= 2U;
 2257              		.loc 1 107 8 is_stmt 0 view .LVU737
 2258 00de 94F87630 		ldrb	r3, [r4, #118]	@ zero_extendqisi2
 2259 00e2 012B     		cmp	r3, #1
 2260 00e4 A1D1     		bne	.L121
 108:lib/chibios/os/hal/src/hal_usb.c ****       usbSetupTransfer(usbp, NULL, 0, NULL);
 2261              		.loc 1 108 7 is_stmt 1 view .LVU738
 108:lib/chibios/os/hal/src/hal_usb.c ****       usbSetupTransfer(usbp, NULL, 0, NULL);
 2262              		.loc 1 108 20 is_stmt 0 view .LVU739
 2263 00e6 B4F87C30 		ldrh	r3, [r4, #124]
 2264 00ea 43F00203 		orr	r3, r3, #2
 2265 00ee 32E0     		b	.L180
 2266              	.L107:
  88:lib/chibios/os/hal/src/hal_usb.c ****                                         USB_RTYPE_TYPE_MASK)) |
 2267              		.loc 1 88 3 view .LVU740
 2268 00f0 B3F5006F 		cmp	r3, #2048
 2269 00f4 39D0     		beq	.L116
 2270 00f6 17D8     		bhi	.L117
 2271 00f8 B3F5A06F 		cmp	r3, #1280
 2272 00fc 31D0     		beq	.L118
 2273 00fe A3F5C063 		sub	r3, r3, #1536
 2274 0102 012B     		cmp	r3, #1
 2275 0104 91D8     		bhi	.L121
 130:lib/chibios/os/hal/src/hal_usb.c ****                                          usbp->setup[2],
 2276              		.loc 1 130 5 is_stmt 1 view .LVU741
 130:lib/chibios/os/hal/src/hal_usb.c ****                                          usbp->setup[2],
 2277              		.loc 1 130 22 is_stmt 0 view .LVU742
 2278 0106 6368     		ldr	r3, [r4, #4]
 130:lib/chibios/os/hal/src/hal_usb.c ****                                          usbp->setup[2],
 2279              		.loc 1 130 10 view .LVU743
 2280 0108 94F87620 		ldrb	r2, [r4, #118]	@ zero_extendqisi2
 2281 010c 5E68     		ldr	r6, [r3, #4]
 2282 010e 94F87710 		ldrb	r1, [r4, #119]	@ zero_extendqisi2
 2283 0112 B4F87830 		ldrh	r3, [r4, #120]	@ unaligned
 2284 0116 2046     		mov	r0, r4
 2285 0118 B047     		blx	r6
 2286              	.LVL138:
 133:lib/chibios/os/hal/src/hal_usb.c ****       return false;
 2287              		.loc 1 133 5 is_stmt 1 view .LVU744
 133:lib/chibios/os/hal/src/hal_usb.c ****       return false;
 2288              		.loc 1 133 8 is_stmt 0 view .LVU745
 2289 011a 0028     		cmp	r0, #0
 2290 011c 85D0     		beq	.L121
 137:lib/chibios/os/hal/src/hal_usb.c ****     /*lint -restore*/
 2291              		.loc 1 137 5 is_stmt 1 view .LVU746
 2292 011e 4368     		ldr	r3, [r0, #4]
 2293 0120 A366     		str	r3, [r4, #104]
 137:lib/chibios/os/hal/src/hal_usb.c ****     /*lint -restore*/
 2294              		.loc 1 137 5 view .LVU747
 2295 0122 0368     		ldr	r3, [r0]
 2296              	.LVL139:
 2297              	.L179:
 142:lib/chibios/os/hal/src/hal_usb.c ****     return true;
 2298              		.loc 1 142 5 is_stmt 0 view .LVU748
 2299 0124 E366     		str	r3, [r4, #108]
 142:lib/chibios/os/hal/src/hal_usb.c ****     return true;
 2300              		.loc 1 142 5 is_stmt 1 view .LVU749
 2301 0126 1AE0     		b	.L181
 2302              	.L117:
  88:lib/chibios/os/hal/src/hal_usb.c ****                                         USB_RTYPE_TYPE_MASK)) |
 2303              		.loc 1 88 3 is_stmt 0 view .LVU750
 2304 0128 B3F5106F 		cmp	r3, #2304
 2305 012c 22D0     		beq	.L120
 2306 012e 40F60242 		movw	r2, #3074
 2307 0132 9342     		cmp	r3, r2
 2308 0134 7FF479AF 		bne	.L121
 2309              	.L110:
 176:lib/chibios/os/hal/src/hal_usb.c ****     /*lint -restore*/
 2310              		.loc 1 176 5 is_stmt 1 view .LVU751
 2311 0138 524B     		ldr	r3, .L188
 2312              	.L183:
 190:lib/chibios/os/hal/src/hal_usb.c ****         /*lint -restore*/
 2313              		.loc 1 190 9 is_stmt 0 view .LVU752
 2314 013a A366     		str	r3, [r4, #104]
 190:lib/chibios/os/hal/src/hal_usb.c ****         /*lint -restore*/
 2315              		.loc 1 190 9 is_stmt 1 view .LVU753
 2316 013c 0223     		movs	r3, #2
 2317 013e E366     		str	r3, [r4, #108]
 190:lib/chibios/os/hal/src/hal_usb.c ****         /*lint -restore*/
 2318              		.loc 1 190 9 view .LVU754
 2319 0140 0023     		movs	r3, #0
 2320 0142 C3E7     		b	.L182
 2321              	.L108:
  98:lib/chibios/os/hal/src/hal_usb.c ****       usbp->status &= ~2U;
 2322              		.loc 1 98 5 view .LVU755
  98:lib/chibios/os/hal/src/hal_usb.c ****       usbp->status &= ~2U;
 2323              		.loc 1 98 8 is_stmt 0 view .LVU756
 2324 0144 94F87630 		ldrb	r3, [r4, #118]	@ zero_extendqisi2
 2325 0148 012B     		cmp	r3, #1
 2326 014a 7FF46EAF 		bne	.L121
  99:lib/chibios/os/hal/src/hal_usb.c ****       usbSetupTransfer(usbp, NULL, 0, NULL);
 2327              		.loc 1 99 7 is_stmt 1 view .LVU757
  99:lib/chibios/os/hal/src/hal_usb.c ****       usbSetupTransfer(usbp, NULL, 0, NULL);
 2328              		.loc 1 99 20 is_stmt 0 view .LVU758
 2329 014e B4F87C30 		ldrh	r3, [r4, #124]
 2330 0152 23F00203 		bic	r3, r3, #2
 2331              	.L180:
 109:lib/chibios/os/hal/src/hal_usb.c ****       return true;
 2332              		.loc 1 109 7 view .LVU759
 2333 0156 C4E91A55 		strd	r5, r5, [r4, #104]
 108:lib/chibios/os/hal/src/hal_usb.c ****       usbSetupTransfer(usbp, NULL, 0, NULL);
 2334              		.loc 1 108 20 view .LVU760
 2335 015a A4F87C30 		strh	r3, [r4, #124]	@ movhi
 109:lib/chibios/os/hal/src/hal_usb.c ****       return true;
 2336              		.loc 1 109 7 is_stmt 1 view .LVU761
 2337              	.L181:
 109:lib/chibios/os/hal/src/hal_usb.c ****       return true;
 2338              		.loc 1 109 7 view .LVU762
 2339 015e 2567     		str	r5, [r4, #112]
 109:lib/chibios/os/hal/src/hal_usb.c ****       return true;
 2340              		.loc 1 109 44 view .LVU763
 110:lib/chibios/os/hal/src/hal_usb.c ****     }
 2341              		.loc 1 110 7 view .LVU764
 2342              	.LVL140:
 110:lib/chibios/os/hal/src/hal_usb.c ****     }
 2343              		.loc 1 110 7 is_stmt 0 view .LVU765
 2344 0160 79E7     		b	.L104
 2345              	.LVL141:
 2346              	.L118:
 124:lib/chibios/os/hal/src/hal_usb.c **** #endif
 2347              		.loc 1 124 5 is_stmt 1 view .LVU766
 2348 0162 C4E91A55 		strd	r5, r5, [r4, #104]
 124:lib/chibios/os/hal/src/hal_usb.c **** #endif
 2349              		.loc 1 124 5 view .LVU767
 2350 0166 484B     		ldr	r3, .L188+4
 2351 0168 B0E7     		b	.L182
 2352              	.L116:
 142:lib/chibios/os/hal/src/hal_usb.c ****     return true;
 2353              		.loc 1 142 5 view .LVU768
 2354 016a 04F17F03 		add	r3, r4, #127
 2355 016e A366     		str	r3, [r4, #104]
 142:lib/chibios/os/hal/src/hal_usb.c ****     return true;
 2356              		.loc 1 142 5 view .LVU769
 2357 0170 0123     		movs	r3, #1
 2358 0172 D7E7     		b	.L179
 2359              	.L120:
 153:lib/chibios/os/hal/src/hal_usb.c ****         /* Current configuration cleared.*/
 2360              		.loc 1 153 7 view .LVU770
 153:lib/chibios/os/hal/src/hal_usb.c ****         /* Current configuration cleared.*/
 2361              		.loc 1 153 10 is_stmt 0 view .LVU771
 2362 0174 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 2363 0176 042B     		cmp	r3, #4
 2364 0178 10D1     		bne	.L123
 155:lib/chibios/os/hal/src/hal_usb.c ****         usbDisableEndpointsI(usbp);
 2365              		.loc 1 155 9 is_stmt 1 view .LVU772
 2366              	.LBB572:
 2367              	.LBI572:
 595:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 2368              		.loc 2 595 20 view .LVU773
 597:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 2369              		.loc 2 597 3 view .LVU774
 2370              	.LBB573:
 2371              	.LBI573:
 395:./lib/chibios/os/rt/include/chsys.h **** 
 2372              		.loc 3 395 20 view .LVU775
 397:./lib/chibios/os/rt/include/chsys.h ****   _stats_start_measure_crit_isr();
 2373              		.loc 3 397 3 view .LVU776
 2374              	.LBB574:
 2375              	.LBI574:
 708:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2376              		.loc 4 708 27 view .LVU777
 710:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** }
 2377              		.loc 4 710 3 view .LVU778
 2378              	.LBB575:
 2379              	.LBI575:
 669:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2380              		.loc 4 669 27 view .LVU779
 677:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if defined(__CM7_REV)
 2381              		.loc 4 677 3 view .LVU780
 2382              	.LVL142:
 2383              	.LBB576:
 2384              	.LBI576:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 2385              		.loc 5 491 27 view .LVU781
 2386              	.LBB577:
 2387              		.loc 5 493 3 view .LVU782
 2388 017a 2023     		movs	r3, #32
 2389              		.syntax unified
 2390              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 2391 017c 83F31188 		MSR basepri, r3
 2392              	@ 0 "" 2
 2393              	.LVL143:
 2394              		.loc 5 493 3 is_stmt 0 view .LVU783
 2395              		.thumb
 2396              		.syntax unified
 2397              	.LBE577:
 2398              	.LBE576:
 2399              	.LBE575:
 2400              	.LBE574:
 398:./lib/chibios/os/rt/include/chsys.h ****   _dbg_check_lock_from_isr();
 2401              		.loc 3 398 34 is_stmt 1 view .LVU784
 399:./lib/chibios/os/rt/include/chsys.h **** }
 2402              		.loc 3 399 29 view .LVU785
 2403              	.LBE573:
 2404              	.LBE572:
 156:lib/chibios/os/hal/src/hal_usb.c ****         osalSysUnlockFromISR ();
 2405              		.loc 1 156 9 view .LVU786
 2406 0180 2046     		mov	r0, r4
 2407 0182 FFF7FEFF 		bl	usbDisableEndpointsI
 2408              	.LVL144:
 157:lib/chibios/os/hal/src/hal_usb.c ****         usbp->configuration = 0U;
 2409              		.loc 1 157 9 view .LVU787
 2410              	.LBB578:
 2411              	.LBI578:
 606:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 2412              		.loc 2 606 20 view .LVU788
 608:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 2413              		.loc 2 608 3 view .LVU789
 2414              	.LBB579:
 2415              	.LBI579:
 415:./lib/chibios/os/rt/include/chsys.h **** 
 2416              		.loc 3 415 20 view .LVU790
 417:./lib/chibios/os/rt/include/chsys.h ****   _stats_stop_measure_crit_isr();
 2417              		.loc 3 417 31 view .LVU791
 418:./lib/chibios/os/rt/include/chsys.h ****   port_unlock_from_isr();
 2418              		.loc 3 418 33 view .LVU792
 2419              		.loc 3 419 3 view .LVU793
 2420              	.LBB580:
 2421              	.LBI580:
 719:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2422              		.loc 4 719 27 view .LVU794
 2423              		.loc 4 721 3 view .LVU795
 2424              	.LBB581:
 2425              	.LBI581:
 693:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2426              		.loc 4 693 27 view .LVU796
 696:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else /* CORTEX_SIMPLIFIED_PRIORITY */
 2427              		.loc 4 696 3 view .LVU797
 2428              	.LBB582:
 2429              	.LBI582:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 2430              		.loc 5 491 27 view .LVU798
 2431              	.LBB583:
 2432              		.loc 5 493 3 view .LVU799
 2433              		.syntax unified
 2434              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 2435 0186 85F31188 		MSR basepri, r5
 2436              	@ 0 "" 2
 2437              	.LVL145:
 2438              		.loc 5 493 3 is_stmt 0 view .LVU800
 2439              		.thumb
 2440              		.syntax unified
 2441              	.LBE583:
 2442              	.LBE582:
 2443              	.LBE581:
 2444              	.LBE580:
 2445              	.LBE579:
 2446              	.LBE578:
 158:lib/chibios/os/hal/src/hal_usb.c ****         usbp->state = USB_SELECTED;
 2447              		.loc 1 158 9 is_stmt 1 view .LVU801
 159:lib/chibios/os/hal/src/hal_usb.c ****         _usb_isr_invoke_event_cb(usbp, USB_EVENT_UNCONFIGURED);
 2448              		.loc 1 159 21 is_stmt 0 view .LVU802
 2449 018a 0321     		movs	r1, #3
 160:lib/chibios/os/hal/src/hal_usb.c ****       }
 2450              		.loc 1 160 9 view .LVU803
 2451 018c 6368     		ldr	r3, [r4, #4]
 158:lib/chibios/os/hal/src/hal_usb.c ****         usbp->state = USB_SELECTED;
 2452              		.loc 1 158 29 view .LVU804
 2453 018e 84F87F50 		strb	r5, [r4, #127]
 159:lib/chibios/os/hal/src/hal_usb.c ****         _usb_isr_invoke_event_cb(usbp, USB_EVENT_UNCONFIGURED);
 2454              		.loc 1 159 9 is_stmt 1 view .LVU805
 159:lib/chibios/os/hal/src/hal_usb.c ****         _usb_isr_invoke_event_cb(usbp, USB_EVENT_UNCONFIGURED);
 2455              		.loc 1 159 21 is_stmt 0 view .LVU806
 2456 0192 2170     		strb	r1, [r4]
 160:lib/chibios/os/hal/src/hal_usb.c ****       }
 2457              		.loc 1 160 9 is_stmt 1 view .LVU807
 2458 0194 1B68     		ldr	r3, [r3]
 2459 0196 0BB1     		cbz	r3, .L123
 160:lib/chibios/os/hal/src/hal_usb.c ****       }
 2460              		.loc 1 160 9 view .LVU808
 2461 0198 2046     		mov	r0, r4
 2462 019a 9847     		blx	r3
 2463              	.LVL146:
 2464              	.L123:
 160:lib/chibios/os/hal/src/hal_usb.c ****       }
 2465              		.loc 1 160 63 view .LVU809
 162:lib/chibios/os/hal/src/hal_usb.c ****         /* New configuration.*/
 2466              		.loc 1 162 7 view .LVU810
 162:lib/chibios/os/hal/src/hal_usb.c ****         /* New configuration.*/
 2467              		.loc 1 162 22 is_stmt 0 view .LVU811
 2468 019c 94F87630 		ldrb	r3, [r4, #118]	@ zero_extendqisi2
 162:lib/chibios/os/hal/src/hal_usb.c ****         /* New configuration.*/
 2469              		.loc 1 162 10 view .LVU812
 2470 01a0 4BB1     		cbz	r3, .L126
 164:lib/chibios/os/hal/src/hal_usb.c ****         usbp->state = USB_ACTIVE;
 2471              		.loc 1 164 9 is_stmt 1 view .LVU813
 164:lib/chibios/os/hal/src/hal_usb.c ****         usbp->state = USB_ACTIVE;
 2472              		.loc 1 164 29 is_stmt 0 view .LVU814
 2473 01a2 84F87F30 		strb	r3, [r4, #127]
 165:lib/chibios/os/hal/src/hal_usb.c ****         _usb_isr_invoke_event_cb(usbp, USB_EVENT_CONFIGURED);
 2474              		.loc 1 165 9 is_stmt 1 view .LVU815
 165:lib/chibios/os/hal/src/hal_usb.c ****         _usb_isr_invoke_event_cb(usbp, USB_EVENT_CONFIGURED);
 2475              		.loc 1 165 21 is_stmt 0 view .LVU816
 2476 01a6 0423     		movs	r3, #4
 2477 01a8 2370     		strb	r3, [r4]
 166:lib/chibios/os/hal/src/hal_usb.c ****       }
 2478              		.loc 1 166 9 is_stmt 1 view .LVU817
 2479 01aa 6368     		ldr	r3, [r4, #4]
 2480 01ac 1B68     		ldr	r3, [r3]
 2481 01ae 13B1     		cbz	r3, .L126
 166:lib/chibios/os/hal/src/hal_usb.c ****       }
 2482              		.loc 1 166 9 view .LVU818
 2483 01b0 0221     		movs	r1, #2
 2484 01b2 2046     		mov	r0, r4
 2485 01b4 9847     		blx	r3
 2486              	.LVL147:
 2487              	.L126:
 166:lib/chibios/os/hal/src/hal_usb.c ****       }
 2488              		.loc 1 166 61 view .LVU819
 169:lib/chibios/os/hal/src/hal_usb.c ****     return true;
 2489              		.loc 1 169 5 view .LVU820
 2490 01b6 0023     		movs	r3, #0
 2491 01b8 C4E91A33 		strd	r3, r3, [r4, #104]
 169:lib/chibios/os/hal/src/hal_usb.c ****     return true;
 2492              		.loc 1 169 5 view .LVU821
 2493 01bc 86E7     		b	.L182
 2494              	.L111:
 181:lib/chibios/os/hal/src/hal_usb.c ****       switch (usb_lld_get_status_in(usbp, usbp->setup[4] & 0x0FU)) {
 2495              		.loc 1 181 5 view .LVU822
 181:lib/chibios/os/hal/src/hal_usb.c ****       switch (usb_lld_get_status_in(usbp, usbp->setup[4] & 0x0FU)) {
 2496              		.loc 1 181 21 is_stmt 0 view .LVU823
 2497 01be 94F87830 		ldrb	r3, [r4, #120]	@ zero_extendqisi2
 181:lib/chibios/os/hal/src/hal_usb.c ****       switch (usb_lld_get_status_in(usbp, usbp->setup[4] & 0x0FU)) {
 2498              		.loc 1 181 8 view .LVU824
 2499 01c2 1D06     		lsls	r5, r3, #24
 182:lib/chibios/os/hal/src/hal_usb.c ****       case EP_STATUS_STALLED:
 2500              		.loc 1 182 15 view .LVU825
 2501 01c4 03F00F01 		and	r1, r3, #15
 2502 01c8 2046     		mov	r0, r4
 181:lib/chibios/os/hal/src/hal_usb.c ****       switch (usb_lld_get_status_in(usbp, usbp->setup[4] & 0x0FU)) {
 2503              		.loc 1 181 8 view .LVU826
 2504 01ca 0AD5     		bpl	.L128
 2505              	.LVL148:
 182:lib/chibios/os/hal/src/hal_usb.c ****       case EP_STATUS_STALLED:
 2506              		.loc 1 182 7 is_stmt 1 view .LVU827
 182:lib/chibios/os/hal/src/hal_usb.c ****       case EP_STATUS_STALLED:
 2507              		.loc 1 182 15 is_stmt 0 view .LVU828
 2508 01cc FFF7FEFF 		bl	usb_lld_get_status_in
 2509              	.LVL149:
 2510              	.L187:
 199:lib/chibios/os/hal/src/hal_usb.c ****       case EP_STATUS_STALLED:
 2511              		.loc 1 199 7 view .LVU829
 2512 01d0 0128     		cmp	r0, #1
 2513 01d2 04D0     		beq	.L129
 2514 01d4 0228     		cmp	r0, #2
 2515 01d6 7FF428AF 		bne	.L121
 190:lib/chibios/os/hal/src/hal_usb.c ****         /*lint -restore*/
 2516              		.loc 1 190 9 is_stmt 1 view .LVU830
 2517 01da 2C4B     		ldr	r3, .L188+8
 2518 01dc ADE7     		b	.L183
 2519              	.L129:
 185:lib/chibios/os/hal/src/hal_usb.c ****         /*lint -restore*/
 2520              		.loc 1 185 9 view .LVU831
 2521 01de 2C4B     		ldr	r3, .L188+12
 2522 01e0 ABE7     		b	.L183
 2523              	.LVL150:
 2524              	.L128:
 199:lib/chibios/os/hal/src/hal_usb.c ****       case EP_STATUS_STALLED:
 2525              		.loc 1 199 7 view .LVU832
 199:lib/chibios/os/hal/src/hal_usb.c ****       case EP_STATUS_STALLED:
 2526              		.loc 1 199 15 is_stmt 0 view .LVU833
 2527 01e2 FFF7FEFF 		bl	usb_lld_get_status_out
 2528              	.LVL151:
 199:lib/chibios/os/hal/src/hal_usb.c ****       case EP_STATUS_STALLED:
 2529              		.loc 1 199 15 view .LVU834
 2530 01e6 F3E7     		b	.L187
 2531              	.L114:
 217:lib/chibios/os/hal/src/hal_usb.c ****       return false;
 2532              		.loc 1 217 5 is_stmt 1 view .LVU835
 217:lib/chibios/os/hal/src/hal_usb.c ****       return false;
 2533              		.loc 1 217 8 is_stmt 0 view .LVU836
 2534 01e8 94F87630 		ldrb	r3, [r4, #118]	@ zero_extendqisi2
 2535 01ec 002B     		cmp	r3, #0
 2536 01ee 7FF41CAF 		bne	.L121
 221:lib/chibios/os/hal/src/hal_usb.c ****       if ((usbp->setup[4] & 0x80U) != 0U) {
 2537              		.loc 1 221 5 is_stmt 1 view .LVU837
 221:lib/chibios/os/hal/src/hal_usb.c ****       if ((usbp->setup[4] & 0x80U) != 0U) {
 2538              		.loc 1 221 21 is_stmt 0 view .LVU838
 2539 01f2 94F87830 		ldrb	r3, [r4, #120]	@ zero_extendqisi2
 221:lib/chibios/os/hal/src/hal_usb.c ****       if ((usbp->setup[4] & 0x80U) != 0U) {
 2540              		.loc 1 221 8 view .LVU839
 2541 01f6 13F00F01 		ands	r1, r3, #15
 2542 01fa DCD0     		beq	.L126
 222:lib/chibios/os/hal/src/hal_usb.c ****         usb_lld_clear_in(usbp, usbp->setup[4] & 0x0FU);
 2543              		.loc 1 222 7 is_stmt 1 view .LVU840
 222:lib/chibios/os/hal/src/hal_usb.c ****         usb_lld_clear_in(usbp, usbp->setup[4] & 0x0FU);
 2544              		.loc 1 222 10 is_stmt 0 view .LVU841
 2545 01fc 1A06     		lsls	r2, r3, #24
 223:lib/chibios/os/hal/src/hal_usb.c ****       }
 2546              		.loc 1 223 9 view .LVU842
 2547 01fe 2046     		mov	r0, r4
 222:lib/chibios/os/hal/src/hal_usb.c ****         usb_lld_clear_in(usbp, usbp->setup[4] & 0x0FU);
 2548              		.loc 1 222 10 view .LVU843
 2549 0200 02D5     		bpl	.L131
 2550              	.LVL152:
 223:lib/chibios/os/hal/src/hal_usb.c ****       }
 2551              		.loc 1 223 9 is_stmt 1 view .LVU844
 2552 0202 FFF7FEFF 		bl	usb_lld_clear_in
 2553              	.LVL153:
 223:lib/chibios/os/hal/src/hal_usb.c ****       }
 2554              		.loc 1 223 9 is_stmt 0 view .LVU845
 2555 0206 D6E7     		b	.L126
 2556              	.LVL154:
 2557              	.L131:
 226:lib/chibios/os/hal/src/hal_usb.c ****       }
 2558              		.loc 1 226 9 is_stmt 1 view .LVU846
 2559 0208 FFF7FEFF 		bl	usb_lld_clear_out
 2560              	.LVL155:
 226:lib/chibios/os/hal/src/hal_usb.c ****       }
 2561              		.loc 1 226 9 is_stmt 0 view .LVU847
 2562 020c D3E7     		b	.L126
 2563              	.L106:
 233:lib/chibios/os/hal/src/hal_usb.c ****       return false;
 2564              		.loc 1 233 5 is_stmt 1 view .LVU848
 233:lib/chibios/os/hal/src/hal_usb.c ****       return false;
 2565              		.loc 1 233 8 is_stmt 0 view .LVU849
 2566 020e 94F87630 		ldrb	r3, [r4, #118]	@ zero_extendqisi2
 2567 0212 002B     		cmp	r3, #0
 2568 0214 7FF409AF 		bne	.L121
 237:lib/chibios/os/hal/src/hal_usb.c ****       if ((usbp->setup[4] & 0x80U) != 0U) {
 2569              		.loc 1 237 5 is_stmt 1 view .LVU850
 237:lib/chibios/os/hal/src/hal_usb.c ****       if ((usbp->setup[4] & 0x80U) != 0U) {
 2570              		.loc 1 237 21 is_stmt 0 view .LVU851
 2571 0218 94F87830 		ldrb	r3, [r4, #120]	@ zero_extendqisi2
 237:lib/chibios/os/hal/src/hal_usb.c ****       if ((usbp->setup[4] & 0x80U) != 0U) {
 2572              		.loc 1 237 8 view .LVU852
 2573 021c 13F00F01 		ands	r1, r3, #15
 2574 0220 C9D0     		beq	.L126
 238:lib/chibios/os/hal/src/hal_usb.c ****         usb_lld_stall_in(usbp, usbp->setup[4] & 0x0FU);
 2575              		.loc 1 238 7 is_stmt 1 view .LVU853
 238:lib/chibios/os/hal/src/hal_usb.c ****         usb_lld_stall_in(usbp, usbp->setup[4] & 0x0FU);
 2576              		.loc 1 238 10 is_stmt 0 view .LVU854
 2577 0222 1B06     		lsls	r3, r3, #24
 239:lib/chibios/os/hal/src/hal_usb.c ****       }
 2578              		.loc 1 239 9 view .LVU855
 2579 0224 2046     		mov	r0, r4
 238:lib/chibios/os/hal/src/hal_usb.c ****         usb_lld_stall_in(usbp, usbp->setup[4] & 0x0FU);
 2580              		.loc 1 238 10 view .LVU856
 2581 0226 02D5     		bpl	.L132
 2582              	.LVL156:
 239:lib/chibios/os/hal/src/hal_usb.c ****       }
 2583              		.loc 1 239 9 is_stmt 1 view .LVU857
 2584 0228 FFF7FEFF 		bl	usb_lld_stall_in
 2585              	.LVL157:
 239:lib/chibios/os/hal/src/hal_usb.c ****       }
 2586              		.loc 1 239 9 is_stmt 0 view .LVU858
 2587 022c C3E7     		b	.L126
 2588              	.LVL158:
 2589              	.L132:
 242:lib/chibios/os/hal/src/hal_usb.c ****       }
 2590              		.loc 1 242 9 is_stmt 1 view .LVU859
 2591 022e FFF7FEFF 		bl	usb_lld_stall_out
 2592              	.LVL159:
 242:lib/chibios/os/hal/src/hal_usb.c ****       }
 2593              		.loc 1 242 9 is_stmt 0 view .LVU860
 2594 0232 C0E7     		b	.L126
 2595              	.LVL160:
 2596              	.L137:
 242:lib/chibios/os/hal/src/hal_usb.c ****       }
 2597              		.loc 1 242 9 view .LVU861
 2598              	.LBE571:
 2599              	.LBE570:
 840:lib/chibios/os/hal/src/hal_usb.c **** #if (USB_EP0_STATUS_STAGE == USB_EP0_STATUS_STAGE_SW)
 2600              		.loc 1 840 7 is_stmt 1 view .LVU862
 840:lib/chibios/os/hal/src/hal_usb.c **** #if (USB_EP0_STATUS_STAGE == USB_EP0_STATUS_STAGE_SW)
 2601              		.loc 1 840 22 is_stmt 0 view .LVU863
 2602 0234 1422     		movs	r2, #20
 2603 0236 84F86420 		strb	r2, [r4, #100]
 842:lib/chibios/os/hal/src/hal_usb.c ****       usbStartReceiveI(usbp, 0, NULL, 0);
 2604              		.loc 1 842 7 is_stmt 1 view .LVU864
 2605              	.LBB584:
 2606              	.LBI584:
 595:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 2607              		.loc 2 595 20 view .LVU865
 597:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 2608              		.loc 2 597 3 view .LVU866
 2609              	.LBB585:
 2610              	.LBI585:
 395:./lib/chibios/os/rt/include/chsys.h **** 
 2611              		.loc 3 395 20 view .LVU867
 397:./lib/chibios/os/rt/include/chsys.h ****   _stats_start_measure_crit_isr();
 2612              		.loc 3 397 3 view .LVU868
 2613              	.LBB586:
 2614              	.LBI586:
 708:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2615              		.loc 4 708 27 view .LVU869
 710:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** }
 2616              		.loc 4 710 3 view .LVU870
 2617              	.LBB587:
 2618              	.LBI587:
 669:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2619              		.loc 4 669 27 view .LVU871
 677:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if defined(__CM7_REV)
 2620              		.loc 4 677 3 view .LVU872
 2621              	.LVL161:
 2622              	.LBB588:
 2623              	.LBI588:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 2624              		.loc 5 491 27 view .LVU873
 2625              	.LBB589:
 2626              		.loc 5 493 3 view .LVU874
 2627              		.syntax unified
 2628              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 2629 023a 83F31188 		MSR basepri, r3
 2630              	@ 0 "" 2
 2631              	.LVL162:
 2632              		.loc 5 493 3 is_stmt 0 view .LVU875
 2633              		.thumb
 2634              		.syntax unified
 2635              	.LBE589:
 2636              	.LBE588:
 2637              	.LBE587:
 2638              	.LBE586:
 398:./lib/chibios/os/rt/include/chsys.h ****   _dbg_check_lock_from_isr();
 2639              		.loc 3 398 34 is_stmt 1 view .LVU876
 399:./lib/chibios/os/rt/include/chsys.h **** }
 2640              		.loc 3 399 29 view .LVU877
 2641              	.LBE585:
 2642              	.LBE584:
 843:lib/chibios/os/hal/src/hal_usb.c ****       osalSysUnlockFromISR();
 2643              		.loc 1 843 7 view .LVU878
 2644 023e 2B46     		mov	r3, r5
 2645 0240 2A46     		mov	r2, r5
 2646 0242 2946     		mov	r1, r5
 2647 0244 2046     		mov	r0, r4
 2648 0246 FFF7FEFF 		bl	usbStartReceiveI
 2649              	.LVL163:
 844:lib/chibios/os/hal/src/hal_usb.c **** #else
 2650              		.loc 1 844 7 view .LVU879
 2651              	.LBB590:
 2652              	.LBI590:
 606:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 2653              		.loc 2 606 20 view .LVU880
 2654              	.LBB591:
 608:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 2655              		.loc 2 608 3 view .LVU881
 2656              	.LBB592:
 2657              	.LBI592:
 415:./lib/chibios/os/rt/include/chsys.h **** 
 2658              		.loc 3 415 20 view .LVU882
 417:./lib/chibios/os/rt/include/chsys.h ****   _stats_stop_measure_crit_isr();
 2659              		.loc 3 417 31 view .LVU883
 418:./lib/chibios/os/rt/include/chsys.h ****   port_unlock_from_isr();
 2660              		.loc 3 418 33 view .LVU884
 2661              		.loc 3 419 3 view .LVU885
 2662              	.LBB593:
 2663              	.LBI593:
 719:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2664              		.loc 4 719 27 view .LVU886
 2665              		.loc 4 721 3 view .LVU887
 2666              	.LBB594:
 2667              	.LBI594:
 693:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2668              		.loc 4 693 27 view .LVU888
 696:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else /* CORTEX_SIMPLIFIED_PRIORITY */
 2669              		.loc 4 696 3 view .LVU889
 2670              	.LBB595:
 2671              	.LBI595:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 2672              		.loc 5 491 27 view .LVU890
 2673              	.LBB596:
 2674              		.loc 5 493 3 view .LVU891
 2675              	.L184:
 2676              		.loc 5 493 3 is_stmt 0 view .LVU892
 2677              	.LBE596:
 2678              	.LBE595:
 2679              	.LBE594:
 2680              	.LBE593:
 2681              	.LBE592:
 2682              	.LBE591:
 2683              	.LBE590:
 866:lib/chibios/os/hal/src/hal_usb.c **** #else
 2684              		.loc 1 866 7 is_stmt 1 view .LVU893
 2685              	.LBB597:
 2686              	.LBI597:
 606:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 2687              		.loc 2 606 20 view .LVU894
 2688              	.LBB598:
 608:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 2689              		.loc 2 608 3 view .LVU895
 2690              	.LBB599:
 2691              	.LBI599:
 415:./lib/chibios/os/rt/include/chsys.h **** 
 2692              		.loc 3 415 20 view .LVU896
 417:./lib/chibios/os/rt/include/chsys.h ****   _stats_stop_measure_crit_isr();
 2693              		.loc 3 417 31 view .LVU897
 418:./lib/chibios/os/rt/include/chsys.h ****   port_unlock_from_isr();
 2694              		.loc 3 418 33 view .LVU898
 2695              		.loc 3 419 3 view .LVU899
 2696              	.LBB600:
 2697              	.LBI600:
 719:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2698              		.loc 4 719 27 view .LVU900
 2699              		.loc 4 721 3 view .LVU901
 2700              	.LBB601:
 2701              	.LBI601:
 693:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2702              		.loc 4 693 27 view .LVU902
 696:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else /* CORTEX_SIMPLIFIED_PRIORITY */
 2703              		.loc 4 696 3 view .LVU903
 2704              	.LBB602:
 2705              	.LBI602:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 2706              		.loc 5 491 27 view .LVU904
 2707              	.LBB603:
 2708              		.loc 5 493 3 view .LVU905
 2709              		.syntax unified
 2710              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 2711 024a 85F31188 		MSR basepri, r5
 2712              	@ 0 "" 2
 2713              	.LVL164:
 2714              		.loc 5 493 3 is_stmt 0 view .LVU906
 2715              		.thumb
 2716              		.syntax unified
 2717              	.LBE603:
 2718              	.LBE602:
 2719              	.LBE601:
 2720              	.LBE600:
 2721              	.LBE599:
 609:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 2722              		.loc 2 609 1 view .LVU907
 2723 024e FDE6     		b	.L99
 2724              	.LVL165:
 2725              	.L136:
 609:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 2726              		.loc 2 609 1 view .LVU908
 2727              	.LBE598:
 2728              	.LBE597:
 852:lib/chibios/os/hal/src/hal_usb.c ****       /* Starts the receive phase.*/
 2729              		.loc 1 852 5 is_stmt 1 view .LVU909
 852:lib/chibios/os/hal/src/hal_usb.c ****       /* Starts the receive phase.*/
 2730              		.loc 1 852 8 is_stmt 0 view .LVU910
 2731 0250 5DB1     		cbz	r5, .L138
 854:lib/chibios/os/hal/src/hal_usb.c ****       osalSysLockFromISR();
 2732              		.loc 1 854 7 is_stmt 1 view .LVU911
 854:lib/chibios/os/hal/src/hal_usb.c ****       osalSysLockFromISR();
 2733              		.loc 1 854 22 is_stmt 0 view .LVU912
 2734 0252 1522     		movs	r2, #21
 2735 0254 84F86420 		strb	r2, [r4, #100]
 855:lib/chibios/os/hal/src/hal_usb.c ****       usbStartReceiveI(usbp, 0, (uint8_t *)usbp->ep0next, usbp->ep0n);
 2736              		.loc 1 855 7 is_stmt 1 view .LVU913
 2737              	.LBB604:
 2738              	.LBI604:
 595:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 2739              		.loc 2 595 20 view .LVU914
 597:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 2740              		.loc 2 597 3 view .LVU915
 2741              	.LBB605:
 2742              	.LBI605:
 395:./lib/chibios/os/rt/include/chsys.h **** 
 2743              		.loc 3 395 20 view .LVU916
 397:./lib/chibios/os/rt/include/chsys.h ****   _stats_start_measure_crit_isr();
 2744              		.loc 3 397 3 view .LVU917
 2745              	.LBB606:
 2746              	.LBI606:
 708:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2747              		.loc 4 708 27 view .LVU918
 710:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** }
 2748              		.loc 4 710 3 view .LVU919
 2749              	.LBB607:
 2750              	.LBI607:
 669:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2751              		.loc 4 669 27 view .LVU920
 677:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if defined(__CM7_REV)
 2752              		.loc 4 677 3 view .LVU921
 2753              	.LVL166:
 2754              	.LBB608:
 2755              	.LBI608:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 2756              		.loc 5 491 27 view .LVU922
 2757              	.LBB609:
 2758              		.loc 5 493 3 view .LVU923
 2759              		.syntax unified
 2760              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 2761 0258 83F31188 		MSR basepri, r3
 2762              	@ 0 "" 2
 2763              	.LVL167:
 2764              		.loc 5 493 3 is_stmt 0 view .LVU924
 2765              		.thumb
 2766              		.syntax unified
 2767              	.LBE609:
 2768              	.LBE608:
 2769              	.LBE607:
 2770              	.LBE606:
 398:./lib/chibios/os/rt/include/chsys.h ****   _dbg_check_lock_from_isr();
 2771              		.loc 3 398 34 is_stmt 1 view .LVU925
 399:./lib/chibios/os/rt/include/chsys.h **** }
 2772              		.loc 3 399 29 view .LVU926
 2773              	.LBE605:
 2774              	.LBE604:
 856:lib/chibios/os/hal/src/hal_usb.c ****       osalSysUnlockFromISR();
 2775              		.loc 1 856 7 view .LVU927
 2776 025c 0021     		movs	r1, #0
 2777 025e D4E91A23 		ldrd	r2, r3, [r4, #104]
 2778 0262 2046     		mov	r0, r4
 2779 0264 FFF7FEFF 		bl	usbStartReceiveI
 2780              	.LVL168:
 856:lib/chibios/os/hal/src/hal_usb.c ****       osalSysUnlockFromISR();
 2781              		.loc 1 856 7 is_stmt 0 view .LVU928
 2782 0268 11E7     		b	.L185
 2783              	.LVL169:
 2784              	.L138:
 862:lib/chibios/os/hal/src/hal_usb.c **** #if (USB_EP0_STATUS_STAGE == USB_EP0_STATUS_STAGE_SW)
 2785              		.loc 1 862 7 is_stmt 1 view .LVU929
 862:lib/chibios/os/hal/src/hal_usb.c **** #if (USB_EP0_STATUS_STAGE == USB_EP0_STATUS_STAGE_SW)
 2786              		.loc 1 862 22 is_stmt 0 view .LVU930
 2787 026a 0B22     		movs	r2, #11
 2788 026c 84F86420 		strb	r2, [r4, #100]
 864:lib/chibios/os/hal/src/hal_usb.c ****       usbStartTransmitI(usbp, 0, NULL, 0);
 2789              		.loc 1 864 7 is_stmt 1 view .LVU931
 2790              	.LBB610:
 2791              	.LBI610:
 595:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 2792              		.loc 2 595 20 view .LVU932
 597:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 2793              		.loc 2 597 3 view .LVU933
 2794              	.LBB611:
 2795              	.LBI611:
 395:./lib/chibios/os/rt/include/chsys.h **** 
 2796              		.loc 3 395 20 view .LVU934
 397:./lib/chibios/os/rt/include/chsys.h ****   _stats_start_measure_crit_isr();
 2797              		.loc 3 397 3 view .LVU935
 2798              	.LBB612:
 2799              	.LBI612:
 708:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2800              		.loc 4 708 27 view .LVU936
 710:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** }
 2801              		.loc 4 710 3 view .LVU937
 2802              	.LBB613:
 2803              	.LBI613:
 669:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2804              		.loc 4 669 27 view .LVU938
 677:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if defined(__CM7_REV)
 2805              		.loc 4 677 3 view .LVU939
 2806              	.LVL170:
 2807              	.LBB614:
 2808              	.LBI614:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 2809              		.loc 5 491 27 view .LVU940
 2810              	.LBB615:
 2811              		.loc 5 493 3 view .LVU941
 2812              		.syntax unified
 2813              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 2814 0270 83F31188 		MSR basepri, r3
 2815              	@ 0 "" 2
 2816              	.LVL171:
 2817              		.loc 5 493 3 is_stmt 0 view .LVU942
 2818              		.thumb
 2819              		.syntax unified
 2820              	.LBE615:
 2821              	.LBE614:
 2822              	.LBE613:
 2823              	.LBE612:
 398:./lib/chibios/os/rt/include/chsys.h ****   _dbg_check_lock_from_isr();
 2824              		.loc 3 398 34 is_stmt 1 view .LVU943
 399:./lib/chibios/os/rt/include/chsys.h **** }
 2825              		.loc 3 399 29 view .LVU944
 2826              	.LBE611:
 2827              	.LBE610:
 865:lib/chibios/os/hal/src/hal_usb.c ****       osalSysUnlockFromISR();
 2828              		.loc 1 865 7 view .LVU945
 2829 0274 2B46     		mov	r3, r5
 2830 0276 2A46     		mov	r2, r5
 2831 0278 2946     		mov	r1, r5
 2832 027a 2046     		mov	r0, r4
 2833 027c FFF7FEFF 		bl	usbStartTransmitI
 2834              	.LVL172:
 865:lib/chibios/os/hal/src/hal_usb.c ****       osalSysUnlockFromISR();
 2835              		.loc 1 865 7 is_stmt 0 view .LVU946
 2836 0280 E3E7     		b	.L184
 2837              	.L189:
 2838 0282 00BF     		.align	2
 2839              	.L188:
 2840 0284 00000000 		.word	.LANCHOR0
 2841 0288 00000000 		.word	set_address
 2842 028c 00000000 		.word	.LANCHOR2
 2843 0290 00000000 		.word	.LANCHOR1
 2844              		.cfi_endproc
 2845              	.LFE347:
 2847              		.section	.text._usb_ep0in,"ax",%progbits
 2848              		.align	1
 2849              		.global	_usb_ep0in
 2850              		.syntax unified
 2851              		.thumb
 2852              		.thumb_func
 2853              		.fpu fpv4-sp-d16
 2855              	_usb_ep0in:
 2856              	.LVL173:
 2857              	.LFB348:
 873:lib/chibios/os/hal/src/hal_usb.c **** 
 874:lib/chibios/os/hal/src/hal_usb.c **** /**
 875:lib/chibios/os/hal/src/hal_usb.c ****  * @brief   Default EP0 IN callback.
 876:lib/chibios/os/hal/src/hal_usb.c ****  * @details This function is used by the low level driver as default handler
 877:lib/chibios/os/hal/src/hal_usb.c ****  *          for EP0 IN events.
 878:lib/chibios/os/hal/src/hal_usb.c ****  *
 879:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] usbp      pointer to the @p USBDriver object
 880:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] ep        endpoint number, always zero
 881:lib/chibios/os/hal/src/hal_usb.c ****  *
 882:lib/chibios/os/hal/src/hal_usb.c ****  * @notapi
 883:lib/chibios/os/hal/src/hal_usb.c ****  */
 884:lib/chibios/os/hal/src/hal_usb.c **** void _usb_ep0in(USBDriver *usbp, usbep_t ep) {
 2858              		.loc 1 884 46 is_stmt 1 view -0
 2859              		.cfi_startproc
 2860              		@ args = 0, pretend = 0, frame = 0
 2861              		@ frame_needed = 0, uses_anonymous_args = 0
 885:lib/chibios/os/hal/src/hal_usb.c ****   size_t max;
 2862              		.loc 1 885 3 view .LVU948
 886:lib/chibios/os/hal/src/hal_usb.c **** 
 887:lib/chibios/os/hal/src/hal_usb.c ****   (void)ep;
 2863              		.loc 1 887 3 view .LVU949
 888:lib/chibios/os/hal/src/hal_usb.c ****   switch (usbp->ep0state) {
 2864              		.loc 1 888 3 view .LVU950
 884:lib/chibios/os/hal/src/hal_usb.c ****   size_t max;
 2865              		.loc 1 884 46 is_stmt 0 view .LVU951
 2866 0000 38B5     		push	{r3, r4, r5, lr}
 2867              		.cfi_def_cfa_offset 16
 2868              		.cfi_offset 3, -16
 2869              		.cfi_offset 4, -12
 2870              		.cfi_offset 5, -8
 2871              		.cfi_offset 14, -4
 2872              		.loc 1 888 15 view .LVU952
 2873 0002 90F86430 		ldrb	r3, [r0, #100]	@ zero_extendqisi2
 884:lib/chibios/os/hal/src/hal_usb.c ****   size_t max;
 2874              		.loc 1 884 46 view .LVU953
 2875 0006 0446     		mov	r4, r0
 2876              		.loc 1 888 3 view .LVU954
 2877 0008 002B     		cmp	r3, #0
 2878 000a 3ED0     		beq	.L191
 2879 000c 063B     		subs	r3, r3, #6
 2880 000e DAB2     		uxtb	r2, r3
 2881 0010 0F2A     		cmp	r2, #15
 2882 0012 34D8     		bhi	.L190
 2883 0014 0F2B     		cmp	r3, #15
 2884 0016 32D8     		bhi	.L190
 2885 0018 DFE803F0 		tbb	[pc, r3]
 2886              	.L193:
 2887 001c 37       		.byte	(.L191-.L193)/2
 2888 001d 31       		.byte	(.L190-.L193)/2
 2889 001e 31       		.byte	(.L190-.L193)/2
 2890 001f 08       		.byte	(.L196-.L193)/2
 2891 0020 22       		.byte	(.L195-.L193)/2
 2892 0021 32       		.byte	(.L194-.L193)/2
 2893 0022 31       		.byte	(.L190-.L193)/2
 2894 0023 31       		.byte	(.L190-.L193)/2
 2895 0024 31       		.byte	(.L190-.L193)/2
 2896 0025 31       		.byte	(.L190-.L193)/2
 2897 0026 31       		.byte	(.L190-.L193)/2
 2898 0027 31       		.byte	(.L190-.L193)/2
 2899 0028 31       		.byte	(.L190-.L193)/2
 2900 0029 31       		.byte	(.L190-.L193)/2
 2901 002a 37       		.byte	(.L191-.L193)/2
 2902 002b 37       		.byte	(.L191-.L193)/2
 2903              		.p2align 1
 2904              	.L196:
 889:lib/chibios/os/hal/src/hal_usb.c ****   case USB_EP0_IN_TX:
 890:lib/chibios/os/hal/src/hal_usb.c ****     max = (size_t)get_hword(&usbp->setup[6]);
 2905              		.loc 1 890 5 is_stmt 1 view .LVU955
 2906              	.LVL174:
 891:lib/chibios/os/hal/src/hal_usb.c ****     /* If the transmitted size is less than the requested size and it is a
 892:lib/chibios/os/hal/src/hal_usb.c ****        multiple of the maximum packet size then a zero size packet must be
 893:lib/chibios/os/hal/src/hal_usb.c ****        transmitted.*/
 894:lib/chibios/os/hal/src/hal_usb.c ****     if ((usbp->ep0n < max) &&
 2907              		.loc 1 894 5 view .LVU956
 2908              		.loc 1 894 14 is_stmt 0 view .LVU957
 2909 002c C56E     		ldr	r5, [r0, #108]
 890:lib/chibios/os/hal/src/hal_usb.c ****     /* If the transmitted size is less than the requested size and it is a
 2910              		.loc 1 890 9 view .LVU958
 2911 002e B0F87A30 		ldrh	r3, [r0, #122]	@ unaligned
 2912              		.loc 1 894 8 view .LVU959
 2913 0032 9D42     		cmp	r5, r3
 2914 0034 14D2     		bcs	.L195
 895:lib/chibios/os/hal/src/hal_usb.c ****         ((usbp->ep0n % usbp->epc[0]->in_maxsize) == 0U)) {
 2915              		.loc 1 895 36 discriminator 1 view .LVU960
 2916 0036 C368     		ldr	r3, [r0, #12]
 2917 0038 1B8A     		ldrh	r3, [r3, #16]
 2918              		.loc 1 895 22 discriminator 1 view .LVU961
 2919 003a B5FBF3F2 		udiv	r2, r5, r3
 2920 003e 03FB1255 		mls	r5, r3, r2, r5
 894:lib/chibios/os/hal/src/hal_usb.c ****         ((usbp->ep0n % usbp->epc[0]->in_maxsize) == 0U)) {
 2921              		.loc 1 894 28 discriminator 1 view .LVU962
 2922 0042 6DB9     		cbnz	r5, .L195
 896:lib/chibios/os/hal/src/hal_usb.c ****       osalSysLockFromISR();
 2923              		.loc 1 896 7 is_stmt 1 view .LVU963
 2924              	.LBB616:
 2925              	.LBI616:
 595:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 2926              		.loc 2 595 20 view .LVU964
 597:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 2927              		.loc 2 597 3 view .LVU965
 2928              	.LBB617:
 2929              	.LBI617:
 395:./lib/chibios/os/rt/include/chsys.h **** 
 2930              		.loc 3 395 20 view .LVU966
 397:./lib/chibios/os/rt/include/chsys.h ****   _stats_start_measure_crit_isr();
 2931              		.loc 3 397 3 view .LVU967
 2932              	.LBB618:
 2933              	.LBI618:
 708:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2934              		.loc 4 708 27 view .LVU968
 710:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** }
 2935              		.loc 4 710 3 view .LVU969
 2936              	.LBB619:
 2937              	.LBI619:
 669:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2938              		.loc 4 669 27 view .LVU970
 677:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if defined(__CM7_REV)
 2939              		.loc 4 677 3 view .LVU971
 2940              	.LVL175:
 2941              	.LBB620:
 2942              	.LBI620:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 2943              		.loc 5 491 27 view .LVU972
 2944              	.LBB621:
 2945              		.loc 5 493 3 view .LVU973
 2946 0044 2023     		movs	r3, #32
 2947              		.syntax unified
 2948              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 2949 0046 83F31188 		MSR basepri, r3
 2950              	@ 0 "" 2
 2951              	.LVL176:
 2952              		.loc 5 493 3 is_stmt 0 view .LVU974
 2953              		.thumb
 2954              		.syntax unified
 2955              	.LBE621:
 2956              	.LBE620:
 2957              	.LBE619:
 2958              	.LBE618:
 398:./lib/chibios/os/rt/include/chsys.h ****   _dbg_check_lock_from_isr();
 2959              		.loc 3 398 34 is_stmt 1 view .LVU975
 399:./lib/chibios/os/rt/include/chsys.h **** }
 2960              		.loc 3 399 29 view .LVU976
 2961              	.LBE617:
 2962              	.LBE616:
 897:lib/chibios/os/hal/src/hal_usb.c ****       usbStartTransmitI(usbp, 0, NULL, 0);
 2963              		.loc 1 897 7 view .LVU977
 2964 004a 2B46     		mov	r3, r5
 2965 004c 2A46     		mov	r2, r5
 2966 004e 2946     		mov	r1, r5
 2967              	.LVL177:
 2968              		.loc 1 897 7 is_stmt 0 view .LVU978
 2969 0050 FFF7FEFF 		bl	usbStartTransmitI
 2970              	.LVL178:
 898:lib/chibios/os/hal/src/hal_usb.c ****       osalSysUnlockFromISR();
 2971              		.loc 1 898 7 is_stmt 1 view .LVU979
 2972              	.LBB622:
 2973              	.LBI622:
 606:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 2974              		.loc 2 606 20 view .LVU980
 608:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 2975              		.loc 2 608 3 view .LVU981
 2976              	.LBB623:
 2977              	.LBI623:
 415:./lib/chibios/os/rt/include/chsys.h **** 
 2978              		.loc 3 415 20 view .LVU982
 417:./lib/chibios/os/rt/include/chsys.h ****   _stats_stop_measure_crit_isr();
 2979              		.loc 3 417 31 view .LVU983
 418:./lib/chibios/os/rt/include/chsys.h ****   port_unlock_from_isr();
 2980              		.loc 3 418 33 view .LVU984
 2981              		.loc 3 419 3 view .LVU985
 2982              	.LBB624:
 2983              	.LBI624:
 719:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2984              		.loc 4 719 27 view .LVU986
 2985              		.loc 4 721 3 view .LVU987
 2986              	.LBB625:
 2987              	.LBI625:
 693:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2988              		.loc 4 693 27 view .LVU988
 696:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else /* CORTEX_SIMPLIFIED_PRIORITY */
 2989              		.loc 4 696 3 view .LVU989
 2990              	.LBB626:
 2991              	.LBI626:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 2992              		.loc 5 491 27 view .LVU990
 2993              	.LBB627:
 2994              		.loc 5 493 3 view .LVU991
 2995              		.syntax unified
 2996              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 2997 0054 85F31188 		MSR basepri, r5
 2998              	@ 0 "" 2
 2999              	.LVL179:
 3000              		.loc 5 493 3 is_stmt 0 view .LVU992
 3001              		.thumb
 3002              		.syntax unified
 3003              	.LBE627:
 3004              	.LBE626:
 3005              	.LBE625:
 3006              	.LBE624:
 3007              	.LBE623:
 3008              	.LBE622:
 899:lib/chibios/os/hal/src/hal_usb.c ****       usbp->ep0state = USB_EP0_IN_WAITING_TX0;
 3009              		.loc 1 899 7 is_stmt 1 view .LVU993
 3010              		.loc 1 899 22 is_stmt 0 view .LVU994
 3011 0058 0A23     		movs	r3, #10
 3012              	.L211:
 900:lib/chibios/os/hal/src/hal_usb.c ****       return;
 901:lib/chibios/os/hal/src/hal_usb.c ****     }
 902:lib/chibios/os/hal/src/hal_usb.c ****     /* Falls through.*/
 903:lib/chibios/os/hal/src/hal_usb.c ****   case USB_EP0_IN_WAITING_TX0:
 904:lib/chibios/os/hal/src/hal_usb.c ****     /* Transmit phase over, receiving the zero sized status packet.*/
 905:lib/chibios/os/hal/src/hal_usb.c ****     usbp->ep0state = USB_EP0_OUT_WAITING_STS;
 906:lib/chibios/os/hal/src/hal_usb.c **** #if (USB_EP0_STATUS_STAGE == USB_EP0_STATUS_STAGE_SW)
 907:lib/chibios/os/hal/src/hal_usb.c ****     osalSysLockFromISR();
 908:lib/chibios/os/hal/src/hal_usb.c ****     usbStartReceiveI(usbp, 0, NULL, 0);
 909:lib/chibios/os/hal/src/hal_usb.c ****     osalSysUnlockFromISR();
 910:lib/chibios/os/hal/src/hal_usb.c **** #else
 911:lib/chibios/os/hal/src/hal_usb.c ****     usb_lld_end_setup(usbp, ep);
 912:lib/chibios/os/hal/src/hal_usb.c **** #endif
 913:lib/chibios/os/hal/src/hal_usb.c ****     return;
 914:lib/chibios/os/hal/src/hal_usb.c ****   case USB_EP0_IN_SENDING_STS:
 915:lib/chibios/os/hal/src/hal_usb.c ****     /* Status packet sent, invoking the callback if defined.*/
 916:lib/chibios/os/hal/src/hal_usb.c ****     if (usbp->ep0endcb != NULL) {
 917:lib/chibios/os/hal/src/hal_usb.c ****       usbp->ep0endcb(usbp);
 918:lib/chibios/os/hal/src/hal_usb.c ****     }
 919:lib/chibios/os/hal/src/hal_usb.c ****     usbp->ep0state = USB_EP0_STP_WAITING;
 920:lib/chibios/os/hal/src/hal_usb.c ****     return;
 921:lib/chibios/os/hal/src/hal_usb.c ****   case USB_EP0_STP_WAITING:
 922:lib/chibios/os/hal/src/hal_usb.c ****   case USB_EP0_OUT_WAITING_STS:
 923:lib/chibios/os/hal/src/hal_usb.c ****   case USB_EP0_OUT_RX:
 924:lib/chibios/os/hal/src/hal_usb.c ****     /* All the above are invalid states in the IN phase.*/
 925:lib/chibios/os/hal/src/hal_usb.c ****     osalDbgAssert(false, "EP0 state machine error");
 926:lib/chibios/os/hal/src/hal_usb.c ****     /* Falls through.*/
 927:lib/chibios/os/hal/src/hal_usb.c ****   case USB_EP0_ERROR:
 928:lib/chibios/os/hal/src/hal_usb.c ****     /* Error response, the state machine goes into an error state, the low
 929:lib/chibios/os/hal/src/hal_usb.c ****        level layer will have to reset it to USB_EP0_WAITING_SETUP after
 930:lib/chibios/os/hal/src/hal_usb.c ****        receiving a SETUP packet.*/
 931:lib/chibios/os/hal/src/hal_usb.c ****     usb_lld_stall_in(usbp, 0);
 932:lib/chibios/os/hal/src/hal_usb.c ****     usb_lld_stall_out(usbp, 0);
 933:lib/chibios/os/hal/src/hal_usb.c ****     _usb_isr_invoke_event_cb(usbp, USB_EVENT_STALLED);
 934:lib/chibios/os/hal/src/hal_usb.c ****     usbp->ep0state = USB_EP0_ERROR;
 3013              		.loc 1 934 20 discriminator 3 view .LVU995
 3014 005a 84F86430 		strb	r3, [r4, #100]
 935:lib/chibios/os/hal/src/hal_usb.c ****     return;
 3015              		.loc 1 935 5 is_stmt 1 discriminator 3 view .LVU996
 936:lib/chibios/os/hal/src/hal_usb.c ****   default:
 937:lib/chibios/os/hal/src/hal_usb.c ****     osalDbgAssert(false, "EP0 state machine invalid state");
 3016              		.loc 1 937 5 discriminator 3 view .LVU997
 935:lib/chibios/os/hal/src/hal_usb.c ****     return;
 3017              		.loc 1 935 5 is_stmt 0 discriminator 3 view .LVU998
 3018 005e 0EE0     		b	.L190
 3019              	.LVL180:
 3020              	.L195:
 905:lib/chibios/os/hal/src/hal_usb.c **** #if (USB_EP0_STATUS_STAGE == USB_EP0_STATUS_STAGE_SW)
 3021              		.loc 1 905 5 is_stmt 1 view .LVU999
 905:lib/chibios/os/hal/src/hal_usb.c **** #if (USB_EP0_STATUS_STAGE == USB_EP0_STATUS_STAGE_SW)
 3022              		.loc 1 905 20 is_stmt 0 view .LVU1000
 3023 0060 1423     		movs	r3, #20
 3024 0062 84F86430 		strb	r3, [r4, #100]
 907:lib/chibios/os/hal/src/hal_usb.c ****     usbStartReceiveI(usbp, 0, NULL, 0);
 3025              		.loc 1 907 5 is_stmt 1 view .LVU1001
 3026              	.LBB628:
 3027              	.LBI628:
 595:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 3028              		.loc 2 595 20 view .LVU1002
 597:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 3029              		.loc 2 597 3 view .LVU1003
 3030              	.LBB629:
 3031              	.LBI629:
 395:./lib/chibios/os/rt/include/chsys.h **** 
 3032              		.loc 3 395 20 view .LVU1004
 397:./lib/chibios/os/rt/include/chsys.h ****   _stats_start_measure_crit_isr();
 3033              		.loc 3 397 3 view .LVU1005
 3034              	.LBB630:
 3035              	.LBI630:
 708:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 3036              		.loc 4 708 27 view .LVU1006
 710:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** }
 3037              		.loc 4 710 3 view .LVU1007
 3038              	.LBB631:
 3039              	.LBI631:
 669:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 3040              		.loc 4 669 27 view .LVU1008
 677:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if defined(__CM7_REV)
 3041              		.loc 4 677 3 view .LVU1009
 3042              	.LVL181:
 3043              	.LBB632:
 3044              	.LBI632:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 3045              		.loc 5 491 27 view .LVU1010
 3046              	.LBB633:
 3047              		.loc 5 493 3 view .LVU1011
 3048 0066 2023     		movs	r3, #32
 3049              		.syntax unified
 3050              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 3051 0068 83F31188 		MSR basepri, r3
 3052              	@ 0 "" 2
 3053              	.LVL182:
 3054              		.loc 5 493 3 is_stmt 0 view .LVU1012
 3055              		.thumb
 3056              		.syntax unified
 3057              	.LBE633:
 3058              	.LBE632:
 3059              	.LBE631:
 3060              	.LBE630:
 398:./lib/chibios/os/rt/include/chsys.h ****   _dbg_check_lock_from_isr();
 3061              		.loc 3 398 34 is_stmt 1 view .LVU1013
 399:./lib/chibios/os/rt/include/chsys.h **** }
 3062              		.loc 3 399 29 view .LVU1014
 3063              	.LBE629:
 3064              	.LBE628:
 908:lib/chibios/os/hal/src/hal_usb.c ****     osalSysUnlockFromISR();
 3065              		.loc 1 908 5 view .LVU1015
 3066 006c 0023     		movs	r3, #0
 3067 006e 1A46     		mov	r2, r3
 3068 0070 1946     		mov	r1, r3
 3069              	.LVL183:
 908:lib/chibios/os/hal/src/hal_usb.c ****     osalSysUnlockFromISR();
 3070              		.loc 1 908 5 is_stmt 0 view .LVU1016
 3071 0072 2046     		mov	r0, r4
 3072              	.LVL184:
 908:lib/chibios/os/hal/src/hal_usb.c ****     osalSysUnlockFromISR();
 3073              		.loc 1 908 5 view .LVU1017
 3074 0074 FFF7FEFF 		bl	usbStartReceiveI
 3075              	.LVL185:
 909:lib/chibios/os/hal/src/hal_usb.c **** #else
 3076              		.loc 1 909 5 is_stmt 1 view .LVU1018
 3077              	.LBB634:
 3078              	.LBI634:
 606:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 3079              		.loc 2 606 20 view .LVU1019
 3080              	.LBB635:
 608:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 3081              		.loc 2 608 3 view .LVU1020
 3082              	.LBB636:
 3083              	.LBI636:
 415:./lib/chibios/os/rt/include/chsys.h **** 
 3084              		.loc 3 415 20 view .LVU1021
 417:./lib/chibios/os/rt/include/chsys.h ****   _stats_stop_measure_crit_isr();
 3085              		.loc 3 417 31 view .LVU1022
 418:./lib/chibios/os/rt/include/chsys.h ****   port_unlock_from_isr();
 3086              		.loc 3 418 33 view .LVU1023
 3087              		.loc 3 419 3 view .LVU1024
 3088              	.LBB637:
 3089              	.LBI637:
 719:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 3090              		.loc 4 719 27 view .LVU1025
 3091              		.loc 4 721 3 view .LVU1026
 3092              	.LBB638:
 3093              	.LBI638:
 693:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 3094              		.loc 4 693 27 view .LVU1027
 696:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else /* CORTEX_SIMPLIFIED_PRIORITY */
 3095              		.loc 4 696 3 view .LVU1028
 3096              	.LBB639:
 3097              	.LBI639:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 3098              		.loc 5 491 27 view .LVU1029
 3099              	.LBB640:
 3100              		.loc 5 493 3 view .LVU1030
 3101 0078 0023     		movs	r3, #0
 3102              		.syntax unified
 3103              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 3104 007a 83F31188 		MSR basepri, r3
 3105              	@ 0 "" 2
 3106              	.LVL186:
 3107              		.thumb
 3108              		.syntax unified
 3109              	.L190:
 3110              		.loc 5 493 3 is_stmt 0 view .LVU1031
 3111              	.LBE640:
 3112              	.LBE639:
 3113              	.LBE638:
 3114              	.LBE637:
 3115              	.LBE636:
 3116              	.LBE635:
 3117              	.LBE634:
 938:lib/chibios/os/hal/src/hal_usb.c ****   }
 939:lib/chibios/os/hal/src/hal_usb.c **** }
 3118              		.loc 1 939 1 view .LVU1032
 3119 007e 38BD     		pop	{r3, r4, r5, pc}
 3120              	.LVL187:
 3121              	.L194:
 916:lib/chibios/os/hal/src/hal_usb.c ****       usbp->ep0endcb(usbp);
 3122              		.loc 1 916 5 is_stmt 1 view .LVU1033
 916:lib/chibios/os/hal/src/hal_usb.c ****       usbp->ep0endcb(usbp);
 3123              		.loc 1 916 13 is_stmt 0 view .LVU1034
 3124 0080 036F     		ldr	r3, [r0, #112]
 916:lib/chibios/os/hal/src/hal_usb.c ****       usbp->ep0endcb(usbp);
 3125              		.loc 1 916 8 view .LVU1035
 3126 0082 03B1     		cbz	r3, .L197
 917:lib/chibios/os/hal/src/hal_usb.c ****     }
 3127              		.loc 1 917 7 is_stmt 1 view .LVU1036
 3128 0084 9847     		blx	r3
 3129              	.LVL188:
 3130              	.L197:
 919:lib/chibios/os/hal/src/hal_usb.c ****     return;
 3131              		.loc 1 919 5 view .LVU1037
 919:lib/chibios/os/hal/src/hal_usb.c ****     return;
 3132              		.loc 1 919 20 is_stmt 0 view .LVU1038
 3133 0086 0023     		movs	r3, #0
 3134 0088 E7E7     		b	.L211
 3135              	.LVL189:
 3136              	.L191:
 925:lib/chibios/os/hal/src/hal_usb.c ****     /* Falls through.*/
 3137              		.loc 1 925 5 is_stmt 1 discriminator 5 view .LVU1039
 931:lib/chibios/os/hal/src/hal_usb.c ****     usb_lld_stall_out(usbp, 0);
 3138              		.loc 1 931 5 discriminator 5 view .LVU1040
 3139 008a 0021     		movs	r1, #0
 3140              	.LVL190:
 931:lib/chibios/os/hal/src/hal_usb.c ****     usb_lld_stall_out(usbp, 0);
 3141              		.loc 1 931 5 is_stmt 0 discriminator 5 view .LVU1041
 3142 008c 2046     		mov	r0, r4
 3143              	.LVL191:
 931:lib/chibios/os/hal/src/hal_usb.c ****     usb_lld_stall_out(usbp, 0);
 3144              		.loc 1 931 5 discriminator 5 view .LVU1042
 3145 008e FFF7FEFF 		bl	usb_lld_stall_in
 3146              	.LVL192:
 932:lib/chibios/os/hal/src/hal_usb.c ****     _usb_isr_invoke_event_cb(usbp, USB_EVENT_STALLED);
 3147              		.loc 1 932 5 is_stmt 1 discriminator 5 view .LVU1043
 3148 0092 0021     		movs	r1, #0
 3149 0094 2046     		mov	r0, r4
 3150 0096 FFF7FEFF 		bl	usb_lld_stall_out
 3151              	.LVL193:
 933:lib/chibios/os/hal/src/hal_usb.c ****     usbp->ep0state = USB_EP0_ERROR;
 3152              		.loc 1 933 5 discriminator 5 view .LVU1044
 3153 009a 6368     		ldr	r3, [r4, #4]
 3154 009c 1B68     		ldr	r3, [r3]
 3155 009e 13B1     		cbz	r3, .L198
 933:lib/chibios/os/hal/src/hal_usb.c ****     usbp->ep0state = USB_EP0_ERROR;
 3156              		.loc 1 933 5 discriminator 1 view .LVU1045
 3157 00a0 0621     		movs	r1, #6
 3158 00a2 2046     		mov	r0, r4
 3159 00a4 9847     		blx	r3
 3160              	.LVL194:
 3161              	.L198:
 933:lib/chibios/os/hal/src/hal_usb.c ****     usbp->ep0state = USB_EP0_ERROR;
 3162              		.loc 1 933 54 discriminator 3 view .LVU1046
 934:lib/chibios/os/hal/src/hal_usb.c ****     return;
 3163              		.loc 1 934 5 discriminator 3 view .LVU1047
 934:lib/chibios/os/hal/src/hal_usb.c ****     return;
 3164              		.loc 1 934 20 is_stmt 0 discriminator 3 view .LVU1048
 3165 00a6 0623     		movs	r3, #6
 3166 00a8 D7E7     		b	.L211
 3167              		.cfi_endproc
 3168              	.LFE348:
 3170              		.section	.text._usb_ep0out,"ax",%progbits
 3171              		.align	1
 3172              		.global	_usb_ep0out
 3173              		.syntax unified
 3174              		.thumb
 3175              		.thumb_func
 3176              		.fpu fpv4-sp-d16
 3178              	_usb_ep0out:
 3179              	.LVL195:
 3180              	.LFB349:
 940:lib/chibios/os/hal/src/hal_usb.c **** 
 941:lib/chibios/os/hal/src/hal_usb.c **** /**
 942:lib/chibios/os/hal/src/hal_usb.c ****  * @brief   Default EP0 OUT callback.
 943:lib/chibios/os/hal/src/hal_usb.c ****  * @details This function is used by the low level driver as default handler
 944:lib/chibios/os/hal/src/hal_usb.c ****  *          for EP0 OUT events.
 945:lib/chibios/os/hal/src/hal_usb.c ****  *
 946:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] usbp      pointer to the @p USBDriver object
 947:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] ep        endpoint number, always zero
 948:lib/chibios/os/hal/src/hal_usb.c ****  *
 949:lib/chibios/os/hal/src/hal_usb.c ****  * @notapi
 950:lib/chibios/os/hal/src/hal_usb.c ****  */
 951:lib/chibios/os/hal/src/hal_usb.c **** void _usb_ep0out(USBDriver *usbp, usbep_t ep) {
 3181              		.loc 1 951 47 is_stmt 1 view -0
 3182              		.cfi_startproc
 3183              		@ args = 0, pretend = 0, frame = 0
 3184              		@ frame_needed = 0, uses_anonymous_args = 0
 952:lib/chibios/os/hal/src/hal_usb.c **** 
 953:lib/chibios/os/hal/src/hal_usb.c ****   (void)ep;
 3185              		.loc 1 953 3 view .LVU1050
 954:lib/chibios/os/hal/src/hal_usb.c ****   switch (usbp->ep0state) {
 3186              		.loc 1 954 3 view .LVU1051
 951:lib/chibios/os/hal/src/hal_usb.c **** 
 3187              		.loc 1 951 47 is_stmt 0 view .LVU1052
 3188 0000 10B5     		push	{r4, lr}
 3189              		.cfi_def_cfa_offset 8
 3190              		.cfi_offset 4, -8
 3191              		.cfi_offset 14, -4
 3192              		.loc 1 954 15 view .LVU1053
 3193 0002 90F86430 		ldrb	r3, [r0, #100]	@ zero_extendqisi2
 3194              		.loc 1 954 3 view .LVU1054
 3195 0006 142B     		cmp	r3, #20
 951:lib/chibios/os/hal/src/hal_usb.c **** 
 3196              		.loc 1 951 47 view .LVU1055
 3197 0008 0446     		mov	r4, r0
 3198              		.loc 1 954 3 view .LVU1056
 3199 000a 29D0     		beq	.L213
 3200 000c 17D8     		bhi	.L214
 3201 000e 062B     		cmp	r3, #6
 3202 0010 05D0     		beq	.L215
 3203 0012 01D8     		bhi	.L216
 3204 0014 1BB1     		cbz	r3, .L215
 3205              	.LVL196:
 3206              	.L212:
 955:lib/chibios/os/hal/src/hal_usb.c ****   case USB_EP0_OUT_RX:
 956:lib/chibios/os/hal/src/hal_usb.c ****     /* Receive phase over, sending the zero sized status packet.*/
 957:lib/chibios/os/hal/src/hal_usb.c ****     usbp->ep0state = USB_EP0_IN_SENDING_STS;
 958:lib/chibios/os/hal/src/hal_usb.c **** #if (USB_EP0_STATUS_STAGE == USB_EP0_STATUS_STAGE_SW)
 959:lib/chibios/os/hal/src/hal_usb.c ****     osalSysLockFromISR();
 960:lib/chibios/os/hal/src/hal_usb.c ****     usbStartTransmitI(usbp, 0, NULL, 0);
 961:lib/chibios/os/hal/src/hal_usb.c ****     osalSysUnlockFromISR();
 962:lib/chibios/os/hal/src/hal_usb.c **** #else
 963:lib/chibios/os/hal/src/hal_usb.c ****     usb_lld_end_setup(usbp, ep);
 964:lib/chibios/os/hal/src/hal_usb.c **** #endif
 965:lib/chibios/os/hal/src/hal_usb.c ****     return;
 966:lib/chibios/os/hal/src/hal_usb.c ****   case USB_EP0_OUT_WAITING_STS:
 967:lib/chibios/os/hal/src/hal_usb.c ****     /* Status packet received, it must be zero sized, invoking the callback
 968:lib/chibios/os/hal/src/hal_usb.c ****        if defined.*/
 969:lib/chibios/os/hal/src/hal_usb.c **** #if (USB_EP0_STATUS_STAGE == USB_EP0_STATUS_STAGE_SW)
 970:lib/chibios/os/hal/src/hal_usb.c ****     if (usbGetReceiveTransactionSizeX(usbp, 0) != 0U) {
 971:lib/chibios/os/hal/src/hal_usb.c ****       break;
 972:lib/chibios/os/hal/src/hal_usb.c ****     }
 973:lib/chibios/os/hal/src/hal_usb.c **** #endif
 974:lib/chibios/os/hal/src/hal_usb.c ****     if (usbp->ep0endcb != NULL) {
 975:lib/chibios/os/hal/src/hal_usb.c ****       usbp->ep0endcb(usbp);
 976:lib/chibios/os/hal/src/hal_usb.c ****     }
 977:lib/chibios/os/hal/src/hal_usb.c ****     usbp->ep0state = USB_EP0_STP_WAITING;
 978:lib/chibios/os/hal/src/hal_usb.c ****     return;
 979:lib/chibios/os/hal/src/hal_usb.c ****   case USB_EP0_STP_WAITING:
 980:lib/chibios/os/hal/src/hal_usb.c ****   case USB_EP0_IN_TX:
 981:lib/chibios/os/hal/src/hal_usb.c ****   case USB_EP0_IN_WAITING_TX0:
 982:lib/chibios/os/hal/src/hal_usb.c ****   case USB_EP0_IN_SENDING_STS:
 983:lib/chibios/os/hal/src/hal_usb.c ****     /* All the above are invalid states in the IN phase.*/
 984:lib/chibios/os/hal/src/hal_usb.c ****     osalDbgAssert(false, "EP0 state machine error");
 985:lib/chibios/os/hal/src/hal_usb.c ****     /* Falls through.*/
 986:lib/chibios/os/hal/src/hal_usb.c ****   case USB_EP0_ERROR:
 987:lib/chibios/os/hal/src/hal_usb.c ****     /* Error response, the state machine goes into an error state, the low
 988:lib/chibios/os/hal/src/hal_usb.c ****        level layer will have to reset it to USB_EP0_WAITING_SETUP after
 989:lib/chibios/os/hal/src/hal_usb.c ****        receiving a SETUP packet.*/
 990:lib/chibios/os/hal/src/hal_usb.c ****     usb_lld_stall_in(usbp, 0);
 991:lib/chibios/os/hal/src/hal_usb.c ****     usb_lld_stall_out(usbp, 0);
 992:lib/chibios/os/hal/src/hal_usb.c ****     _usb_isr_invoke_event_cb(usbp, USB_EVENT_STALLED);
 993:lib/chibios/os/hal/src/hal_usb.c ****     usbp->ep0state = USB_EP0_ERROR;
 994:lib/chibios/os/hal/src/hal_usb.c ****     return;
 995:lib/chibios/os/hal/src/hal_usb.c ****   default:
 996:lib/chibios/os/hal/src/hal_usb.c ****     osalDbgAssert(false, "EP0 state machine invalid state");
 997:lib/chibios/os/hal/src/hal_usb.c ****   }
 998:lib/chibios/os/hal/src/hal_usb.c **** }
 3207              		.loc 1 998 1 view .LVU1057
 3208 0016 10BD     		pop	{r4, pc}
 3209              	.LVL197:
 3210              	.L216:
 954:lib/chibios/os/hal/src/hal_usb.c ****   case USB_EP0_OUT_RX:
 3211              		.loc 1 954 3 view .LVU1058
 3212 0018 093B     		subs	r3, r3, #9
 3213 001a 022B     		cmp	r3, #2
 3214 001c FBD8     		bhi	.L212
 3215              	.L215:
 984:lib/chibios/os/hal/src/hal_usb.c ****     /* Falls through.*/
 3216              		.loc 1 984 5 is_stmt 1 discriminator 5 view .LVU1059
 990:lib/chibios/os/hal/src/hal_usb.c ****     usb_lld_stall_out(usbp, 0);
 3217              		.loc 1 990 5 discriminator 5 view .LVU1060
 3218 001e 0021     		movs	r1, #0
 3219              	.LVL198:
 990:lib/chibios/os/hal/src/hal_usb.c ****     usb_lld_stall_out(usbp, 0);
 3220              		.loc 1 990 5 is_stmt 0 discriminator 5 view .LVU1061
 3221 0020 2046     		mov	r0, r4
 3222              	.LVL199:
 990:lib/chibios/os/hal/src/hal_usb.c ****     usb_lld_stall_out(usbp, 0);
 3223              		.loc 1 990 5 discriminator 5 view .LVU1062
 3224 0022 FFF7FEFF 		bl	usb_lld_stall_in
 3225              	.LVL200:
 991:lib/chibios/os/hal/src/hal_usb.c ****     _usb_isr_invoke_event_cb(usbp, USB_EVENT_STALLED);
 3226              		.loc 1 991 5 is_stmt 1 discriminator 5 view .LVU1063
 3227 0026 0021     		movs	r1, #0
 3228 0028 2046     		mov	r0, r4
 3229 002a FFF7FEFF 		bl	usb_lld_stall_out
 3230              	.LVL201:
 992:lib/chibios/os/hal/src/hal_usb.c ****     usbp->ep0state = USB_EP0_ERROR;
 3231              		.loc 1 992 5 discriminator 5 view .LVU1064
 3232 002e 6368     		ldr	r3, [r4, #4]
 3233 0030 1B68     		ldr	r3, [r3]
 3234 0032 13B1     		cbz	r3, .L219
 992:lib/chibios/os/hal/src/hal_usb.c ****     usbp->ep0state = USB_EP0_ERROR;
 3235              		.loc 1 992 5 discriminator 1 view .LVU1065
 3236 0034 0621     		movs	r1, #6
 3237 0036 2046     		mov	r0, r4
 3238 0038 9847     		blx	r3
 3239              	.LVL202:
 3240              	.L219:
 992:lib/chibios/os/hal/src/hal_usb.c ****     usbp->ep0state = USB_EP0_ERROR;
 3241              		.loc 1 992 54 discriminator 3 view .LVU1066
 993:lib/chibios/os/hal/src/hal_usb.c ****     return;
 3242              		.loc 1 993 5 discriminator 3 view .LVU1067
 993:lib/chibios/os/hal/src/hal_usb.c ****     return;
 3243              		.loc 1 993 20 is_stmt 0 discriminator 3 view .LVU1068
 3244 003a 0623     		movs	r3, #6
 3245 003c 19E0     		b	.L232
 3246              	.LVL203:
 3247              	.L214:
 954:lib/chibios/os/hal/src/hal_usb.c ****   case USB_EP0_OUT_RX:
 3248              		.loc 1 954 3 view .LVU1069
 3249 003e 152B     		cmp	r3, #21
 3250 0040 E9D1     		bne	.L212
 957:lib/chibios/os/hal/src/hal_usb.c **** #if (USB_EP0_STATUS_STAGE == USB_EP0_STATUS_STAGE_SW)
 3251              		.loc 1 957 5 is_stmt 1 view .LVU1070
 957:lib/chibios/os/hal/src/hal_usb.c **** #if (USB_EP0_STATUS_STAGE == USB_EP0_STATUS_STAGE_SW)
 3252              		.loc 1 957 20 is_stmt 0 view .LVU1071
 3253 0042 0B23     		movs	r3, #11
 3254 0044 80F86430 		strb	r3, [r0, #100]
 959:lib/chibios/os/hal/src/hal_usb.c ****     usbStartTransmitI(usbp, 0, NULL, 0);
 3255              		.loc 1 959 5 is_stmt 1 view .LVU1072
 3256              	.LBB641:
 3257              	.LBI641:
 595:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 3258              		.loc 2 595 20 view .LVU1073
 597:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 3259              		.loc 2 597 3 view .LVU1074
 3260              	.LBB642:
 3261              	.LBI642:
 395:./lib/chibios/os/rt/include/chsys.h **** 
 3262              		.loc 3 395 20 view .LVU1075
 397:./lib/chibios/os/rt/include/chsys.h ****   _stats_start_measure_crit_isr();
 3263              		.loc 3 397 3 view .LVU1076
 3264              	.LBB643:
 3265              	.LBI643:
 708:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 3266              		.loc 4 708 27 view .LVU1077
 710:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** }
 3267              		.loc 4 710 3 view .LVU1078
 3268              	.LBB644:
 3269              	.LBI644:
 669:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 3270              		.loc 4 669 27 view .LVU1079
 677:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if defined(__CM7_REV)
 3271              		.loc 4 677 3 view .LVU1080
 3272              	.LVL204:
 3273              	.LBB645:
 3274              	.LBI645:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 3275              		.loc 5 491 27 view .LVU1081
 3276              	.LBB646:
 3277              		.loc 5 493 3 view .LVU1082
 3278 0048 2023     		movs	r3, #32
 3279              		.syntax unified
 3280              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 3281 004a 83F31188 		MSR basepri, r3
 3282              	@ 0 "" 2
 3283              	.LVL205:
 3284              		.loc 5 493 3 is_stmt 0 view .LVU1083
 3285              		.thumb
 3286              		.syntax unified
 3287              	.LBE646:
 3288              	.LBE645:
 3289              	.LBE644:
 3290              	.LBE643:
 398:./lib/chibios/os/rt/include/chsys.h ****   _dbg_check_lock_from_isr();
 3291              		.loc 3 398 34 is_stmt 1 view .LVU1084
 399:./lib/chibios/os/rt/include/chsys.h **** }
 3292              		.loc 3 399 29 view .LVU1085
 3293              	.LBE642:
 3294              	.LBE641:
 960:lib/chibios/os/hal/src/hal_usb.c ****     osalSysUnlockFromISR();
 3295              		.loc 1 960 5 view .LVU1086
 3296 004e 0023     		movs	r3, #0
 3297 0050 1A46     		mov	r2, r3
 3298 0052 1946     		mov	r1, r3
 3299              	.LVL206:
 960:lib/chibios/os/hal/src/hal_usb.c ****     osalSysUnlockFromISR();
 3300              		.loc 1 960 5 is_stmt 0 view .LVU1087
 3301 0054 FFF7FEFF 		bl	usbStartTransmitI
 3302              	.LVL207:
 961:lib/chibios/os/hal/src/hal_usb.c **** #else
 3303              		.loc 1 961 5 is_stmt 1 view .LVU1088
 3304              	.LBB647:
 3305              	.LBI647:
 606:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 3306              		.loc 2 606 20 view .LVU1089
 3307              	.LBB648:
 608:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 3308              		.loc 2 608 3 view .LVU1090
 3309              	.LBB649:
 3310              	.LBI649:
 415:./lib/chibios/os/rt/include/chsys.h **** 
 3311              		.loc 3 415 20 view .LVU1091
 417:./lib/chibios/os/rt/include/chsys.h ****   _stats_stop_measure_crit_isr();
 3312              		.loc 3 417 31 view .LVU1092
 418:./lib/chibios/os/rt/include/chsys.h ****   port_unlock_from_isr();
 3313              		.loc 3 418 33 view .LVU1093
 3314              		.loc 3 419 3 view .LVU1094
 3315              	.LBB650:
 3316              	.LBI650:
 719:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 3317              		.loc 4 719 27 view .LVU1095
 3318              		.loc 4 721 3 view .LVU1096
 3319              	.LBB651:
 3320              	.LBI651:
 693:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 3321              		.loc 4 693 27 view .LVU1097
 696:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else /* CORTEX_SIMPLIFIED_PRIORITY */
 3322              		.loc 4 696 3 view .LVU1098
 3323              	.LBB652:
 3324              	.LBI652:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 3325              		.loc 5 491 27 view .LVU1099
 3326              	.LBB653:
 3327              		.loc 5 493 3 view .LVU1100
 3328 0058 0023     		movs	r3, #0
 3329              		.syntax unified
 3330              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 3331 005a 83F31188 		MSR basepri, r3
 3332              	@ 0 "" 2
 3333              	.LVL208:
 3334              		.loc 5 493 3 is_stmt 0 view .LVU1101
 3335              		.thumb
 3336              		.syntax unified
 3337              	.LBE653:
 3338              	.LBE652:
 3339              	.LBE651:
 3340              	.LBE650:
 3341              	.LBE649:
 609:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 3342              		.loc 2 609 1 view .LVU1102
 3343 005e DAE7     		b	.L212
 3344              	.LVL209:
 3345              	.L213:
 609:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 3346              		.loc 2 609 1 view .LVU1103
 3347              	.LBE648:
 3348              	.LBE647:
 970:lib/chibios/os/hal/src/hal_usb.c ****       break;
 3349              		.loc 1 970 5 is_stmt 1 view .LVU1104
 970:lib/chibios/os/hal/src/hal_usb.c ****       break;
 3350              		.loc 1 970 9 is_stmt 0 view .LVU1105
 3351 0060 C368     		ldr	r3, [r0, #12]
 3352 0062 9B69     		ldr	r3, [r3, #24]
 970:lib/chibios/os/hal/src/hal_usb.c ****       break;
 3353              		.loc 1 970 8 view .LVU1106
 3354 0064 5B68     		ldr	r3, [r3, #4]
 3355 0066 002B     		cmp	r3, #0
 3356 0068 D5D1     		bne	.L212
 974:lib/chibios/os/hal/src/hal_usb.c ****       usbp->ep0endcb(usbp);
 3357              		.loc 1 974 5 is_stmt 1 view .LVU1107
 974:lib/chibios/os/hal/src/hal_usb.c ****       usbp->ep0endcb(usbp);
 3358              		.loc 1 974 13 is_stmt 0 view .LVU1108
 3359 006a 036F     		ldr	r3, [r0, #112]
 974:lib/chibios/os/hal/src/hal_usb.c ****       usbp->ep0endcb(usbp);
 3360              		.loc 1 974 8 view .LVU1109
 3361 006c 03B1     		cbz	r3, .L218
 975:lib/chibios/os/hal/src/hal_usb.c ****     }
 3362              		.loc 1 975 7 is_stmt 1 view .LVU1110
 3363 006e 9847     		blx	r3
 3364              	.LVL210:
 3365              	.L218:
 977:lib/chibios/os/hal/src/hal_usb.c ****     return;
 3366              		.loc 1 977 5 view .LVU1111
 977:lib/chibios/os/hal/src/hal_usb.c ****     return;
 3367              		.loc 1 977 20 is_stmt 0 view .LVU1112
 3368 0070 0023     		movs	r3, #0
 3369              	.L232:
 993:lib/chibios/os/hal/src/hal_usb.c ****     return;
 3370              		.loc 1 993 20 discriminator 3 view .LVU1113
 3371 0072 84F86430 		strb	r3, [r4, #100]
 994:lib/chibios/os/hal/src/hal_usb.c ****   default:
 3372              		.loc 1 994 5 is_stmt 1 discriminator 3 view .LVU1114
 996:lib/chibios/os/hal/src/hal_usb.c ****   }
 3373              		.loc 1 996 5 discriminator 3 view .LVU1115
 994:lib/chibios/os/hal/src/hal_usb.c ****   default:
 3374              		.loc 1 994 5 is_stmt 0 discriminator 3 view .LVU1116
 3375 0076 CEE7     		b	.L212
 3376              		.cfi_endproc
 3377              	.LFE349:
 3379              		.section	.rodata.active_status,"a"
 3380              		.set	.LANCHOR2,. + 0
 3383              	active_status:
 3384 0000 0000     		.space	2
 3385              		.section	.rodata.halted_status,"a"
 3386              		.set	.LANCHOR1,. + 0
 3389              	halted_status:
 3390 0000 0100     		.ascii	"\001\000"
 3391              		.section	.rodata.zero_status,"a"
 3392              		.set	.LANCHOR0,. + 0
 3395              	zero_status:
 3396 0000 0000     		.space	2
 3397              		.text
 3398              	.Letext0:
 3399              		.file 6 "/usr/lib/gcc/arm-none-eabi/11.2.0/include/stddef.h"
 3400              		.file 7 "/usr/arm-none-eabi/include/machine/_default_types.h"
 3401              		.file 8 "/usr/arm-none-eabi/include/sys/_stdint.h"
 3402              		.file 9 "./lib/chibios/os/common/ports/ARMCMx/compilers/GCC/chtypes.h"
 3403              		.file 10 "./lib/chibios/os/rt/include/chsystypes.h"
 3404              		.file 11 "./lib/chibios/os/rt/include/chschd.h"
 3405              		.file 12 "./lib/chibios/os/rt/include/chlists.h"
 3406              		.file 13 "./lib/chibios/os/rt/include/chtime.h"
 3407              		.file 14 "./lib/chibios/os/common/ports/ARMCMx/chcore.h"
 3408              		.file 15 "./lib/chibios/os/rt/include/chsem.h"
 3409              		.file 16 "./lib/chibios/os/rt/include/chmtx.h"
 3410              		.file 17 "./lib/chibios/os/hal/include/hal_usb.h"
 3411              		.file 18 "./lib/chibios/os/hal/ports/STM32/LLD/USBv1/hal_usb_lld.h"
 3412              		.file 19 "./lib/chibios/os/hal/ports/STM32/LLD/USBv1/stm32_usb.h"
 3413              		.file 20 "./lib/chibios/os/rt/include/chthreads.h"
 3414              		.file 21 "/usr/arm-none-eabi/include/string.h"
 3415              		.file 22 "<built-in>"
DEFINED SYMBOLS
                            *ABS*:0000000000000000 hal_usb.c
     /tmp/ccdBFsXi.s:18     .text.set_address:0000000000000000 $t
     /tmp/ccdBFsXi.s:25     .text.set_address:0000000000000000 set_address
     /tmp/ccdBFsXi.s:69     .text.usbInit:0000000000000000 $t
     /tmp/ccdBFsXi.s:76     .text.usbInit:0000000000000000 usbInit
     /tmp/ccdBFsXi.s:90     .text.usbObjectInit:0000000000000000 $t
     /tmp/ccdBFsXi.s:97     .text.usbObjectInit:0000000000000000 usbObjectInit
     /tmp/ccdBFsXi.s:140    .text.usbStart:0000000000000000 $t
     /tmp/ccdBFsXi.s:147    .text.usbStart:0000000000000000 usbStart
     /tmp/ccdBFsXi.s:298    .text.usbStop:0000000000000000 $t
     /tmp/ccdBFsXi.s:305    .text.usbStop:0000000000000000 usbStop
     /tmp/ccdBFsXi.s:513    .text.usbInitEndpointI:0000000000000000 $t
     /tmp/ccdBFsXi.s:520    .text.usbInitEndpointI:0000000000000000 usbInitEndpointI
     /tmp/ccdBFsXi.s:600    .text.usbDisableEndpointsI:0000000000000000 $t
     /tmp/ccdBFsXi.s:607    .text.usbDisableEndpointsI:0000000000000000 usbDisableEndpointsI
     /tmp/ccdBFsXi.s:727    .text.usbStartReceiveI:0000000000000000 $t
     /tmp/ccdBFsXi.s:734    .text.usbStartReceiveI:0000000000000000 usbStartReceiveI
     /tmp/ccdBFsXi.s:807    .text.usbStartTransmitI:0000000000000000 $t
     /tmp/ccdBFsXi.s:814    .text.usbStartTransmitI:0000000000000000 usbStartTransmitI
     /tmp/ccdBFsXi.s:887    .text.usbReceive:0000000000000000 $t
     /tmp/ccdBFsXi.s:894    .text.usbReceive:0000000000000000 usbReceive
     /tmp/ccdBFsXi.s:1086   .text.usbTransmit:0000000000000000 $t
     /tmp/ccdBFsXi.s:1093   .text.usbTransmit:0000000000000000 usbTransmit
     /tmp/ccdBFsXi.s:1285   .text.usbStallReceiveI:0000000000000000 $t
     /tmp/ccdBFsXi.s:1292   .text.usbStallReceiveI:0000000000000000 usbStallReceiveI
     /tmp/ccdBFsXi.s:1336   .text.usbStallTransmitI:0000000000000000 $t
     /tmp/ccdBFsXi.s:1343   .text.usbStallTransmitI:0000000000000000 usbStallTransmitI
     /tmp/ccdBFsXi.s:1387   .text.usbWakeupHost:0000000000000000 $t
     /tmp/ccdBFsXi.s:1394   .text.usbWakeupHost:0000000000000000 usbWakeupHost
     /tmp/ccdBFsXi.s:1443   .text.usbWakeupHost:0000000000000024 $d
     /tmp/ccdBFsXi.s:1448   .text._usb_reset:0000000000000000 $t
     /tmp/ccdBFsXi.s:1455   .text._usb_reset:0000000000000000 _usb_reset
     /tmp/ccdBFsXi.s:1707   .text._usb_suspend:0000000000000000 $t
     /tmp/ccdBFsXi.s:1714   .text._usb_suspend:0000000000000000 _usb_suspend
     /tmp/ccdBFsXi.s:1923   .text._usb_wakeup:0000000000000000 $t
     /tmp/ccdBFsXi.s:1930   .text._usb_wakeup:0000000000000000 _usb_wakeup
     /tmp/ccdBFsXi.s:1959   .text._usb_ep0setup:0000000000000000 $t
     /tmp/ccdBFsXi.s:1966   .text._usb_ep0setup:0000000000000000 _usb_ep0setup
     /tmp/ccdBFsXi.s:2840   .text._usb_ep0setup:0000000000000284 $d
     /tmp/ccdBFsXi.s:2848   .text._usb_ep0in:0000000000000000 $t
     /tmp/ccdBFsXi.s:2855   .text._usb_ep0in:0000000000000000 _usb_ep0in
     /tmp/ccdBFsXi.s:2887   .text._usb_ep0in:000000000000001c $d
     /tmp/ccdBFsXi.s:2903   .text._usb_ep0in:000000000000002c $t
     /tmp/ccdBFsXi.s:3171   .text._usb_ep0out:0000000000000000 $t
     /tmp/ccdBFsXi.s:3178   .text._usb_ep0out:0000000000000000 _usb_ep0out
     /tmp/ccdBFsXi.s:3383   .rodata.active_status:0000000000000000 active_status
     /tmp/ccdBFsXi.s:3384   .rodata.active_status:0000000000000000 $d
     /tmp/ccdBFsXi.s:3389   .rodata.halted_status:0000000000000000 halted_status
     /tmp/ccdBFsXi.s:3395   .rodata.zero_status:0000000000000000 zero_status
     /tmp/ccdBFsXi.s:3396   .rodata.zero_status:0000000000000000 $d

UNDEFINED SYMBOLS
usb_lld_set_address
usb_lld_init
memset
usb_lld_start
usb_lld_stop
chThdResumeI
chSchRescheduleS
usb_lld_init_endpoint
usb_lld_disable_endpoints
usb_lld_start_out
usb_lld_start_in
chThdSuspendTimeoutS
usb_lld_stall_out
usb_lld_stall_in
chThdSleep
usb_lld_reset
usb_lld_read_setup
usb_lld_get_status_in
usb_lld_get_status_out
usb_lld_clear_in
usb_lld_clear_out
