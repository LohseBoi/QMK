   1               		.file	"serial.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__tmp_reg__ = 0
   6               	__zero_reg__ = 1
   7               		.text
   8               	.Ltext0:
   9               		.cfi_sections	.debug_frame
  10               		.section	.text.sync_recv,"ax",@progbits
  12               	sync_recv:
  13               	.LFB36:
  14               		.file 1 "platforms/avr/drivers/serial.c"
   1:platforms/avr/drivers/serial.c **** /*
   2:platforms/avr/drivers/serial.c ****  * WARNING: be careful changing this code, it is very timing dependent
   3:platforms/avr/drivers/serial.c ****  *
   4:platforms/avr/drivers/serial.c ****  * 2018-10-28 checked
   5:platforms/avr/drivers/serial.c ****  *  avr-gcc 4.9.2
   6:platforms/avr/drivers/serial.c ****  *  avr-gcc 5.4.0
   7:platforms/avr/drivers/serial.c ****  *  avr-gcc 7.3.0
   8:platforms/avr/drivers/serial.c ****  */
   9:platforms/avr/drivers/serial.c **** 
  10:platforms/avr/drivers/serial.c **** #ifndef F_CPU
  11:platforms/avr/drivers/serial.c **** #    define F_CPU 16000000
  12:platforms/avr/drivers/serial.c **** #endif
  13:platforms/avr/drivers/serial.c **** 
  14:platforms/avr/drivers/serial.c **** #include <avr/io.h>
  15:platforms/avr/drivers/serial.c **** #include <avr/interrupt.h>
  16:platforms/avr/drivers/serial.c **** #include <util/delay.h>
  17:platforms/avr/drivers/serial.c **** #include <stddef.h>
  18:platforms/avr/drivers/serial.c **** #include <stdbool.h>
  19:platforms/avr/drivers/serial.c **** #include "serial.h"
  20:platforms/avr/drivers/serial.c **** 
  21:platforms/avr/drivers/serial.c **** #ifdef SOFT_SERIAL_PIN
  22:platforms/avr/drivers/serial.c **** 
  23:platforms/avr/drivers/serial.c **** #    if !(defined(__AVR_AT90USB646__) || defined(__AVR_AT90USB647__) || defined(__AVR_AT90USB1286__
  24:platforms/avr/drivers/serial.c **** #        error serial.c is not supported for the currently selected MCU
  25:platforms/avr/drivers/serial.c **** #    endif
  26:platforms/avr/drivers/serial.c **** // if using ATmega32U4/2, AT90USBxxx I2C, can not use PD0 and PD1 in soft serial.
  27:platforms/avr/drivers/serial.c **** #    if defined(__AVR_ATmega16U4__) || defined(__AVR_ATmega32U4__) || defined(__AVR_AT90USB646__) |
  28:platforms/avr/drivers/serial.c **** #        if defined(USE_AVR_I2C) && (SOFT_SERIAL_PIN == D0 || SOFT_SERIAL_PIN == D1)
  29:platforms/avr/drivers/serial.c **** #            error Using I2C, so can not use PD0, PD1
  30:platforms/avr/drivers/serial.c **** #        endif
  31:platforms/avr/drivers/serial.c **** #    endif
  32:platforms/avr/drivers/serial.c **** // PD0..PD3, common config
  33:platforms/avr/drivers/serial.c **** #    if SOFT_SERIAL_PIN == D0
  34:platforms/avr/drivers/serial.c **** #        define EIMSK_BIT _BV(INT0)
  35:platforms/avr/drivers/serial.c **** #        define EICRx_BIT (~(_BV(ISC00) | _BV(ISC01)))
  36:platforms/avr/drivers/serial.c **** #        define SERIAL_PIN_INTERRUPT INT0_vect
  37:platforms/avr/drivers/serial.c **** #        define EICRx EICRA
  38:platforms/avr/drivers/serial.c **** #    elif SOFT_SERIAL_PIN == D1
  39:platforms/avr/drivers/serial.c **** #        define EIMSK_BIT _BV(INT1)
  40:platforms/avr/drivers/serial.c **** #        define EICRx_BIT (~(_BV(ISC10) | _BV(ISC11)))
  41:platforms/avr/drivers/serial.c **** #        define SERIAL_PIN_INTERRUPT INT1_vect
  42:platforms/avr/drivers/serial.c **** #        define EICRx EICRA
  43:platforms/avr/drivers/serial.c **** #    elif SOFT_SERIAL_PIN == D2
  44:platforms/avr/drivers/serial.c **** #        define EIMSK_BIT _BV(INT2)
  45:platforms/avr/drivers/serial.c **** #        define EICRx_BIT (~(_BV(ISC20) | _BV(ISC21)))
  46:platforms/avr/drivers/serial.c **** #        define SERIAL_PIN_INTERRUPT INT2_vect
  47:platforms/avr/drivers/serial.c **** #        define EICRx EICRA
  48:platforms/avr/drivers/serial.c **** #    elif SOFT_SERIAL_PIN == D3
  49:platforms/avr/drivers/serial.c **** #        define EIMSK_BIT _BV(INT3)
  50:platforms/avr/drivers/serial.c **** #        define EICRx_BIT (~(_BV(ISC30) | _BV(ISC31)))
  51:platforms/avr/drivers/serial.c **** #        define SERIAL_PIN_INTERRUPT INT3_vect
  52:platforms/avr/drivers/serial.c **** #        define EICRx EICRA
  53:platforms/avr/drivers/serial.c **** #    endif
  54:platforms/avr/drivers/serial.c **** 
  55:platforms/avr/drivers/serial.c **** // ATmegaxxU2/AT90USB162 specific config
  56:platforms/avr/drivers/serial.c **** #    if defined(__AVR_ATmega16U2__) || defined(__AVR_ATmega32U2__) || defined(__AVR_AT90USB162__)
  57:platforms/avr/drivers/serial.c **** // PD4(INT5), PD6(INT6), PD7(INT7), PC7(INT4)
  58:platforms/avr/drivers/serial.c **** #        if SOFT_SERIAL_PIN == D4
  59:platforms/avr/drivers/serial.c **** #            define EIMSK_BIT _BV(INT5)
  60:platforms/avr/drivers/serial.c **** #            define EICRx_BIT (~(_BV(ISC50) | _BV(ISC51)))
  61:platforms/avr/drivers/serial.c **** #            define SERIAL_PIN_INTERRUPT INT5_vect
  62:platforms/avr/drivers/serial.c **** #            define EICRx EICRB
  63:platforms/avr/drivers/serial.c **** #        elif SOFT_SERIAL_PIN == D6
  64:platforms/avr/drivers/serial.c **** #            define EIMSK_BIT _BV(INT6)
  65:platforms/avr/drivers/serial.c **** #            define EICRx_BIT (~(_BV(ISC60) | _BV(ISC61)))
  66:platforms/avr/drivers/serial.c **** #            define SERIAL_PIN_INTERRUPT INT6_vect
  67:platforms/avr/drivers/serial.c **** #            define EICRx EICRB
  68:platforms/avr/drivers/serial.c **** #        elif SOFT_SERIAL_PIN == D7
  69:platforms/avr/drivers/serial.c **** #            define EIMSK_BIT _BV(INT7)
  70:platforms/avr/drivers/serial.c **** #            define EICRx_BIT (~(_BV(ISC70) | _BV(ISC71)))
  71:platforms/avr/drivers/serial.c **** #            define SERIAL_PIN_INTERRUPT INT7_vect
  72:platforms/avr/drivers/serial.c **** #            define EICRx EICRB
  73:platforms/avr/drivers/serial.c **** #        elif SOFT_SERIAL_PIN == C7
  74:platforms/avr/drivers/serial.c **** #            define EIMSK_BIT _BV(INT4)
  75:platforms/avr/drivers/serial.c **** #            define EICRx_BIT (~(_BV(ISC40) | _BV(ISC41)))
  76:platforms/avr/drivers/serial.c **** #            define SERIAL_PIN_INTERRUPT INT4_vect
  77:platforms/avr/drivers/serial.c **** #            define EICRx EICRB
  78:platforms/avr/drivers/serial.c **** #        endif
  79:platforms/avr/drivers/serial.c **** #    endif
  80:platforms/avr/drivers/serial.c **** 
  81:platforms/avr/drivers/serial.c **** // ATmegaxxU4 specific config
  82:platforms/avr/drivers/serial.c **** #    if defined(__AVR_ATmega16U4__) || defined(__AVR_ATmega32U4__)
  83:platforms/avr/drivers/serial.c **** // PE6(INT6)
  84:platforms/avr/drivers/serial.c **** #        if SOFT_SERIAL_PIN == E6
  85:platforms/avr/drivers/serial.c **** #            define EIMSK_BIT _BV(INT6)
  86:platforms/avr/drivers/serial.c **** #            define EICRx_BIT (~(_BV(ISC60) | _BV(ISC61)))
  87:platforms/avr/drivers/serial.c **** #            define SERIAL_PIN_INTERRUPT INT6_vect
  88:platforms/avr/drivers/serial.c **** #            define EICRx EICRB
  89:platforms/avr/drivers/serial.c **** #        endif
  90:platforms/avr/drivers/serial.c **** #    endif
  91:platforms/avr/drivers/serial.c **** 
  92:platforms/avr/drivers/serial.c **** // AT90USBxxx specific config
  93:platforms/avr/drivers/serial.c **** #    if defined(__AVR_AT90USB646__) || defined(__AVR_AT90USB647__) || defined(__AVR_AT90USB1286__) 
  94:platforms/avr/drivers/serial.c **** // PE4..PE7(INT4..INT7)
  95:platforms/avr/drivers/serial.c **** #        if SOFT_SERIAL_PIN == E4
  96:platforms/avr/drivers/serial.c **** #            define EIMSK_BIT _BV(INT4)
  97:platforms/avr/drivers/serial.c **** #            define EICRx_BIT (~(_BV(ISC40) | _BV(ISC41)))
  98:platforms/avr/drivers/serial.c **** #            define SERIAL_PIN_INTERRUPT INT4_vect
  99:platforms/avr/drivers/serial.c **** #            define EICRx EICRB
 100:platforms/avr/drivers/serial.c **** #        elif SOFT_SERIAL_PIN == E5
 101:platforms/avr/drivers/serial.c **** #            define EIMSK_BIT _BV(INT5)
 102:platforms/avr/drivers/serial.c **** #            define EICRx_BIT (~(_BV(ISC50) | _BV(ISC51)))
 103:platforms/avr/drivers/serial.c **** #            define SERIAL_PIN_INTERRUPT INT5_vect
 104:platforms/avr/drivers/serial.c **** #            define EICRx EICRB
 105:platforms/avr/drivers/serial.c **** #        elif SOFT_SERIAL_PIN == E6
 106:platforms/avr/drivers/serial.c **** #            define EIMSK_BIT _BV(INT6)
 107:platforms/avr/drivers/serial.c **** #            define EICRx_BIT (~(_BV(ISC60) | _BV(ISC61)))
 108:platforms/avr/drivers/serial.c **** #            define SERIAL_PIN_INTERRUPT INT6_vect
 109:platforms/avr/drivers/serial.c **** #            define EICRx EICRB
 110:platforms/avr/drivers/serial.c **** #        elif SOFT_SERIAL_PIN == E7
 111:platforms/avr/drivers/serial.c **** #            define EIMSK_BIT _BV(INT7)
 112:platforms/avr/drivers/serial.c **** #            define EICRx_BIT (~(_BV(ISC70) | _BV(ISC71)))
 113:platforms/avr/drivers/serial.c **** #            define SERIAL_PIN_INTERRUPT INT7_vect
 114:platforms/avr/drivers/serial.c **** #            define EICRx EICRB
 115:platforms/avr/drivers/serial.c **** #        endif
 116:platforms/avr/drivers/serial.c **** #    endif
 117:platforms/avr/drivers/serial.c **** 
 118:platforms/avr/drivers/serial.c **** #    ifndef SERIAL_PIN_INTERRUPT
 119:platforms/avr/drivers/serial.c **** #        error invalid SOFT_SERIAL_PIN value
 120:platforms/avr/drivers/serial.c **** #    endif
 121:platforms/avr/drivers/serial.c **** 
 122:platforms/avr/drivers/serial.c **** #    define setPinInputHigh(pin) (DDRx_ADDRESS(pin) &= ~_BV((pin)&0xF), PORTx_ADDRESS(pin) |= _BV((
 123:platforms/avr/drivers/serial.c **** #    define setPinOutput(pin) (DDRx_ADDRESS(pin) |= _BV((pin)&0xF))
 124:platforms/avr/drivers/serial.c **** #    define writePinHigh(pin) (PORTx_ADDRESS(pin) |= _BV((pin)&0xF))
 125:platforms/avr/drivers/serial.c **** #    define writePinLow(pin) (PORTx_ADDRESS(pin) &= ~_BV((pin)&0xF))
 126:platforms/avr/drivers/serial.c **** #    define readPin(pin) ((bool)(PINx_ADDRESS(pin) & _BV((pin)&0xF)))
 127:platforms/avr/drivers/serial.c **** 
 128:platforms/avr/drivers/serial.c **** #    define ALWAYS_INLINE __attribute__((always_inline))
 129:platforms/avr/drivers/serial.c **** #    define NO_INLINE __attribute__((noinline))
 130:platforms/avr/drivers/serial.c **** #    define _delay_sub_us(x) __builtin_avr_delay_cycles(x)
 131:platforms/avr/drivers/serial.c **** 
 132:platforms/avr/drivers/serial.c **** // parity check
 133:platforms/avr/drivers/serial.c **** #    define ODD_PARITY 1
 134:platforms/avr/drivers/serial.c **** #    define EVEN_PARITY 0
 135:platforms/avr/drivers/serial.c **** #    define PARITY EVEN_PARITY
 136:platforms/avr/drivers/serial.c **** 
 137:platforms/avr/drivers/serial.c **** #    ifdef SERIAL_DELAY
 138:platforms/avr/drivers/serial.c **** // custom setup in config.h
 139:platforms/avr/drivers/serial.c **** // #define TID_SEND_ADJUST 2
 140:platforms/avr/drivers/serial.c **** // #define SERIAL_DELAY 6             // micro sec
 141:platforms/avr/drivers/serial.c **** // #define READ_WRITE_START_ADJUST 30 // cycles
 142:platforms/avr/drivers/serial.c **** // #define READ_WRITE_WIDTH_ADJUST 8 // cycles
 143:platforms/avr/drivers/serial.c **** #    else
 144:platforms/avr/drivers/serial.c **** // ============ Standard setups ============
 145:platforms/avr/drivers/serial.c **** 
 146:platforms/avr/drivers/serial.c **** #        ifndef SELECT_SOFT_SERIAL_SPEED
 147:platforms/avr/drivers/serial.c **** #            define SELECT_SOFT_SERIAL_SPEED 1
 148:platforms/avr/drivers/serial.c **** //  0: about 189kbps (Experimental only)
 149:platforms/avr/drivers/serial.c **** //  1: about 137kbps (default)
 150:platforms/avr/drivers/serial.c **** //  2: about 75kbps
 151:platforms/avr/drivers/serial.c **** //  3: about 39kbps
 152:platforms/avr/drivers/serial.c **** //  4: about 26kbps
 153:platforms/avr/drivers/serial.c **** //  5: about 20kbps
 154:platforms/avr/drivers/serial.c **** #        endif
 155:platforms/avr/drivers/serial.c **** 
 156:platforms/avr/drivers/serial.c **** #        if __GNUC__ < 6
 157:platforms/avr/drivers/serial.c **** #            define TID_SEND_ADJUST 14
 158:platforms/avr/drivers/serial.c **** #        else
 159:platforms/avr/drivers/serial.c **** #            define TID_SEND_ADJUST 2
 160:platforms/avr/drivers/serial.c **** #        endif
 161:platforms/avr/drivers/serial.c **** 
 162:platforms/avr/drivers/serial.c **** #        if SELECT_SOFT_SERIAL_SPEED == 0
 163:platforms/avr/drivers/serial.c **** // Very High speed
 164:platforms/avr/drivers/serial.c **** #            define SERIAL_DELAY 4  // micro sec
 165:platforms/avr/drivers/serial.c **** #            if __GNUC__ < 6
 166:platforms/avr/drivers/serial.c **** #                define READ_WRITE_START_ADJUST 33  // cycles
 167:platforms/avr/drivers/serial.c **** #                define READ_WRITE_WIDTH_ADJUST 3   // cycles
 168:platforms/avr/drivers/serial.c **** #            else
 169:platforms/avr/drivers/serial.c **** #                define READ_WRITE_START_ADJUST 34  // cycles
 170:platforms/avr/drivers/serial.c **** #                define READ_WRITE_WIDTH_ADJUST 7   // cycles
 171:platforms/avr/drivers/serial.c **** #            endif
 172:platforms/avr/drivers/serial.c **** #        elif SELECT_SOFT_SERIAL_SPEED == 1
 173:platforms/avr/drivers/serial.c **** // High speed
 174:platforms/avr/drivers/serial.c **** #            define SERIAL_DELAY 6  // micro sec
 175:platforms/avr/drivers/serial.c **** #            if __GNUC__ < 6
 176:platforms/avr/drivers/serial.c **** #                define READ_WRITE_START_ADJUST 30  // cycles
 177:platforms/avr/drivers/serial.c **** #                define READ_WRITE_WIDTH_ADJUST 3   // cycles
 178:platforms/avr/drivers/serial.c **** #            else
 179:platforms/avr/drivers/serial.c **** #                define READ_WRITE_START_ADJUST 33  // cycles
 180:platforms/avr/drivers/serial.c **** #                define READ_WRITE_WIDTH_ADJUST 7   // cycles
 181:platforms/avr/drivers/serial.c **** #            endif
 182:platforms/avr/drivers/serial.c **** #        elif SELECT_SOFT_SERIAL_SPEED == 2
 183:platforms/avr/drivers/serial.c **** // Middle speed
 184:platforms/avr/drivers/serial.c **** #            define SERIAL_DELAY 12             // micro sec
 185:platforms/avr/drivers/serial.c **** #            define READ_WRITE_START_ADJUST 30  // cycles
 186:platforms/avr/drivers/serial.c **** #            if __GNUC__ < 6
 187:platforms/avr/drivers/serial.c **** #                define READ_WRITE_WIDTH_ADJUST 3  // cycles
 188:platforms/avr/drivers/serial.c **** #            else
 189:platforms/avr/drivers/serial.c **** #                define READ_WRITE_WIDTH_ADJUST 7  // cycles
 190:platforms/avr/drivers/serial.c **** #            endif
 191:platforms/avr/drivers/serial.c **** #        elif SELECT_SOFT_SERIAL_SPEED == 3
 192:platforms/avr/drivers/serial.c **** // Low speed
 193:platforms/avr/drivers/serial.c **** #            define SERIAL_DELAY 24             // micro sec
 194:platforms/avr/drivers/serial.c **** #            define READ_WRITE_START_ADJUST 30  // cycles
 195:platforms/avr/drivers/serial.c **** #            if __GNUC__ < 6
 196:platforms/avr/drivers/serial.c **** #                define READ_WRITE_WIDTH_ADJUST 3  // cycles
 197:platforms/avr/drivers/serial.c **** #            else
 198:platforms/avr/drivers/serial.c **** #                define READ_WRITE_WIDTH_ADJUST 7  // cycles
 199:platforms/avr/drivers/serial.c **** #            endif
 200:platforms/avr/drivers/serial.c **** #        elif SELECT_SOFT_SERIAL_SPEED == 4
 201:platforms/avr/drivers/serial.c **** // Very Low speed
 202:platforms/avr/drivers/serial.c **** #            define SERIAL_DELAY 36             // micro sec
 203:platforms/avr/drivers/serial.c **** #            define READ_WRITE_START_ADJUST 30  // cycles
 204:platforms/avr/drivers/serial.c **** #            if __GNUC__ < 6
 205:platforms/avr/drivers/serial.c **** #                define READ_WRITE_WIDTH_ADJUST 3  // cycles
 206:platforms/avr/drivers/serial.c **** #            else
 207:platforms/avr/drivers/serial.c **** #                define READ_WRITE_WIDTH_ADJUST 7  // cycles
 208:platforms/avr/drivers/serial.c **** #            endif
 209:platforms/avr/drivers/serial.c **** #        elif SELECT_SOFT_SERIAL_SPEED == 5
 210:platforms/avr/drivers/serial.c **** // Ultra Low speed
 211:platforms/avr/drivers/serial.c **** #            define SERIAL_DELAY 48             // micro sec
 212:platforms/avr/drivers/serial.c **** #            define READ_WRITE_START_ADJUST 30  // cycles
 213:platforms/avr/drivers/serial.c **** #            if __GNUC__ < 6
 214:platforms/avr/drivers/serial.c **** #                define READ_WRITE_WIDTH_ADJUST 3  // cycles
 215:platforms/avr/drivers/serial.c **** #            else
 216:platforms/avr/drivers/serial.c **** #                define READ_WRITE_WIDTH_ADJUST 7  // cycles
 217:platforms/avr/drivers/serial.c **** #            endif
 218:platforms/avr/drivers/serial.c **** #        else
 219:platforms/avr/drivers/serial.c **** #            error invalid SELECT_SOFT_SERIAL_SPEED value
 220:platforms/avr/drivers/serial.c **** #        endif /* SELECT_SOFT_SERIAL_SPEED */
 221:platforms/avr/drivers/serial.c **** #    endif     /* SERIAL_DELAY */
 222:platforms/avr/drivers/serial.c **** 
 223:platforms/avr/drivers/serial.c **** #    define SERIAL_DELAY_HALF1 (SERIAL_DELAY / 2)
 224:platforms/avr/drivers/serial.c **** #    define SERIAL_DELAY_HALF2 (SERIAL_DELAY - SERIAL_DELAY / 2)
 225:platforms/avr/drivers/serial.c **** 
 226:platforms/avr/drivers/serial.c **** #    define SLAVE_INT_WIDTH_US 1
 227:platforms/avr/drivers/serial.c **** #    define SLAVE_INT_ACK_WIDTH_UNIT 2
 228:platforms/avr/drivers/serial.c **** #    define SLAVE_INT_ACK_WIDTH 4
 229:platforms/avr/drivers/serial.c **** 
 230:platforms/avr/drivers/serial.c **** inline static void serial_delay(void) ALWAYS_INLINE;
 231:platforms/avr/drivers/serial.c **** inline static void serial_delay(void) { _delay_us(SERIAL_DELAY); }
 232:platforms/avr/drivers/serial.c **** 
 233:platforms/avr/drivers/serial.c **** inline static void serial_delay_half1(void) ALWAYS_INLINE;
 234:platforms/avr/drivers/serial.c **** inline static void serial_delay_half1(void) { _delay_us(SERIAL_DELAY_HALF1); }
 235:platforms/avr/drivers/serial.c **** 
 236:platforms/avr/drivers/serial.c **** inline static void serial_delay_half2(void) ALWAYS_INLINE;
 237:platforms/avr/drivers/serial.c **** inline static void serial_delay_half2(void) { _delay_us(SERIAL_DELAY_HALF2); }
 238:platforms/avr/drivers/serial.c **** 
 239:platforms/avr/drivers/serial.c **** inline static void serial_output(void) ALWAYS_INLINE;
 240:platforms/avr/drivers/serial.c **** inline static void serial_output(void) { setPinOutput(SOFT_SERIAL_PIN); }
 241:platforms/avr/drivers/serial.c **** 
 242:platforms/avr/drivers/serial.c **** // make the serial pin an input with pull-up resistor
 243:platforms/avr/drivers/serial.c **** inline static void serial_input_with_pullup(void) ALWAYS_INLINE;
 244:platforms/avr/drivers/serial.c **** inline static void serial_input_with_pullup(void) { setPinInputHigh(SOFT_SERIAL_PIN); }
 245:platforms/avr/drivers/serial.c **** 
 246:platforms/avr/drivers/serial.c **** inline static uint8_t serial_read_pin(void) ALWAYS_INLINE;
 247:platforms/avr/drivers/serial.c **** inline static uint8_t serial_read_pin(void) { return !!readPin(SOFT_SERIAL_PIN); }
 248:platforms/avr/drivers/serial.c **** 
 249:platforms/avr/drivers/serial.c **** inline static void serial_low(void) ALWAYS_INLINE;
 250:platforms/avr/drivers/serial.c **** inline static void serial_low(void) { writePinLow(SOFT_SERIAL_PIN); }
 251:platforms/avr/drivers/serial.c **** 
 252:platforms/avr/drivers/serial.c **** inline static void serial_high(void) ALWAYS_INLINE;
 253:platforms/avr/drivers/serial.c **** inline static void serial_high(void) { writePinHigh(SOFT_SERIAL_PIN); }
 254:platforms/avr/drivers/serial.c **** 
 255:platforms/avr/drivers/serial.c **** void soft_serial_initiator_init(void) {
 256:platforms/avr/drivers/serial.c ****     serial_output();
 257:platforms/avr/drivers/serial.c ****     serial_high();
 258:platforms/avr/drivers/serial.c **** }
 259:platforms/avr/drivers/serial.c **** 
 260:platforms/avr/drivers/serial.c **** void soft_serial_target_init(void) {
 261:platforms/avr/drivers/serial.c ****     serial_input_with_pullup();
 262:platforms/avr/drivers/serial.c **** 
 263:platforms/avr/drivers/serial.c ****     // Enable INT0-INT7
 264:platforms/avr/drivers/serial.c ****     EIMSK |= EIMSK_BIT;
 265:platforms/avr/drivers/serial.c ****     EICRx &= EICRx_BIT;
 266:platforms/avr/drivers/serial.c **** }
 267:platforms/avr/drivers/serial.c **** 
 268:platforms/avr/drivers/serial.c **** // Used by the sender to synchronize timing with the reciver.
 269:platforms/avr/drivers/serial.c **** static void sync_recv(void) NO_INLINE;
 270:platforms/avr/drivers/serial.c **** static void sync_recv(void) {
  15               		.loc 1 270 29 view -0
  16               		.cfi_startproc
  17               	/* prologue: function */
  18               	/* frame size = 0 */
  19               	/* stack size = 0 */
  20               	.L__stack_usage = 0
 271:platforms/avr/drivers/serial.c ****     for (uint8_t i = 0; i < SERIAL_DELAY * 5 && serial_read_pin(); i++) {
  21               		.loc 1 271 5 view .LVU1
  22               	.LBB140:
  23               		.loc 1 271 10 view .LVU2
  24               	.LVL0:
  25               		.loc 1 271 10 is_stmt 0 view .LVU3
  26               	.LBE140:
 270:platforms/avr/drivers/serial.c ****     for (uint8_t i = 0; i < SERIAL_DELAY * 5 && serial_read_pin(); i++) {
  27               		.loc 1 270 29 view .LVU4
  28 0000 8EE1      		ldi r24,lo8(30)
  29               	.LVL1:
  30               	.L2:
  31               	.LBB143:
  32               	.LBB141:
  33               	.LBI141:
 247:platforms/avr/drivers/serial.c **** 
  34               		.loc 1 247 23 is_stmt 1 view .LVU5
  35               	.LBB142:
 247:platforms/avr/drivers/serial.c **** 
  36               		.loc 1 247 47 view .LVU6
  37               	.LBE142:
  38               	.LBE141:
  39               		.loc 1 271 46 is_stmt 0 view .LVU7
  40 0002 4A9B      		sbis 0x9,2
  41 0004 00C0      		rjmp .L7
 272:platforms/avr/drivers/serial.c ****     }
  42               		.loc 1 272 5 is_stmt 1 discriminator 4 view .LVU8
  43               	.LVL2:
  44               		.loc 1 272 5 is_stmt 0 discriminator 4 view .LVU9
  45 0006 8150      		subi r24,lo8(-(-1))
  46               	.LVL3:
 271:platforms/avr/drivers/serial.c ****     }
  47               		.loc 1 271 5 discriminator 4 view .LVU10
  48 0008 01F4      		brne .L2
  49               	.LVL4:
  50               	.L7:
 271:platforms/avr/drivers/serial.c ****     }
  51               		.loc 1 271 5 discriminator 4 view .LVU11
  52               	.LBE143:
 273:platforms/avr/drivers/serial.c ****     // This shouldn't hang if the target disconnects because the
 274:platforms/avr/drivers/serial.c ****     // serial line will float to high if the target does disconnect.
 275:platforms/avr/drivers/serial.c ****     while (!serial_read_pin())
 276:platforms/avr/drivers/serial.c ****         ;
  53               		.loc 1 276 9 is_stmt 1 discriminator 1 view .LVU12
  54               	.LBB144:
  55               	.LBI144:
 247:platforms/avr/drivers/serial.c **** 
  56               		.loc 1 247 23 discriminator 1 view .LVU13
  57               	.LBB145:
 247:platforms/avr/drivers/serial.c **** 
  58               		.loc 1 247 47 discriminator 1 view .LVU14
  59               	.LBE145:
  60               	.LBE144:
 275:platforms/avr/drivers/serial.c ****         ;
  61               		.loc 1 275 11 is_stmt 0 discriminator 1 view .LVU15
  62 000a 4A9B      		sbis 0x9,2
  63 000c 00C0      		rjmp .L7
  64               	/* epilogue start */
 277:platforms/avr/drivers/serial.c **** }
  65               		.loc 1 277 1 view .LVU16
  66 000e 0895      		ret
  67               		.cfi_endproc
  68               	.LFE36:
  70               		.section	.text.sync_send,"ax",@progbits
  72               	sync_send:
  73               	.LFB37:
 278:platforms/avr/drivers/serial.c **** 
 279:platforms/avr/drivers/serial.c **** // Used by the reciver to send a synchronization signal to the sender.
 280:platforms/avr/drivers/serial.c **** static void sync_send(void) NO_INLINE;
 281:platforms/avr/drivers/serial.c **** static void sync_send(void) {
  74               		.loc 1 281 29 is_stmt 1 view -0
  75               		.cfi_startproc
  76               	/* prologue: function */
  77               	/* frame size = 0 */
  78               	/* stack size = 0 */
  79               	.L__stack_usage = 0
 282:platforms/avr/drivers/serial.c ****     serial_low();
  80               		.loc 1 282 5 view .LVU18
  81               	.LBB146:
  82               	.LBI146:
 250:platforms/avr/drivers/serial.c **** 
  83               		.loc 1 250 20 view .LVU19
  84               	.LBB147:
 250:platforms/avr/drivers/serial.c **** 
  85               		.loc 1 250 39 view .LVU20
  86 0000 5A98      		cbi 0xb,2
  87               	.LBE147:
  88               	.LBE146:
 283:platforms/avr/drivers/serial.c ****     serial_delay();
  89               		.loc 1 283 5 view .LVU21
  90               	.LBB148:
  91               	.LBI148:
 231:platforms/avr/drivers/serial.c **** 
  92               		.loc 1 231 20 view .LVU22
  93               	.LBE148:
 231:platforms/avr/drivers/serial.c **** 
  94               		.loc 1 231 41 view .LVU23
  95               	.LVL5:
  96               	.LBB151:
  97               	.LBB149:
  98               	.LBI149:
  99               		.file 2 "/usr/avr/include/util/delay.h"
   1:/usr/avr/include/util/delay.h **** /* Copyright (c) 2002, Marek Michalkiewicz
   2:/usr/avr/include/util/delay.h ****    Copyright (c) 2004,2005,2007 Joerg Wunsch
   3:/usr/avr/include/util/delay.h ****    Copyright (c) 2007  Florin-Viorel Petrov
   4:/usr/avr/include/util/delay.h ****    All rights reserved.
   5:/usr/avr/include/util/delay.h **** 
   6:/usr/avr/include/util/delay.h ****    Redistribution and use in source and binary forms, with or without
   7:/usr/avr/include/util/delay.h ****    modification, are permitted provided that the following conditions are met:
   8:/usr/avr/include/util/delay.h **** 
   9:/usr/avr/include/util/delay.h ****    * Redistributions of source code must retain the above copyright
  10:/usr/avr/include/util/delay.h ****      notice, this list of conditions and the following disclaimer.
  11:/usr/avr/include/util/delay.h **** 
  12:/usr/avr/include/util/delay.h ****    * Redistributions in binary form must reproduce the above copyright
  13:/usr/avr/include/util/delay.h ****      notice, this list of conditions and the following disclaimer in
  14:/usr/avr/include/util/delay.h ****      the documentation and/or other materials provided with the
  15:/usr/avr/include/util/delay.h ****      distribution.
  16:/usr/avr/include/util/delay.h **** 
  17:/usr/avr/include/util/delay.h ****    * Neither the name of the copyright holders nor the names of
  18:/usr/avr/include/util/delay.h ****      contributors may be used to endorse or promote products derived
  19:/usr/avr/include/util/delay.h ****      from this software without specific prior written permission.
  20:/usr/avr/include/util/delay.h **** 
  21:/usr/avr/include/util/delay.h ****   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  22:/usr/avr/include/util/delay.h ****   AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  23:/usr/avr/include/util/delay.h ****   IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
  24:/usr/avr/include/util/delay.h ****   ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
  25:/usr/avr/include/util/delay.h ****   LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
  26:/usr/avr/include/util/delay.h ****   CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
  27:/usr/avr/include/util/delay.h ****   SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
  28:/usr/avr/include/util/delay.h ****   INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
  29:/usr/avr/include/util/delay.h ****   CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
  30:/usr/avr/include/util/delay.h ****   ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  31:/usr/avr/include/util/delay.h ****   POSSIBILITY OF SUCH DAMAGE. */
  32:/usr/avr/include/util/delay.h **** 
  33:/usr/avr/include/util/delay.h **** /* $Id: delay.h.in 2506 2016-02-08 10:05:45Z joerg_wunsch $ */
  34:/usr/avr/include/util/delay.h **** 
  35:/usr/avr/include/util/delay.h **** #ifndef _UTIL_DELAY_H_
  36:/usr/avr/include/util/delay.h **** #define _UTIL_DELAY_H_ 1
  37:/usr/avr/include/util/delay.h **** 
  38:/usr/avr/include/util/delay.h **** #ifndef __DOXYGEN__
  39:/usr/avr/include/util/delay.h **** #  ifndef __HAS_DELAY_CYCLES
  40:/usr/avr/include/util/delay.h **** #    define __HAS_DELAY_CYCLES 1
  41:/usr/avr/include/util/delay.h **** #  endif
  42:/usr/avr/include/util/delay.h **** #endif  /* __DOXYGEN__ */
  43:/usr/avr/include/util/delay.h **** 
  44:/usr/avr/include/util/delay.h **** #include <inttypes.h>
  45:/usr/avr/include/util/delay.h **** #include <util/delay_basic.h>
  46:/usr/avr/include/util/delay.h **** #include <math.h>
  47:/usr/avr/include/util/delay.h **** 
  48:/usr/avr/include/util/delay.h **** /** \file */
  49:/usr/avr/include/util/delay.h **** /** \defgroup util_delay <util/delay.h>: Convenience functions for busy-wait delay loops
  50:/usr/avr/include/util/delay.h ****     \code
  51:/usr/avr/include/util/delay.h ****     #define F_CPU 1000000UL  // 1 MHz
  52:/usr/avr/include/util/delay.h ****     //#define F_CPU 14.7456E6
  53:/usr/avr/include/util/delay.h ****     #include <util/delay.h>
  54:/usr/avr/include/util/delay.h ****     \endcode
  55:/usr/avr/include/util/delay.h **** 
  56:/usr/avr/include/util/delay.h ****     \note As an alternative method, it is possible to pass the
  57:/usr/avr/include/util/delay.h ****     F_CPU macro down to the compiler from the Makefile.
  58:/usr/avr/include/util/delay.h ****     Obviously, in that case, no \c \#define statement should be
  59:/usr/avr/include/util/delay.h ****     used.
  60:/usr/avr/include/util/delay.h **** 
  61:/usr/avr/include/util/delay.h ****     The functions in this header file are wrappers around the basic
  62:/usr/avr/include/util/delay.h ****     busy-wait functions from <util/delay_basic.h>.  They are meant as
  63:/usr/avr/include/util/delay.h ****     convenience functions where actual time values can be specified
  64:/usr/avr/include/util/delay.h ****     rather than a number of cycles to wait for.  The idea behind is
  65:/usr/avr/include/util/delay.h ****     that compile-time constant expressions will be eliminated by
  66:/usr/avr/include/util/delay.h ****     compiler optimization so floating-point expressions can be used
  67:/usr/avr/include/util/delay.h ****     to calculate the number of delay cycles needed based on the CPU
  68:/usr/avr/include/util/delay.h ****     frequency passed by the macro F_CPU.
  69:/usr/avr/include/util/delay.h **** 
  70:/usr/avr/include/util/delay.h ****     \note In order for these functions to work as intended, compiler
  71:/usr/avr/include/util/delay.h ****     optimizations <em>must</em> be enabled, and the delay time
  72:/usr/avr/include/util/delay.h ****     <em>must</em> be an expression that is a known constant at
  73:/usr/avr/include/util/delay.h ****     compile-time.  If these requirements are not met, the resulting
  74:/usr/avr/include/util/delay.h ****     delay will be much longer (and basically unpredictable), and
  75:/usr/avr/include/util/delay.h ****     applications that otherwise do not use floating-point calculations
  76:/usr/avr/include/util/delay.h ****     will experience severe code bloat by the floating-point library
  77:/usr/avr/include/util/delay.h ****     routines linked into the application.
  78:/usr/avr/include/util/delay.h **** 
  79:/usr/avr/include/util/delay.h ****     The functions available allow the specification of microsecond, and
  80:/usr/avr/include/util/delay.h ****     millisecond delays directly, using the application-supplied macro
  81:/usr/avr/include/util/delay.h ****     F_CPU as the CPU clock frequency (in Hertz).
  82:/usr/avr/include/util/delay.h **** 
  83:/usr/avr/include/util/delay.h **** */
  84:/usr/avr/include/util/delay.h **** 
  85:/usr/avr/include/util/delay.h **** #if !defined(__DOXYGEN__)
  86:/usr/avr/include/util/delay.h **** static __inline__ void _delay_us(double __us) __attribute__((__always_inline__));
  87:/usr/avr/include/util/delay.h **** static __inline__ void _delay_ms(double __ms) __attribute__((__always_inline__));
  88:/usr/avr/include/util/delay.h **** #endif
  89:/usr/avr/include/util/delay.h **** 
  90:/usr/avr/include/util/delay.h **** #ifndef F_CPU
  91:/usr/avr/include/util/delay.h **** /* prevent compiler error by supplying a default */
  92:/usr/avr/include/util/delay.h **** # warning "F_CPU not defined for <util/delay.h>"
  93:/usr/avr/include/util/delay.h **** /** \ingroup util_delay
  94:/usr/avr/include/util/delay.h ****     \def F_CPU
  95:/usr/avr/include/util/delay.h ****     \brief CPU frequency in Hz
  96:/usr/avr/include/util/delay.h **** 
  97:/usr/avr/include/util/delay.h ****     The macro F_CPU specifies the CPU frequency to be considered by
  98:/usr/avr/include/util/delay.h ****     the delay macros.  This macro is normally supplied by the
  99:/usr/avr/include/util/delay.h ****     environment (e.g. from within a project header, or the project's
 100:/usr/avr/include/util/delay.h ****     Makefile).  The value 1 MHz here is only provided as a "vanilla"
 101:/usr/avr/include/util/delay.h ****     fallback if no such user-provided definition could be found.
 102:/usr/avr/include/util/delay.h **** 
 103:/usr/avr/include/util/delay.h ****     In terms of the delay functions, the CPU frequency can be given as
 104:/usr/avr/include/util/delay.h ****     a floating-point constant (e.g. 3.6864E6 for 3.6864 MHz).
 105:/usr/avr/include/util/delay.h ****     However, the macros in <util/setbaud.h> require it to be an
 106:/usr/avr/include/util/delay.h ****     integer value.
 107:/usr/avr/include/util/delay.h ****  */
 108:/usr/avr/include/util/delay.h **** # define F_CPU 1000000UL
 109:/usr/avr/include/util/delay.h **** #endif
 110:/usr/avr/include/util/delay.h **** 
 111:/usr/avr/include/util/delay.h **** #ifndef __OPTIMIZE__
 112:/usr/avr/include/util/delay.h **** # warning "Compiler optimizations disabled; functions from <util/delay.h> won't work as designed"
 113:/usr/avr/include/util/delay.h **** #endif
 114:/usr/avr/include/util/delay.h **** 
 115:/usr/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 116:/usr/avr/include/util/delay.h ****   !defined(__DELAY_BACKWARD_COMPATIBLE__) &&	   \
 117:/usr/avr/include/util/delay.h ****   __STDC_HOSTED__
 118:/usr/avr/include/util/delay.h **** #  include <math.h>
 119:/usr/avr/include/util/delay.h **** #endif
 120:/usr/avr/include/util/delay.h **** 
 121:/usr/avr/include/util/delay.h **** /**
 122:/usr/avr/include/util/delay.h ****    \ingroup util_delay
 123:/usr/avr/include/util/delay.h **** 
 124:/usr/avr/include/util/delay.h ****    Perform a delay of \c __ms milliseconds, using _delay_loop_2().
 125:/usr/avr/include/util/delay.h **** 
 126:/usr/avr/include/util/delay.h ****    The macro F_CPU is supposed to be defined to a
 127:/usr/avr/include/util/delay.h ****    constant defining the CPU clock frequency (in Hertz).
 128:/usr/avr/include/util/delay.h **** 
 129:/usr/avr/include/util/delay.h ****    The maximal possible delay is 262.14 ms / F_CPU in MHz.
 130:/usr/avr/include/util/delay.h **** 
 131:/usr/avr/include/util/delay.h ****    When the user request delay which exceed the maximum possible one,
 132:/usr/avr/include/util/delay.h ****    _delay_ms() provides a decreased resolution functionality. In this
 133:/usr/avr/include/util/delay.h ****    mode _delay_ms() will work with a resolution of 1/10 ms, providing
 134:/usr/avr/include/util/delay.h ****    delays up to 6.5535 seconds (independent from CPU frequency).  The
 135:/usr/avr/include/util/delay.h ****    user will not be informed about decreased resolution.
 136:/usr/avr/include/util/delay.h **** 
 137:/usr/avr/include/util/delay.h ****    If the avr-gcc toolchain has __builtin_avr_delay_cycles()
 138:/usr/avr/include/util/delay.h ****    support, maximal possible delay is 4294967.295 ms/ F_CPU in MHz. For
 139:/usr/avr/include/util/delay.h ****    values greater than the maximal possible delay, overflows results in
 140:/usr/avr/include/util/delay.h ****    no delay i.e., 0ms.
 141:/usr/avr/include/util/delay.h **** 
 142:/usr/avr/include/util/delay.h ****    Conversion of \c __ms into clock cycles may not always result in
 143:/usr/avr/include/util/delay.h ****    integer.  By default, the clock cycles rounded up to next
 144:/usr/avr/include/util/delay.h ****    integer. This ensures that the user gets at least \c __ms
 145:/usr/avr/include/util/delay.h ****    microseconds of delay.
 146:/usr/avr/include/util/delay.h **** 
 147:/usr/avr/include/util/delay.h ****    Alternatively, by defining the macro \c __DELAY_ROUND_DOWN__, or
 148:/usr/avr/include/util/delay.h ****    \c __DELAY_ROUND_CLOSEST__, before including this header file, the
 149:/usr/avr/include/util/delay.h ****    algorithm can be made to round down, or round to closest integer,
 150:/usr/avr/include/util/delay.h ****    respectively.
 151:/usr/avr/include/util/delay.h **** 
 152:/usr/avr/include/util/delay.h ****    \note
 153:/usr/avr/include/util/delay.h **** 
 154:/usr/avr/include/util/delay.h ****    The implementation of _delay_ms() based on
 155:/usr/avr/include/util/delay.h ****    __builtin_avr_delay_cycles() is not backward compatible with older
 156:/usr/avr/include/util/delay.h ****    implementations.  In order to get functionality backward compatible
 157:/usr/avr/include/util/delay.h ****    with previous versions, the macro \c "__DELAY_BACKWARD_COMPATIBLE__"
 158:/usr/avr/include/util/delay.h ****    must be defined before including this header file. Also, the
 159:/usr/avr/include/util/delay.h ****    backward compatible algorithm will be chosen if the code is
 160:/usr/avr/include/util/delay.h ****    compiled in a <em>freestanding environment</em> (GCC option
 161:/usr/avr/include/util/delay.h ****    \c -ffreestanding), as the math functions required for rounding are
 162:/usr/avr/include/util/delay.h ****    not available to the compiler then.
 163:/usr/avr/include/util/delay.h **** 
 164:/usr/avr/include/util/delay.h ****  */
 165:/usr/avr/include/util/delay.h **** void
 166:/usr/avr/include/util/delay.h **** _delay_ms(double __ms)
 167:/usr/avr/include/util/delay.h **** {
 168:/usr/avr/include/util/delay.h **** 	double __tmp ;
 169:/usr/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 170:/usr/avr/include/util/delay.h ****   !defined(__DELAY_BACKWARD_COMPATIBLE__) &&	   \
 171:/usr/avr/include/util/delay.h ****   __STDC_HOSTED__
 172:/usr/avr/include/util/delay.h **** 	uint32_t __ticks_dc;
 173:/usr/avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
 174:/usr/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e3) * __ms;
 175:/usr/avr/include/util/delay.h **** 
 176:/usr/avr/include/util/delay.h **** 	#if defined(__DELAY_ROUND_DOWN__)
 177:/usr/avr/include/util/delay.h **** 		__ticks_dc = (uint32_t)fabs(__tmp);
 178:/usr/avr/include/util/delay.h **** 
 179:/usr/avr/include/util/delay.h **** 	#elif defined(__DELAY_ROUND_CLOSEST__)
 180:/usr/avr/include/util/delay.h **** 		__ticks_dc = (uint32_t)(fabs(__tmp)+0.5);
 181:/usr/avr/include/util/delay.h **** 
 182:/usr/avr/include/util/delay.h **** 	#else
 183:/usr/avr/include/util/delay.h **** 		//round up by default
 184:/usr/avr/include/util/delay.h **** 		__ticks_dc = (uint32_t)(ceil(fabs(__tmp)));
 185:/usr/avr/include/util/delay.h **** 	#endif
 186:/usr/avr/include/util/delay.h **** 
 187:/usr/avr/include/util/delay.h **** 	__builtin_avr_delay_cycles(__ticks_dc);
 188:/usr/avr/include/util/delay.h **** 
 189:/usr/avr/include/util/delay.h **** #else
 190:/usr/avr/include/util/delay.h **** 	uint16_t __ticks;
 191:/usr/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 4e3) * __ms;
 192:/usr/avr/include/util/delay.h **** 	if (__tmp < 1.0)
 193:/usr/avr/include/util/delay.h **** 		__ticks = 1;
 194:/usr/avr/include/util/delay.h **** 	else if (__tmp > 65535)
 195:/usr/avr/include/util/delay.h **** 	{
 196:/usr/avr/include/util/delay.h **** 		//	__ticks = requested delay in 1/10 ms
 197:/usr/avr/include/util/delay.h **** 		__ticks = (uint16_t) (__ms * 10.0);
 198:/usr/avr/include/util/delay.h **** 		while(__ticks)
 199:/usr/avr/include/util/delay.h **** 		{
 200:/usr/avr/include/util/delay.h **** 			// wait 1/10 ms
 201:/usr/avr/include/util/delay.h **** 			_delay_loop_2(((F_CPU) / 4e3) / 10);
 202:/usr/avr/include/util/delay.h **** 			__ticks --;
 203:/usr/avr/include/util/delay.h **** 		}
 204:/usr/avr/include/util/delay.h **** 		return;
 205:/usr/avr/include/util/delay.h **** 	}
 206:/usr/avr/include/util/delay.h **** 	else
 207:/usr/avr/include/util/delay.h **** 		__ticks = (uint16_t)__tmp;
 208:/usr/avr/include/util/delay.h **** 	_delay_loop_2(__ticks);
 209:/usr/avr/include/util/delay.h **** #endif
 210:/usr/avr/include/util/delay.h **** }
 211:/usr/avr/include/util/delay.h **** 
 212:/usr/avr/include/util/delay.h **** /**
 213:/usr/avr/include/util/delay.h ****    \ingroup util_delay
 214:/usr/avr/include/util/delay.h **** 
 215:/usr/avr/include/util/delay.h ****    Perform a delay of \c __us microseconds, using _delay_loop_1().
 216:/usr/avr/include/util/delay.h **** 
 217:/usr/avr/include/util/delay.h ****    The macro F_CPU is supposed to be defined to a
 218:/usr/avr/include/util/delay.h ****    constant defining the CPU clock frequency (in Hertz).
 219:/usr/avr/include/util/delay.h **** 
 220:/usr/avr/include/util/delay.h ****    The maximal possible delay is 768 us / F_CPU in MHz.
 221:/usr/avr/include/util/delay.h **** 
 222:/usr/avr/include/util/delay.h ****    If the user requests a delay greater than the maximal possible one,
 223:/usr/avr/include/util/delay.h ****    _delay_us() will automatically call _delay_ms() instead.  The user
 224:/usr/avr/include/util/delay.h ****    will not be informed about this case.
 225:/usr/avr/include/util/delay.h **** 
 226:/usr/avr/include/util/delay.h ****    If the avr-gcc toolchain has __builtin_avr_delay_cycles()
 227:/usr/avr/include/util/delay.h ****    support, maximal possible delay is 4294967.295 us/ F_CPU in MHz. For
 228:/usr/avr/include/util/delay.h ****    values greater than the maximal possible delay, overflow results in
 229:/usr/avr/include/util/delay.h ****    no delay i.e., 0us.
 230:/usr/avr/include/util/delay.h **** 
 231:/usr/avr/include/util/delay.h ****    Conversion of \c __us into clock cycles may not always result in
 232:/usr/avr/include/util/delay.h ****    integer.  By default, the clock cycles rounded up to next
 233:/usr/avr/include/util/delay.h ****    integer. This ensures that the user gets at least \c __us
 234:/usr/avr/include/util/delay.h ****    microseconds of delay.
 235:/usr/avr/include/util/delay.h **** 
 236:/usr/avr/include/util/delay.h ****    Alternatively, by defining the macro \c __DELAY_ROUND_DOWN__, or
 237:/usr/avr/include/util/delay.h ****    \c __DELAY_ROUND_CLOSEST__, before including this header file, the
 238:/usr/avr/include/util/delay.h ****    algorithm can be made to round down, or round to closest integer,
 239:/usr/avr/include/util/delay.h ****    respectively.
 240:/usr/avr/include/util/delay.h **** 
 241:/usr/avr/include/util/delay.h ****    \note
 242:/usr/avr/include/util/delay.h **** 
 243:/usr/avr/include/util/delay.h ****    The implementation of _delay_ms() based on
 244:/usr/avr/include/util/delay.h ****    __builtin_avr_delay_cycles() is not backward compatible with older
 245:/usr/avr/include/util/delay.h ****    implementations.  In order to get functionality backward compatible
 246:/usr/avr/include/util/delay.h ****    with previous versions, the macro \c __DELAY_BACKWARD_COMPATIBLE__
 247:/usr/avr/include/util/delay.h ****    must be defined before including this header file. Also, the
 248:/usr/avr/include/util/delay.h ****    backward compatible algorithm will be chosen if the code is
 249:/usr/avr/include/util/delay.h ****    compiled in a <em>freestanding environment</em> (GCC option
 250:/usr/avr/include/util/delay.h ****    \c -ffreestanding), as the math functions required for rounding are
 251:/usr/avr/include/util/delay.h ****    not available to the compiler then.
 252:/usr/avr/include/util/delay.h **** 
 253:/usr/avr/include/util/delay.h ****  */
 254:/usr/avr/include/util/delay.h **** void
 255:/usr/avr/include/util/delay.h **** _delay_us(double __us)
 100               		.loc 2 255 1 view .LVU24
 101               	.LBB150:
 256:/usr/avr/include/util/delay.h **** {
 257:/usr/avr/include/util/delay.h **** 	double __tmp ;
 102               		.loc 2 257 2 view .LVU25
 258:/usr/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 259:/usr/avr/include/util/delay.h ****   !defined(__DELAY_BACKWARD_COMPATIBLE__) &&	   \
 260:/usr/avr/include/util/delay.h ****   __STDC_HOSTED__
 261:/usr/avr/include/util/delay.h **** 	uint32_t __ticks_dc;
 103               		.loc 2 261 2 view .LVU26
 262:/usr/avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
 104               		.loc 2 262 2 view .LVU27
 263:/usr/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e6) * __us;
 105               		.loc 2 263 2 view .LVU28
 264:/usr/avr/include/util/delay.h **** 
 265:/usr/avr/include/util/delay.h **** 	#if defined(__DELAY_ROUND_DOWN__)
 266:/usr/avr/include/util/delay.h **** 		__ticks_dc = (uint32_t)fabs(__tmp);
 267:/usr/avr/include/util/delay.h **** 
 268:/usr/avr/include/util/delay.h **** 	#elif defined(__DELAY_ROUND_CLOSEST__)
 269:/usr/avr/include/util/delay.h **** 		__ticks_dc = (uint32_t)(fabs(__tmp)+0.5);
 270:/usr/avr/include/util/delay.h **** 
 271:/usr/avr/include/util/delay.h **** 	#else
 272:/usr/avr/include/util/delay.h **** 		//round up by default
 273:/usr/avr/include/util/delay.h **** 		__ticks_dc = (uint32_t)(ceil(fabs(__tmp)));
 106               		.loc 2 273 3 view .LVU29
 274:/usr/avr/include/util/delay.h **** 	#endif
 275:/usr/avr/include/util/delay.h **** 
 276:/usr/avr/include/util/delay.h **** 	__builtin_avr_delay_cycles(__ticks_dc);
 107               		.loc 2 276 2 view .LVU30
 108 0002 80E2      		ldi r24,lo8(32)
 109 0004 8A95      	1:	dec r24
 110 0006 01F4      		brne 1b
 111               	.LVL6:
 112               		.loc 2 276 2 is_stmt 0 view .LVU31
 113               	.LBE150:
 114               	.LBE149:
 115               	.LBE151:
 284:platforms/avr/drivers/serial.c ****     serial_high();
 116               		.loc 1 284 5 is_stmt 1 view .LVU32
 117               	.LBB152:
 118               	.LBI152:
 253:platforms/avr/drivers/serial.c **** 
 119               		.loc 1 253 20 view .LVU33
 120               	.LBB153:
 253:platforms/avr/drivers/serial.c **** 
 121               		.loc 1 253 40 view .LVU34
 122 0008 5A9A      		sbi 0xb,2
 123               	/* epilogue start */
 124               	.LBE153:
 125               	.LBE152:
 285:platforms/avr/drivers/serial.c **** }
 126               		.loc 1 285 1 is_stmt 0 view .LVU35
 127 000a 0895      		ret
 128               		.cfi_endproc
 129               	.LFE37:
 131               		.section	.text.serial_read_chunk.constprop.0,"ax",@progbits
 133               	serial_read_chunk.constprop.0:
 134               	.LVL7:
 135               	.LFB48:
 286:platforms/avr/drivers/serial.c **** 
 287:platforms/avr/drivers/serial.c **** // Reads a byte from the serial line
 288:platforms/avr/drivers/serial.c **** static uint8_t serial_read_chunk(uint8_t *pterrcount, uint8_t bit) NO_INLINE;
 289:platforms/avr/drivers/serial.c **** static uint8_t serial_read_chunk(uint8_t *pterrcount, uint8_t bit) {
 136               		.loc 1 289 16 is_stmt 1 view -0
 137               		.cfi_startproc
 138               	/* prologue: function */
 139               	/* frame size = 0 */
 140               	/* stack size = 0 */
 141               	.L__stack_usage = 0
 142               		.loc 1 289 16 is_stmt 0 view .LVU37
 143 0000 FC01      		movw r30,r24
 144               	.LVL8:
 290:platforms/avr/drivers/serial.c ****     uint8_t byte, i, p, pb;
 145               		.loc 1 290 5 is_stmt 1 view .LVU38
 291:platforms/avr/drivers/serial.c **** 
 292:platforms/avr/drivers/serial.c ****     _delay_sub_us(READ_WRITE_START_ADJUST);
 146               		.loc 1 292 5 view .LVU39
 147 0002 3BE0      		ldi r19,lo8(11)
 148 0004 3A95      	1:	dec r19
 149 0006 01F4      		brne 1b
 293:platforms/avr/drivers/serial.c ****     for (i = 0, byte = 0, p = PARITY; i < bit; i++) {
 150               		.loc 1 293 5 view .LVU40
 151               	.LVL9:
 292:platforms/avr/drivers/serial.c ****     for (i = 0, byte = 0, p = PARITY; i < bit; i++) {
 152               		.loc 1 292 5 is_stmt 0 view .LVU41
 153 0008 98E0      		ldi r25,lo8(8)
 154               		.loc 1 293 29 view .LVU42
 155 000a 20E0      		ldi r18,0
 156               		.loc 1 293 22 view .LVU43
 157 000c 80E0      		ldi r24,0
 158               	.LVL10:
 294:platforms/avr/drivers/serial.c ****         serial_delay_half1();  // read the middle of pulses
 295:platforms/avr/drivers/serial.c ****         if (serial_read_pin()) {
 296:platforms/avr/drivers/serial.c ****             byte = (byte << 1) | 1;
 297:platforms/avr/drivers/serial.c ****             p ^= 1;
 159               		.loc 1 297 15 view .LVU44
 160 000e 31E0      		ldi r19,lo8(1)
 161               	.LVL11:
 162               	.L14:
 294:platforms/avr/drivers/serial.c ****         serial_delay_half1();  // read the middle of pulses
 163               		.loc 1 294 9 is_stmt 1 view .LVU45
 164               	.LBB154:
 165               	.LBI154:
 234:platforms/avr/drivers/serial.c **** 
 166               		.loc 1 234 20 view .LVU46
 167               	.LBE154:
 234:platforms/avr/drivers/serial.c **** 
 168               		.loc 1 234 47 view .LVU47
 169               	.LBB157:
 170               	.LBB155:
 171               	.LBI155:
 255:/usr/avr/include/util/delay.h **** {
 172               		.loc 2 255 1 view .LVU48
 173               	.LBB156:
 257:/usr/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 174               		.loc 2 257 2 view .LVU49
 261:/usr/avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
 175               		.loc 2 261 2 view .LVU50
 262:/usr/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e6) * __us;
 176               		.loc 2 262 2 view .LVU51
 263:/usr/avr/include/util/delay.h **** 
 177               		.loc 2 263 2 view .LVU52
 273:/usr/avr/include/util/delay.h **** 	#endif
 178               		.loc 2 273 3 view .LVU53
 179               		.loc 2 276 2 view .LVU54
 180 0010 40E1      		ldi r20,lo8(16)
 181 0012 4A95      	1:	dec r20
 182 0014 01F4      		brne 1b
 183               	.LVL12:
 184               		.loc 2 276 2 is_stmt 0 view .LVU55
 185               	.LBE156:
 186               	.LBE155:
 187               	.LBE157:
 295:platforms/avr/drivers/serial.c ****             byte = (byte << 1) | 1;
 188               		.loc 1 295 9 is_stmt 1 view .LVU56
 189               	.LBB158:
 190               	.LBI158:
 247:platforms/avr/drivers/serial.c **** 
 191               		.loc 1 247 23 view .LVU57
 192               	.LBB159:
 247:platforms/avr/drivers/serial.c **** 
 193               		.loc 1 247 47 view .LVU58
 194               	.LBE159:
 195               	.LBE158:
 296:platforms/avr/drivers/serial.c ****             p ^= 1;
 196               		.loc 1 296 26 is_stmt 0 view .LVU59
 197 0016 880F      		lsl r24
 198               	.LVL13:
 295:platforms/avr/drivers/serial.c ****             byte = (byte << 1) | 1;
 199               		.loc 1 295 12 view .LVU60
 200 0018 4A9B      		sbis 0x9,2
 201 001a 00C0      		rjmp .L13
 296:platforms/avr/drivers/serial.c ****             p ^= 1;
 202               		.loc 1 296 13 is_stmt 1 view .LVU61
 296:platforms/avr/drivers/serial.c ****             p ^= 1;
 203               		.loc 1 296 32 is_stmt 0 view .LVU62
 204 001c 8160      		ori r24,lo8(1)
 205               	.LVL14:
 206               		.loc 1 297 13 is_stmt 1 view .LVU63
 207               		.loc 1 297 15 is_stmt 0 view .LVU64
 208 001e 2327      		eor r18,r19
 209               	.LVL15:
 210               	.L13:
 298:platforms/avr/drivers/serial.c ****         } else {
 299:platforms/avr/drivers/serial.c ****             byte = (byte << 1) | 0;
 300:platforms/avr/drivers/serial.c ****             p ^= 0;
 301:platforms/avr/drivers/serial.c ****         }
 302:platforms/avr/drivers/serial.c ****         _delay_sub_us(READ_WRITE_WIDTH_ADJUST);
 211               		.loc 1 302 9 is_stmt 1 view .LVU65
 212 0020 42E0      		ldi r20,lo8(2)
 213 0022 4A95      	1:	dec r20
 214 0024 01F4      		brne 1b
 215 0026 0000      		nop
 303:platforms/avr/drivers/serial.c ****         serial_delay_half2();
 216               		.loc 1 303 9 view .LVU66
 217               	.LBB160:
 218               	.LBI160:
 237:platforms/avr/drivers/serial.c **** 
 219               		.loc 1 237 20 view .LVU67
 220               	.LBE160:
 237:platforms/avr/drivers/serial.c **** 
 221               		.loc 1 237 47 view .LVU68
 222               	.LVL16:
 223               	.LBB163:
 224               	.LBB161:
 225               	.LBI161:
 255:/usr/avr/include/util/delay.h **** {
 226               		.loc 2 255 1 view .LVU69
 227               	.LBB162:
 257:/usr/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 228               		.loc 2 257 2 view .LVU70
 261:/usr/avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
 229               		.loc 2 261 2 view .LVU71
 262:/usr/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e6) * __us;
 230               		.loc 2 262 2 view .LVU72
 263:/usr/avr/include/util/delay.h **** 
 231               		.loc 2 263 2 view .LVU73
 273:/usr/avr/include/util/delay.h **** 	#endif
 232               		.loc 2 273 3 view .LVU74
 233               		.loc 2 276 2 view .LVU75
 234 0028 40E1      		ldi r20,lo8(16)
 235 002a 4A95      	1:	dec r20
 236 002c 01F4      		brne 1b
 237               	.LVL17:
 238               		.loc 2 276 2 is_stmt 0 view .LVU76
 239 002e 9150      		subi r25,lo8(-(-1))
 240               	.LVL18:
 241               		.loc 2 276 2 view .LVU77
 242               	.LBE162:
 243               	.LBE161:
 244               	.LBE163:
 293:platforms/avr/drivers/serial.c ****         serial_delay_half1();  // read the middle of pulses
 245               		.loc 1 293 5 view .LVU78
 246 0030 01F4      		brne .L14
 304:platforms/avr/drivers/serial.c ****     }
 305:platforms/avr/drivers/serial.c ****     /* recive parity bit */
 306:platforms/avr/drivers/serial.c ****     serial_delay_half1();  // read the middle of pulses
 247               		.loc 1 306 5 is_stmt 1 view .LVU79
 248               	.LBB164:
 249               	.LBI164:
 234:platforms/avr/drivers/serial.c **** 
 250               		.loc 1 234 20 view .LVU80
 251               	.LBE164:
 234:platforms/avr/drivers/serial.c **** 
 252               		.loc 1 234 47 view .LVU81
 253               	.LVL19:
 254               	.LBB167:
 255               	.LBB165:
 256               	.LBI165:
 255:/usr/avr/include/util/delay.h **** {
 257               		.loc 2 255 1 view .LVU82
 258               	.LBB166:
 257:/usr/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 259               		.loc 2 257 2 view .LVU83
 261:/usr/avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
 260               		.loc 2 261 2 view .LVU84
 262:/usr/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e6) * __us;
 261               		.loc 2 262 2 view .LVU85
 263:/usr/avr/include/util/delay.h **** 
 262               		.loc 2 263 2 view .LVU86
 273:/usr/avr/include/util/delay.h **** 	#endif
 263               		.loc 2 273 3 view .LVU87
 264               		.loc 2 276 2 view .LVU88
 265 0032 90E1      		ldi r25,lo8(16)
 266 0034 9A95      	1:	dec r25
 267 0036 01F4      		brne 1b
 268               	.LVL20:
 269               		.loc 2 276 2 is_stmt 0 view .LVU89
 270               	.LBE166:
 271               	.LBE165:
 272               	.LBE167:
 307:platforms/avr/drivers/serial.c ****     pb = serial_read_pin();
 273               		.loc 1 307 5 is_stmt 1 view .LVU90
 274               	.LBB168:
 275               	.LBI168:
 247:platforms/avr/drivers/serial.c **** 
 276               		.loc 1 247 23 view .LVU91
 277               	.LBB169:
 247:platforms/avr/drivers/serial.c **** 
 278               		.loc 1 247 47 view .LVU92
 247:platforms/avr/drivers/serial.c **** 
 279               		.loc 1 247 56 is_stmt 0 view .LVU93
 280 0038 99B1      		in r25,0x9
 281               	.LVL21:
 247:platforms/avr/drivers/serial.c **** 
 282               		.loc 1 247 56 view .LVU94
 283               	.LBE169:
 284               	.LBE168:
 308:platforms/avr/drivers/serial.c ****     _delay_sub_us(READ_WRITE_WIDTH_ADJUST);
 285               		.loc 1 308 5 is_stmt 1 view .LVU95
 286 003a 32E0      		ldi r19,lo8(2)
 287 003c 3A95      	1:	dec r19
 288 003e 01F4      		brne 1b
 289 0040 0000      		nop
 309:platforms/avr/drivers/serial.c ****     serial_delay_half2();
 290               		.loc 1 309 5 view .LVU96
 291               	.LBB171:
 292               	.LBI171:
 237:platforms/avr/drivers/serial.c **** 
 293               		.loc 1 237 20 view .LVU97
 294               	.LBE171:
 237:platforms/avr/drivers/serial.c **** 
 295               		.loc 1 237 47 view .LVU98
 296               	.LVL22:
 297               	.LBB174:
 298               	.LBB172:
 299               	.LBI172:
 255:/usr/avr/include/util/delay.h **** {
 300               		.loc 2 255 1 view .LVU99
 301               	.LBB173:
 257:/usr/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 302               		.loc 2 257 2 view .LVU100
 261:/usr/avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
 303               		.loc 2 261 2 view .LVU101
 262:/usr/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e6) * __us;
 304               		.loc 2 262 2 view .LVU102
 263:/usr/avr/include/util/delay.h **** 
 305               		.loc 2 263 2 view .LVU103
 273:/usr/avr/include/util/delay.h **** 	#endif
 306               		.loc 2 273 3 view .LVU104
 307               		.loc 2 276 2 view .LVU105
 308 0042 40E1      		ldi r20,lo8(16)
 309 0044 4A95      	1:	dec r20
 310 0046 01F4      		brne 1b
 311               	.LVL23:
 312               		.loc 2 276 2 is_stmt 0 view .LVU106
 313               	.LBE173:
 314               	.LBE172:
 315               	.LBE174:
 310:platforms/avr/drivers/serial.c **** 
 311:platforms/avr/drivers/serial.c ****     *pterrcount += (p != pb) ? 1 : 0;
 316               		.loc 1 311 5 is_stmt 1 view .LVU107
 317               	.LBB175:
 318               	.LBB170:
 247:platforms/avr/drivers/serial.c **** 
 319               		.loc 1 247 54 is_stmt 0 view .LVU108
 320 0048 92FB      		bst r25,2
 321 004a 9927      		clr r25
 322 004c 90F9      		bld r25,0
 323               	.LVL24:
 247:platforms/avr/drivers/serial.c **** 
 324               		.loc 1 247 54 view .LVU109
 325               	.LBE170:
 326               	.LBE175:
 327               		.loc 1 311 17 view .LVU110
 328 004e 9227      		eor r25,r18
 329 0050 2081      		ld r18,Z
 330               	.LVL25:
 331               		.loc 1 311 17 view .LVU111
 332 0052 920F      		add r25,r18
 333 0054 9083      		st Z,r25
 312:platforms/avr/drivers/serial.c **** 
 313:platforms/avr/drivers/serial.c ****     return byte;
 334               		.loc 1 313 5 is_stmt 1 view .LVU112
 335               	/* epilogue start */
 314:platforms/avr/drivers/serial.c **** }
 336               		.loc 1 314 1 is_stmt 0 view .LVU113
 337 0056 0895      		ret
 338               		.cfi_endproc
 339               	.LFE48:
 341               		.section	.text.serial_recive_packet,"ax",@progbits
 343               	serial_recive_packet:
 344               	.LVL26:
 345               	.LFB41:
 315:platforms/avr/drivers/serial.c **** 
 316:platforms/avr/drivers/serial.c **** // Sends a byte with MSB ordering
 317:platforms/avr/drivers/serial.c **** void serial_write_chunk(uint8_t data, uint8_t bit) NO_INLINE;
 318:platforms/avr/drivers/serial.c **** void serial_write_chunk(uint8_t data, uint8_t bit) {
 319:platforms/avr/drivers/serial.c ****     uint8_t b, p;
 320:platforms/avr/drivers/serial.c ****     for (p = PARITY, b = 1 << (bit - 1); b; b >>= 1) {
 321:platforms/avr/drivers/serial.c ****         if (data & b) {
 322:platforms/avr/drivers/serial.c ****             serial_high();
 323:platforms/avr/drivers/serial.c ****             p ^= 1;
 324:platforms/avr/drivers/serial.c ****         } else {
 325:platforms/avr/drivers/serial.c ****             serial_low();
 326:platforms/avr/drivers/serial.c ****             p ^= 0;
 327:platforms/avr/drivers/serial.c ****         }
 328:platforms/avr/drivers/serial.c ****         serial_delay();
 329:platforms/avr/drivers/serial.c ****     }
 330:platforms/avr/drivers/serial.c ****     /* send parity bit */
 331:platforms/avr/drivers/serial.c ****     if (p & 1) {
 332:platforms/avr/drivers/serial.c ****         serial_high();
 333:platforms/avr/drivers/serial.c ****     } else {
 334:platforms/avr/drivers/serial.c ****         serial_low();
 335:platforms/avr/drivers/serial.c ****     }
 336:platforms/avr/drivers/serial.c ****     serial_delay();
 337:platforms/avr/drivers/serial.c **** 
 338:platforms/avr/drivers/serial.c ****     serial_low();  // sync_send() / senc_recv() need raise edge
 339:platforms/avr/drivers/serial.c **** }
 340:platforms/avr/drivers/serial.c **** 
 341:platforms/avr/drivers/serial.c **** static void serial_send_packet(uint8_t *buffer, uint8_t size) NO_INLINE;
 342:platforms/avr/drivers/serial.c **** static void serial_send_packet(uint8_t *buffer, uint8_t size) {
 343:platforms/avr/drivers/serial.c ****     for (uint8_t i = 0; i < size; ++i) {
 344:platforms/avr/drivers/serial.c ****         uint8_t data;
 345:platforms/avr/drivers/serial.c ****         data = buffer[i];
 346:platforms/avr/drivers/serial.c ****         sync_send();
 347:platforms/avr/drivers/serial.c ****         serial_write_chunk(data, 8);
 348:platforms/avr/drivers/serial.c ****     }
 349:platforms/avr/drivers/serial.c **** }
 350:platforms/avr/drivers/serial.c **** 
 351:platforms/avr/drivers/serial.c **** static uint8_t serial_recive_packet(uint8_t *buffer, uint8_t size) NO_INLINE;
 352:platforms/avr/drivers/serial.c **** static uint8_t serial_recive_packet(uint8_t *buffer, uint8_t size) {
 346               		.loc 1 352 68 is_stmt 1 view -0
 347               		.cfi_startproc
 348               		.loc 1 352 68 is_stmt 0 view .LVU115
 349 0000 EF92      		push r14
 350               	.LCFI0:
 351               		.cfi_def_cfa_offset 3
 352               		.cfi_offset 14, -2
 353 0002 FF92      		push r15
 354               	.LCFI1:
 355               		.cfi_def_cfa_offset 4
 356               		.cfi_offset 15, -3
 357 0004 0F93      		push r16
 358               	.LCFI2:
 359               		.cfi_def_cfa_offset 5
 360               		.cfi_offset 16, -4
 361 0006 1F93      		push r17
 362               	.LCFI3:
 363               		.cfi_def_cfa_offset 6
 364               		.cfi_offset 17, -5
 365 0008 CF93      		push r28
 366               	.LCFI4:
 367               		.cfi_def_cfa_offset 7
 368               		.cfi_offset 28, -6
 369 000a DF93      		push r29
 370               	.LCFI5:
 371               		.cfi_def_cfa_offset 8
 372               		.cfi_offset 29, -7
 373 000c 0F92      		push __tmp_reg__
 374               	.LCFI6:
 375               		.cfi_def_cfa_offset 9
 376 000e CDB7      		in r28,__SP_L__
 377 0010 DEB7      		in r29,__SP_H__
 378               	.LCFI7:
 379               		.cfi_def_cfa_register 28
 380               	/* prologue: function */
 381               	/* frame size = 1 */
 382               	/* stack size = 7 */
 383               	.L__stack_usage = 7
 353:platforms/avr/drivers/serial.c ****     uint8_t pecount = 0;
 384               		.loc 1 353 5 is_stmt 1 view .LVU116
 385               		.loc 1 353 13 is_stmt 0 view .LVU117
 386 0012 1982      		std Y+1,__zero_reg__
 354:platforms/avr/drivers/serial.c ****     for (uint8_t i = 0; i < size; ++i) {
 387               		.loc 1 354 5 is_stmt 1 view .LVU118
 388               	.LBB176:
 389               		.loc 1 354 10 view .LVU119
 390               	.LVL27:
 391               		.loc 1 354 10 is_stmt 0 view .LVU120
 392 0014 8C01      		movw r16,r24
 393 0016 7C01      		movw r14,r24
 394 0018 E60E      		add r14,r22
 395 001a F11C      		adc r15,__zero_reg__
 396               	.LVL28:
 397               	.L17:
 398               		.loc 1 354 5 discriminator 1 view .LVU121
 399 001c 0E15      		cp r16,r14
 400 001e 1F05      		cpc r17,r15
 401 0020 01F4      		brne .L18
 402               	.LBE176:
 355:platforms/avr/drivers/serial.c ****         uint8_t data;
 356:platforms/avr/drivers/serial.c ****         sync_recv();
 357:platforms/avr/drivers/serial.c ****         data      = serial_read_chunk(&pecount, 8);
 358:platforms/avr/drivers/serial.c ****         buffer[i] = data;
 359:platforms/avr/drivers/serial.c ****     }
 360:platforms/avr/drivers/serial.c ****     return pecount == 0;
 403               		.loc 1 360 5 is_stmt 1 view .LVU122
 404               		.loc 1 360 20 is_stmt 0 view .LVU123
 405 0022 81E0      		ldi r24,lo8(1)
 406 0024 9981      		ldd r25,Y+1
 407 0026 9111      		cpse r25,__zero_reg__
 408 0028 80E0      		ldi r24,0
 409               	.L16:
 410               	/* epilogue start */
 361:platforms/avr/drivers/serial.c **** }
 411               		.loc 1 361 1 view .LVU124
 412 002a 0F90      		pop __tmp_reg__
 413 002c DF91      		pop r29
 414 002e CF91      		pop r28
 415 0030 1F91      		pop r17
 416 0032 0F91      		pop r16
 417               	.LVL29:
 418               		.loc 1 361 1 view .LVU125
 419 0034 FF90      		pop r15
 420 0036 EF90      		pop r14
 421 0038 0895      		ret
 422               	.LVL30:
 423               	.L18:
 424               	.LBB178:
 425               	.LBB177:
 355:platforms/avr/drivers/serial.c ****         uint8_t data;
 426               		.loc 1 355 9 is_stmt 1 discriminator 3 view .LVU126
 356:platforms/avr/drivers/serial.c ****         data      = serial_read_chunk(&pecount, 8);
 427               		.loc 1 356 9 discriminator 3 view .LVU127
 428 003a 0E94 0000 		call sync_recv
 429               	.LVL31:
 357:platforms/avr/drivers/serial.c ****         buffer[i] = data;
 430               		.loc 1 357 9 discriminator 3 view .LVU128
 357:platforms/avr/drivers/serial.c ****         buffer[i] = data;
 431               		.loc 1 357 21 is_stmt 0 discriminator 3 view .LVU129
 432 003e CE01      		movw r24,r28
 433 0040 0196      		adiw r24,1
 434 0042 0E94 0000 		call serial_read_chunk.constprop.0
 435               	.LVL32:
 358:platforms/avr/drivers/serial.c ****     }
 436               		.loc 1 358 9 is_stmt 1 discriminator 3 view .LVU130
 358:platforms/avr/drivers/serial.c ****     }
 437               		.loc 1 358 19 is_stmt 0 discriminator 3 view .LVU131
 438 0046 F801      		movw r30,r16
 439 0048 8193      		st Z+,r24
 440 004a 8F01      		movw r16,r30
 441               	.LVL33:
 358:platforms/avr/drivers/serial.c ****     }
 442               		.loc 1 358 19 discriminator 3 view .LVU132
 443 004c 00C0      		rjmp .L17
 444               	.LBE177:
 445               	.LBE178:
 446               		.cfi_endproc
 447               	.LFE41:
 449               		.section	.text.soft_serial_initiator_init,"ax",@progbits
 450               	.global	soft_serial_initiator_init
 452               	soft_serial_initiator_init:
 453               	.LFB34:
 255:platforms/avr/drivers/serial.c ****     serial_output();
 454               		.loc 1 255 39 is_stmt 1 view -0
 455               		.cfi_startproc
 456               	/* prologue: function */
 457               	/* frame size = 0 */
 458               	/* stack size = 0 */
 459               	.L__stack_usage = 0
 256:platforms/avr/drivers/serial.c ****     serial_high();
 460               		.loc 1 256 5 view .LVU134
 461               	.LBB179:
 462               	.LBI179:
 240:platforms/avr/drivers/serial.c **** 
 463               		.loc 1 240 20 view .LVU135
 464               	.LBB180:
 240:platforms/avr/drivers/serial.c **** 
 465               		.loc 1 240 42 view .LVU136
 466 0000 529A      		sbi 0xa,2
 467               	.LBE180:
 468               	.LBE179:
 257:platforms/avr/drivers/serial.c **** }
 469               		.loc 1 257 5 view .LVU137
 470               	.LBB181:
 471               	.LBI181:
 253:platforms/avr/drivers/serial.c **** 
 472               		.loc 1 253 20 view .LVU138
 473               	.LBB182:
 253:platforms/avr/drivers/serial.c **** 
 474               		.loc 1 253 40 view .LVU139
 475 0002 5A9A      		sbi 0xb,2
 476               	/* epilogue start */
 477               	.LBE182:
 478               	.LBE181:
 258:platforms/avr/drivers/serial.c **** 
 479               		.loc 1 258 1 is_stmt 0 view .LVU140
 480 0004 0895      		ret
 481               		.cfi_endproc
 482               	.LFE34:
 484               		.section	.text.soft_serial_target_init,"ax",@progbits
 485               	.global	soft_serial_target_init
 487               	soft_serial_target_init:
 488               	.LFB35:
 260:platforms/avr/drivers/serial.c ****     serial_input_with_pullup();
 489               		.loc 1 260 36 is_stmt 1 view -0
 490               		.cfi_startproc
 491               	/* prologue: function */
 492               	/* frame size = 0 */
 493               	/* stack size = 0 */
 494               	.L__stack_usage = 0
 261:platforms/avr/drivers/serial.c **** 
 495               		.loc 1 261 5 view .LVU142
 496               	.LBB183:
 497               	.LBI183:
 244:platforms/avr/drivers/serial.c **** 
 498               		.loc 1 244 20 view .LVU143
 499               	.LBB184:
 244:platforms/avr/drivers/serial.c **** 
 500               		.loc 1 244 53 view .LVU144
 501 0000 5298      		cbi 0xa,2
 502 0002 5A9A      		sbi 0xb,2
 503               	.LBE184:
 504               	.LBE183:
 264:platforms/avr/drivers/serial.c ****     EICRx &= EICRx_BIT;
 505               		.loc 1 264 5 view .LVU145
 264:platforms/avr/drivers/serial.c ****     EICRx &= EICRx_BIT;
 506               		.loc 1 264 11 is_stmt 0 view .LVU146
 507 0004 EA9A      		sbi 0x1d,2
 265:platforms/avr/drivers/serial.c **** }
 508               		.loc 1 265 5 is_stmt 1 view .LVU147
 265:platforms/avr/drivers/serial.c **** }
 509               		.loc 1 265 11 is_stmt 0 view .LVU148
 510 0006 E9E6      		ldi r30,lo8(105)
 511 0008 F0E0      		ldi r31,0
 512 000a 8081      		ld r24,Z
 513 000c 8F7C      		andi r24,lo8(-49)
 514 000e 8083      		st Z,r24
 515               	/* epilogue start */
 266:platforms/avr/drivers/serial.c **** 
 516               		.loc 1 266 1 view .LVU149
 517 0010 0895      		ret
 518               		.cfi_endproc
 519               	.LFE35:
 521               		.section	.text.serial_write_chunk,"ax",@progbits
 522               	.global	serial_write_chunk
 524               	serial_write_chunk:
 525               	.LVL34:
 526               	.LFB39:
 318:platforms/avr/drivers/serial.c ****     uint8_t b, p;
 527               		.loc 1 318 52 is_stmt 1 view -0
 528               		.cfi_startproc
 529               	/* prologue: function */
 530               	/* frame size = 0 */
 531               	/* stack size = 0 */
 532               	.L__stack_usage = 0
 319:platforms/avr/drivers/serial.c ****     for (p = PARITY, b = 1 << (bit - 1); b; b >>= 1) {
 533               		.loc 1 319 5 view .LVU151
 320:platforms/avr/drivers/serial.c ****         if (data & b) {
 534               		.loc 1 320 5 view .LVU152
 320:platforms/avr/drivers/serial.c ****         if (data & b) {
 535               		.loc 1 320 36 is_stmt 0 view .LVU153
 536 0000 6150      		subi r22,1
 537 0002 770B      		sbc r23,r23
 538               	.LVL35:
 320:platforms/avr/drivers/serial.c ****         if (data & b) {
 539               		.loc 1 320 24 view .LVU154
 540 0004 91E0      		ldi r25,lo8(1)
 541 0006 00C0      		rjmp 2f
 542               		1:
 543 0008 990F      		lsl r25
 544               		2:
 545 000a 6A95      		dec r22
 546 000c 02F4      		brpl 1b
 547               	.LVL36:
 320:platforms/avr/drivers/serial.c ****         if (data & b) {
 548               		.loc 1 320 12 view .LVU155
 549 000e 20E0      		ldi r18,0
 323:platforms/avr/drivers/serial.c ****         } else {
 550               		.loc 1 323 15 view .LVU156
 551 0010 31E0      		ldi r19,lo8(1)
 552               	.LVL37:
 553               	.L26:
 320:platforms/avr/drivers/serial.c ****         if (data & b) {
 554               		.loc 1 320 5 discriminator 1 view .LVU157
 555 0012 9111      		cpse r25,__zero_reg__
 556 0014 00C0      		rjmp .L29
 331:platforms/avr/drivers/serial.c ****         serial_high();
 557               		.loc 1 331 5 is_stmt 1 view .LVU158
 331:platforms/avr/drivers/serial.c ****         serial_high();
 558               		.loc 1 331 8 is_stmt 0 view .LVU159
 559 0016 2223      		tst r18
 560 0018 01F0      		breq .L30
 332:platforms/avr/drivers/serial.c ****     } else {
 561               		.loc 1 332 9 is_stmt 1 view .LVU160
 562               	.LBB185:
 563               	.LBI185:
 253:platforms/avr/drivers/serial.c **** 
 564               		.loc 1 253 20 view .LVU161
 565               	.LBB186:
 253:platforms/avr/drivers/serial.c **** 
 566               		.loc 1 253 40 view .LVU162
 567 001a 5A9A      		sbi 0xb,2
 568               	.L31:
 569               	.LBE186:
 570               	.LBE185:
 336:platforms/avr/drivers/serial.c **** 
 571               		.loc 1 336 5 view .LVU163
 572               	.LBB187:
 573               	.LBI187:
 231:platforms/avr/drivers/serial.c **** 
 574               		.loc 1 231 20 view .LVU164
 575               	.LBE187:
 231:platforms/avr/drivers/serial.c **** 
 576               		.loc 1 231 41 view .LVU165
 577               	.LVL38:
 578               	.LBB190:
 579               	.LBB188:
 580               	.LBI188:
 255:/usr/avr/include/util/delay.h **** {
 581               		.loc 2 255 1 view .LVU166
 582               	.LBB189:
 257:/usr/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 583               		.loc 2 257 2 view .LVU167
 261:/usr/avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
 584               		.loc 2 261 2 view .LVU168
 262:/usr/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e6) * __us;
 585               		.loc 2 262 2 view .LVU169
 263:/usr/avr/include/util/delay.h **** 
 586               		.loc 2 263 2 view .LVU170
 273:/usr/avr/include/util/delay.h **** 	#endif
 587               		.loc 2 273 3 view .LVU171
 588               		.loc 2 276 2 view .LVU172
 589 001c 80E2      		ldi r24,lo8(32)
 590 001e 8A95      	1:	dec r24
 591 0020 01F4      		brne 1b
 592               	.LVL39:
 593               		.loc 2 276 2 is_stmt 0 view .LVU173
 594               	.LBE189:
 595               	.LBE188:
 596               	.LBE190:
 338:platforms/avr/drivers/serial.c **** }
 597               		.loc 1 338 5 is_stmt 1 view .LVU174
 598               	.LBB191:
 599               	.LBI191:
 250:platforms/avr/drivers/serial.c **** 
 600               		.loc 1 250 20 view .LVU175
 601               	.LBB192:
 250:platforms/avr/drivers/serial.c **** 
 602               		.loc 1 250 39 view .LVU176
 603 0022 5A98      		cbi 0xb,2
 604               	/* epilogue start */
 605               	.LBE192:
 606               	.LBE191:
 339:platforms/avr/drivers/serial.c **** 
 607               		.loc 1 339 1 is_stmt 0 view .LVU177
 608 0024 0895      		ret
 609               	.LVL40:
 610               	.L29:
 321:platforms/avr/drivers/serial.c ****             serial_high();
 611               		.loc 1 321 9 is_stmt 1 view .LVU178
 321:platforms/avr/drivers/serial.c ****             serial_high();
 612               		.loc 1 321 13 is_stmt 0 view .LVU179
 613 0026 492F      		mov r20,r25
 614 0028 4823      		and r20,r24
 321:platforms/avr/drivers/serial.c ****             serial_high();
 615               		.loc 1 321 12 view .LVU180
 616 002a 01F0      		breq .L27
 322:platforms/avr/drivers/serial.c ****             p ^= 1;
 617               		.loc 1 322 13 is_stmt 1 view .LVU181
 618               	.LBB193:
 619               	.LBI193:
 253:platforms/avr/drivers/serial.c **** 
 620               		.loc 1 253 20 view .LVU182
 621               	.LBB194:
 253:platforms/avr/drivers/serial.c **** 
 622               		.loc 1 253 40 view .LVU183
 623 002c 5A9A      		sbi 0xb,2
 624               	.LBE194:
 625               	.LBE193:
 323:platforms/avr/drivers/serial.c ****         } else {
 626               		.loc 1 323 13 view .LVU184
 323:platforms/avr/drivers/serial.c ****         } else {
 627               		.loc 1 323 15 is_stmt 0 view .LVU185
 628 002e 2327      		eor r18,r19
 629               	.LVL41:
 630               	.L28:
 328:platforms/avr/drivers/serial.c ****     }
 631               		.loc 1 328 9 is_stmt 1 discriminator 2 view .LVU186
 632               	.LBB195:
 633               	.LBI195:
 231:platforms/avr/drivers/serial.c **** 
 634               		.loc 1 231 20 discriminator 2 view .LVU187
 635               	.LBE195:
 231:platforms/avr/drivers/serial.c **** 
 636               		.loc 1 231 41 discriminator 2 view .LVU188
 637               	.LBB198:
 638               	.LBB196:
 639               	.LBI196:
 255:/usr/avr/include/util/delay.h **** {
 640               		.loc 2 255 1 discriminator 2 view .LVU189
 641               	.LBB197:
 257:/usr/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 642               		.loc 2 257 2 discriminator 2 view .LVU190
 261:/usr/avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
 643               		.loc 2 261 2 discriminator 2 view .LVU191
 262:/usr/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e6) * __us;
 644               		.loc 2 262 2 discriminator 2 view .LVU192
 263:/usr/avr/include/util/delay.h **** 
 645               		.loc 2 263 2 discriminator 2 view .LVU193
 273:/usr/avr/include/util/delay.h **** 	#endif
 646               		.loc 2 273 3 discriminator 2 view .LVU194
 647               		.loc 2 276 2 discriminator 2 view .LVU195
 648 0030 40E2      		ldi r20,lo8(32)
 649 0032 4A95      	1:	dec r20
 650 0034 01F4      		brne 1b
 651               	.LVL42:
 652               		.loc 2 276 2 is_stmt 0 discriminator 2 view .LVU196
 653               	.LBE197:
 654               	.LBE196:
 655               	.LBE198:
 320:platforms/avr/drivers/serial.c ****         if (data & b) {
 656               		.loc 1 320 47 discriminator 2 view .LVU197
 657 0036 9695      		lsr r25
 658               	.LVL43:
 320:platforms/avr/drivers/serial.c ****         if (data & b) {
 659               		.loc 1 320 47 discriminator 2 view .LVU198
 660 0038 00C0      		rjmp .L26
 661               	.L27:
 325:platforms/avr/drivers/serial.c ****             p ^= 0;
 662               		.loc 1 325 13 is_stmt 1 view .LVU199
 663               	.LBB199:
 664               	.LBI199:
 250:platforms/avr/drivers/serial.c **** 
 665               		.loc 1 250 20 view .LVU200
 666               	.LBB200:
 250:platforms/avr/drivers/serial.c **** 
 667               		.loc 1 250 39 view .LVU201
 668 003a 5A98      		cbi 0xb,2
 669               	.LBE200:
 670               	.LBE199:
 326:platforms/avr/drivers/serial.c ****         }
 671               		.loc 1 326 13 view .LVU202
 326:platforms/avr/drivers/serial.c ****         }
 672               		.loc 1 326 13 is_stmt 0 view .LVU203
 673 003c 00C0      		rjmp .L28
 674               	.L30:
 334:platforms/avr/drivers/serial.c ****     }
 675               		.loc 1 334 9 is_stmt 1 view .LVU204
 676               	.LBB201:
 677               	.LBI201:
 250:platforms/avr/drivers/serial.c **** 
 678               		.loc 1 250 20 view .LVU205
 679               	.LBB202:
 250:platforms/avr/drivers/serial.c **** 
 680               		.loc 1 250 39 view .LVU206
 681 003e 5A98      		cbi 0xb,2
 682 0040 00C0      		rjmp .L31
 683               	.LBE202:
 684               	.LBE201:
 685               		.cfi_endproc
 686               	.LFE39:
 688               		.section	.text.serial_send_packet,"ax",@progbits
 690               	serial_send_packet:
 691               	.LVL44:
 692               	.LFB40:
 342:platforms/avr/drivers/serial.c ****     for (uint8_t i = 0; i < size; ++i) {
 693               		.loc 1 342 63 view -0
 694               		.cfi_startproc
 342:platforms/avr/drivers/serial.c ****     for (uint8_t i = 0; i < size; ++i) {
 695               		.loc 1 342 63 is_stmt 0 view .LVU208
 696 0000 FF92      		push r15
 697               	.LCFI8:
 698               		.cfi_def_cfa_offset 3
 699               		.cfi_offset 15, -2
 700 0002 0F93      		push r16
 701               	.LCFI9:
 702               		.cfi_def_cfa_offset 4
 703               		.cfi_offset 16, -3
 704 0004 1F93      		push r17
 705               	.LCFI10:
 706               		.cfi_def_cfa_offset 5
 707               		.cfi_offset 17, -4
 708 0006 CF93      		push r28
 709               	.LCFI11:
 710               		.cfi_def_cfa_offset 6
 711               		.cfi_offset 28, -5
 712 0008 DF93      		push r29
 713               	.LCFI12:
 714               		.cfi_def_cfa_offset 7
 715               		.cfi_offset 29, -6
 716               	/* prologue: function */
 717               	/* frame size = 0 */
 718               	/* stack size = 5 */
 719               	.L__stack_usage = 5
 343:platforms/avr/drivers/serial.c ****         uint8_t data;
 720               		.loc 1 343 5 is_stmt 1 view .LVU209
 721               	.LBB203:
 343:platforms/avr/drivers/serial.c ****         uint8_t data;
 722               		.loc 1 343 10 view .LVU210
 723               	.LVL45:
 343:platforms/avr/drivers/serial.c ****         uint8_t data;
 724               		.loc 1 343 10 is_stmt 0 view .LVU211
 725 000a EC01      		movw r28,r24
 726 000c 8C01      		movw r16,r24
 727 000e 060F      		add r16,r22
 728 0010 111D      		adc r17,__zero_reg__
 729               	.LVL46:
 730               	.L33:
 343:platforms/avr/drivers/serial.c ****         uint8_t data;
 731               		.loc 1 343 5 discriminator 1 view .LVU212
 732 0012 C017      		cp r28,r16
 733 0014 D107      		cpc r29,r17
 734 0016 01F4      		brne .L34
 735               	/* epilogue start */
 736               	.LBE203:
 349:platforms/avr/drivers/serial.c **** 
 737               		.loc 1 349 1 view .LVU213
 738 0018 DF91      		pop r29
 739 001a CF91      		pop r28
 740               	.LVL47:
 349:platforms/avr/drivers/serial.c **** 
 741               		.loc 1 349 1 view .LVU214
 742 001c 1F91      		pop r17
 743 001e 0F91      		pop r16
 744 0020 FF90      		pop r15
 745 0022 0895      		ret
 746               	.LVL48:
 747               	.L34:
 748               	.LBB205:
 749               	.LBB204:
 344:platforms/avr/drivers/serial.c ****         data = buffer[i];
 750               		.loc 1 344 9 is_stmt 1 discriminator 3 view .LVU215
 345:platforms/avr/drivers/serial.c ****         sync_send();
 751               		.loc 1 345 9 discriminator 3 view .LVU216
 345:platforms/avr/drivers/serial.c ****         sync_send();
 752               		.loc 1 345 14 is_stmt 0 discriminator 3 view .LVU217
 753 0024 F990      		ld r15,Y+
 754               	.LVL49:
 346:platforms/avr/drivers/serial.c ****         serial_write_chunk(data, 8);
 755               		.loc 1 346 9 is_stmt 1 discriminator 3 view .LVU218
 756 0026 0E94 0000 		call sync_send
 757               	.LVL50:
 347:platforms/avr/drivers/serial.c ****     }
 758               		.loc 1 347 9 discriminator 3 view .LVU219
 759 002a 68E0      		ldi r22,lo8(8)
 760 002c 8F2D      		mov r24,r15
 761 002e 0E94 0000 		call serial_write_chunk
 762               	.LVL51:
 347:platforms/avr/drivers/serial.c ****     }
 763               		.loc 1 347 9 is_stmt 0 discriminator 3 view .LVU220
 764 0032 00C0      		rjmp .L33
 765               	.LBE204:
 766               	.LBE205:
 767               		.cfi_endproc
 768               	.LFE40:
 770               		.section	.text.__vector_3,"ax",@progbits
 771               	.global	__vector_3
 773               	__vector_3:
 774               	.LFB45:
 362:platforms/avr/drivers/serial.c **** 
 363:platforms/avr/drivers/serial.c **** inline static void change_sender2reciver(void) {
 364:platforms/avr/drivers/serial.c ****     sync_send();                 // 0
 365:platforms/avr/drivers/serial.c ****     serial_delay_half1();        // 1
 366:platforms/avr/drivers/serial.c ****     serial_low();                // 2
 367:platforms/avr/drivers/serial.c ****     serial_input_with_pullup();  // 2
 368:platforms/avr/drivers/serial.c ****     serial_delay_half1();        // 3
 369:platforms/avr/drivers/serial.c **** }
 370:platforms/avr/drivers/serial.c **** 
 371:platforms/avr/drivers/serial.c **** inline static void change_reciver2sender(void) {
 372:platforms/avr/drivers/serial.c ****     sync_recv();           // 0
 373:platforms/avr/drivers/serial.c ****     serial_delay();        // 1
 374:platforms/avr/drivers/serial.c ****     serial_low();          // 3
 375:platforms/avr/drivers/serial.c ****     serial_output();       // 3
 376:platforms/avr/drivers/serial.c ****     serial_delay_half1();  // 4
 377:platforms/avr/drivers/serial.c **** }
 378:platforms/avr/drivers/serial.c **** 
 379:platforms/avr/drivers/serial.c **** static inline uint8_t nibble_bits_count(uint8_t bits) {
 380:platforms/avr/drivers/serial.c ****     bits = (bits & 0x5) + (bits >> 1 & 0x5);
 381:platforms/avr/drivers/serial.c ****     bits = (bits & 0x3) + (bits >> 2 & 0x3);
 382:platforms/avr/drivers/serial.c ****     return bits;
 383:platforms/avr/drivers/serial.c **** }
 384:platforms/avr/drivers/serial.c **** 
 385:platforms/avr/drivers/serial.c **** // interrupt handle to be used by the target device
 386:platforms/avr/drivers/serial.c **** ISR(SERIAL_PIN_INTERRUPT) {
 775               		.loc 1 386 27 is_stmt 1 view -0
 776               		.cfi_startproc
 777 0000 1F92      		push r1
 778               	.LCFI13:
 779               		.cfi_def_cfa_offset 3
 780               		.cfi_offset 1, -2
 781 0002 0F92      		push r0
 782               	.LCFI14:
 783               		.cfi_def_cfa_offset 4
 784               		.cfi_offset 0, -3
 785 0004 0FB6      		in r0,__SREG__
 786 0006 0F92      		push r0
 787 0008 1124      		clr __zero_reg__
 788 000a EF92      		push r14
 789               	.LCFI15:
 790               		.cfi_def_cfa_offset 5
 791               		.cfi_offset 14, -4
 792 000c FF92      		push r15
 793               	.LCFI16:
 794               		.cfi_def_cfa_offset 6
 795               		.cfi_offset 15, -5
 796 000e 0F93      		push r16
 797               	.LCFI17:
 798               		.cfi_def_cfa_offset 7
 799               		.cfi_offset 16, -6
 800 0010 1F93      		push r17
 801               	.LCFI18:
 802               		.cfi_def_cfa_offset 8
 803               		.cfi_offset 17, -7
 804 0012 2F93      		push r18
 805               	.LCFI19:
 806               		.cfi_def_cfa_offset 9
 807               		.cfi_offset 18, -8
 808 0014 3F93      		push r19
 809               	.LCFI20:
 810               		.cfi_def_cfa_offset 10
 811               		.cfi_offset 19, -9
 812 0016 4F93      		push r20
 813               	.LCFI21:
 814               		.cfi_def_cfa_offset 11
 815               		.cfi_offset 20, -10
 816 0018 5F93      		push r21
 817               	.LCFI22:
 818               		.cfi_def_cfa_offset 12
 819               		.cfi_offset 21, -11
 820 001a 6F93      		push r22
 821               	.LCFI23:
 822               		.cfi_def_cfa_offset 13
 823               		.cfi_offset 22, -12
 824 001c 7F93      		push r23
 825               	.LCFI24:
 826               		.cfi_def_cfa_offset 14
 827               		.cfi_offset 23, -13
 828 001e 8F93      		push r24
 829               	.LCFI25:
 830               		.cfi_def_cfa_offset 15
 831               		.cfi_offset 24, -14
 832 0020 9F93      		push r25
 833               	.LCFI26:
 834               		.cfi_def_cfa_offset 16
 835               		.cfi_offset 25, -15
 836 0022 AF93      		push r26
 837               	.LCFI27:
 838               		.cfi_def_cfa_offset 17
 839               		.cfi_offset 26, -16
 840 0024 BF93      		push r27
 841               	.LCFI28:
 842               		.cfi_def_cfa_offset 18
 843               		.cfi_offset 27, -17
 844 0026 EF93      		push r30
 845               	.LCFI29:
 846               		.cfi_def_cfa_offset 19
 847               		.cfi_offset 30, -18
 848 0028 FF93      		push r31
 849               	.LCFI30:
 850               		.cfi_def_cfa_offset 20
 851               		.cfi_offset 31, -19
 852 002a CF93      		push r28
 853               	.LCFI31:
 854               		.cfi_def_cfa_offset 21
 855               		.cfi_offset 28, -20
 856 002c DF93      		push r29
 857               	.LCFI32:
 858               		.cfi_def_cfa_offset 22
 859               		.cfi_offset 29, -21
 860 002e 0F92      		push __tmp_reg__
 861               	.LCFI33:
 862               		.cfi_def_cfa_offset 23
 863 0030 CDB7      		in r28,__SP_L__
 864 0032 DEB7      		in r29,__SP_H__
 865               	.LCFI34:
 866               		.cfi_def_cfa_register 28
 867               	/* prologue: Signal */
 868               	/* frame size = 1 */
 869               	/* stack size = 22 */
 870               	.L__stack_usage = 22
 387:platforms/avr/drivers/serial.c ****     // recive transaction table index
 388:platforms/avr/drivers/serial.c ****     uint8_t tid, bits;
 871               		.loc 1 388 5 view .LVU222
 389:platforms/avr/drivers/serial.c ****     uint8_t pecount = 0;
 872               		.loc 1 389 5 view .LVU223
 873               		.loc 1 389 13 is_stmt 0 view .LVU224
 874 0034 1982      		std Y+1,__zero_reg__
 390:platforms/avr/drivers/serial.c ****     sync_recv();
 875               		.loc 1 390 5 is_stmt 1 view .LVU225
 876 0036 0E94 0000 		call sync_recv
 877               	.LVL52:
 391:platforms/avr/drivers/serial.c ****     bits = serial_read_chunk(&pecount, 8);
 878               		.loc 1 391 5 view .LVU226
 879               		.loc 1 391 12 is_stmt 0 view .LVU227
 880 003a CE01      		movw r24,r28
 881 003c 0196      		adiw r24,1
 882 003e 0E94 0000 		call serial_read_chunk.constprop.0
 883               	.LVL53:
 392:platforms/avr/drivers/serial.c ****     tid  = bits >> 3;
 884               		.loc 1 392 5 is_stmt 1 view .LVU228
 885               		.loc 1 392 10 is_stmt 0 view .LVU229
 886 0042 A82F      		mov r26,r24
 887 0044 A695      		lsr r26
 888 0046 A695      		lsr r26
 889 0048 A695      		lsr r26
 890               	.LVL54:
 393:platforms/avr/drivers/serial.c ****     bits = (bits & 7) != (nibble_bits_count(tid) & 7);
 891               		.loc 1 393 5 is_stmt 1 view .LVU230
 892               	.LBB229:
 893               	.LBI229:
 379:platforms/avr/drivers/serial.c ****     bits = (bits & 0x5) + (bits >> 1 & 0x5);
 894               		.loc 1 379 23 view .LVU231
 895               	.LBB230:
 380:platforms/avr/drivers/serial.c ****     bits = (bits & 0x3) + (bits >> 2 & 0x3);
 896               		.loc 1 380 5 view .LVU232
 380:platforms/avr/drivers/serial.c ****     bits = (bits & 0x3) + (bits >> 2 & 0x3);
 897               		.loc 1 380 38 is_stmt 0 view .LVU233
 898 004a 282F      		mov r18,r24
 899 004c 2295      		swap r18
 900 004e 2570      		andi r18,lo8(5)
 380:platforms/avr/drivers/serial.c ****     bits = (bits & 0x3) + (bits >> 2 & 0x3);
 901               		.loc 1 380 18 view .LVU234
 902 0050 9A2F      		mov r25,r26
 903 0052 9570      		andi r25,lo8(5)
 380:platforms/avr/drivers/serial.c ****     bits = (bits & 0x3) + (bits >> 2 & 0x3);
 904               		.loc 1 380 10 view .LVU235
 905 0054 290F      		add r18,r25
 906               	.LVL55:
 381:platforms/avr/drivers/serial.c ****     return bits;
 907               		.loc 1 381 5 is_stmt 1 view .LVU236
 381:platforms/avr/drivers/serial.c ****     return bits;
 908               		.loc 1 381 18 is_stmt 0 view .LVU237
 909 0056 922F      		mov r25,r18
 910 0058 9370      		andi r25,lo8(3)
 381:platforms/avr/drivers/serial.c ****     return bits;
 911               		.loc 1 381 38 view .LVU238
 912 005a 2695      		lsr r18
 913 005c 2695      		lsr r18
 914               	.LVL56:
 382:platforms/avr/drivers/serial.c **** }
 915               		.loc 1 382 5 is_stmt 1 view .LVU239
 382:platforms/avr/drivers/serial.c **** }
 916               		.loc 1 382 5 is_stmt 0 view .LVU240
 917               	.LBE230:
 918               	.LBE229:
 394:platforms/avr/drivers/serial.c ****     if (bits || pecount > 0 || tid > NUM_TOTAL_TRANSACTIONS) {
 919               		.loc 1 394 5 is_stmt 1 view .LVU241
 920               	.LBB232:
 921               	.LBB231:
 381:platforms/avr/drivers/serial.c ****     return bits;
 922               		.loc 1 381 10 is_stmt 0 view .LVU242
 923 005e 920F      		add r25,r18
 924               	.LVL57:
 381:platforms/avr/drivers/serial.c ****     return bits;
 925               		.loc 1 381 10 view .LVU243
 926               	.LBE231:
 927               	.LBE232:
 393:platforms/avr/drivers/serial.c ****     if (bits || pecount > 0 || tid > NUM_TOTAL_TRANSACTIONS) {
 928               		.loc 1 393 23 view .LVU244
 929 0060 9827      		eor r25,r24
 930               		.loc 1 394 14 view .LVU245
 931 0062 9770      		andi r25,lo8(7)
 932 0064 8981      		ldd r24,Y+1
 933               	.LVL58:
 934               		.loc 1 394 14 view .LVU246
 935 0066 982B      		or r25,r24
 936 0068 01F0      		breq .+2
 937 006a 00C0      		rjmp .L35
 938               		.loc 1 394 29 discriminator 2 view .LVU247
 939 006c A630      		cpi r26,lo8(6)
 940 006e 00F0      		brlo .+2
 941 0070 00C0      		rjmp .L35
 395:platforms/avr/drivers/serial.c ****         return;
 396:platforms/avr/drivers/serial.c ****     }
 397:platforms/avr/drivers/serial.c ****     serial_delay_half1();
 942               		.loc 1 397 5 is_stmt 1 view .LVU248
 943               	.LBB233:
 944               	.LBI233:
 234:platforms/avr/drivers/serial.c **** 
 945               		.loc 1 234 20 view .LVU249
 946               	.LBE233:
 234:platforms/avr/drivers/serial.c **** 
 947               		.loc 1 234 47 view .LVU250
 948               	.LVL59:
 949               	.LBB236:
 950               	.LBB234:
 951               	.LBI234:
 255:/usr/avr/include/util/delay.h **** {
 952               		.loc 2 255 1 view .LVU251
 953               	.LBB235:
 257:/usr/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 954               		.loc 2 257 2 view .LVU252
 261:/usr/avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
 955               		.loc 2 261 2 view .LVU253
 262:/usr/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e6) * __us;
 956               		.loc 2 262 2 view .LVU254
 263:/usr/avr/include/util/delay.h **** 
 957               		.loc 2 263 2 view .LVU255
 273:/usr/avr/include/util/delay.h **** 	#endif
 958               		.loc 2 273 3 view .LVU256
 959               		.loc 2 276 2 view .LVU257
 960 0072 80E1      		ldi r24,lo8(16)
 961 0074 8A95      	1:	dec r24
 962 0076 01F4      		brne 1b
 963               	.LVL60:
 964               		.loc 2 276 2 is_stmt 0 view .LVU258
 965               	.LBE235:
 966               	.LBE234:
 967               	.LBE236:
 398:platforms/avr/drivers/serial.c **** 
 399:platforms/avr/drivers/serial.c ****     serial_high();  // response step1 low->high
 968               		.loc 1 399 5 is_stmt 1 view .LVU259
 969               	.LBB237:
 970               	.LBI237:
 253:platforms/avr/drivers/serial.c **** 
 971               		.loc 1 253 20 view .LVU260
 972               	.LBB238:
 253:platforms/avr/drivers/serial.c **** 
 973               		.loc 1 253 40 view .LVU261
 974 0078 5A9A      		sbi 0xb,2
 975               	.LBE238:
 976               	.LBE237:
 400:platforms/avr/drivers/serial.c ****     serial_output();
 977               		.loc 1 400 5 view .LVU262
 978               	.LBB239:
 979               	.LBI239:
 240:platforms/avr/drivers/serial.c **** 
 980               		.loc 1 240 20 view .LVU263
 981               	.LBB240:
 240:platforms/avr/drivers/serial.c **** 
 982               		.loc 1 240 42 view .LVU264
 983 007a 529A      		sbi 0xa,2
 984               	.LBE240:
 985               	.LBE239:
 401:platforms/avr/drivers/serial.c ****     _delay_sub_us(SLAVE_INT_ACK_WIDTH_UNIT * SLAVE_INT_ACK_WIDTH);
 986               		.loc 1 401 5 view .LVU265
 987 007c B2E0      		ldi r27,lo8(2)
 988 007e BA95      	1:	dec r27
 989 0080 01F4      		brne 1b
 990 0082 00C0      		rjmp .
 402:platforms/avr/drivers/serial.c ****     split_transaction_desc_t *trans = &split_transaction_table[tid];
 991               		.loc 1 402 5 view .LVU266
 992               	.LVL61:
 403:platforms/avr/drivers/serial.c ****     serial_low();  // response step2 ack high->low
 993               		.loc 1 403 5 view .LVU267
 994               	.LBB241:
 995               	.LBI241:
 250:platforms/avr/drivers/serial.c **** 
 996               		.loc 1 250 20 view .LVU268
 997               	.LBB242:
 250:platforms/avr/drivers/serial.c **** 
 998               		.loc 1 250 39 view .LVU269
 999 0084 5A98      		cbi 0xb,2
 1000               	.LBE242:
 1001               	.LBE241:
 404:platforms/avr/drivers/serial.c **** 
 405:platforms/avr/drivers/serial.c ****     // If the transaction has a callback, we can execute it now
 406:platforms/avr/drivers/serial.c ****     if (trans->slave_callback) {
 1002               		.loc 1 406 5 view .LVU270
 1003               		.loc 1 406 14 is_stmt 0 view .LVU271
 1004 0086 EA2E      		mov r14,r26
 1005 0088 F12C      		mov r15,__zero_reg__
 1006 008a EAE0      		ldi r30,lo8(10)
 1007 008c AE9F      		mul r26,r30
 1008 008e D001      		movw r26,r0
 1009 0090 1124      		clr __zero_reg__
 1010               	.LVL62:
 1011               		.loc 1 406 14 view .LVU272
 1012 0092 A050      		subi r26,lo8(-(split_transaction_table))
 1013 0094 B040      		sbci r27,hi8(-(split_transaction_table))
 1014 0096 1896      		adiw r26,8
 1015 0098 ED91      		ld r30,X+
 1016 009a FC91      		ld r31,X
 1017 009c 1997      		sbiw r26,8+1
 1018               		.loc 1 406 8 view .LVU273
 1019 009e 3097      		sbiw r30,0
 1020 00a0 01F0      		breq .L39
 407:platforms/avr/drivers/serial.c ****         trans->slave_callback(trans->initiator2target_buffer_size, split_trans_initiator2target_buf
 1021               		.loc 1 407 9 is_stmt 1 view .LVU274
 1022               		.loc 1 407 149 is_stmt 0 view .LVU275
 1023 00a2 6091 0000 		lds r22,split_shmem
 1024 00a6 7091 0000 		lds r23,split_shmem+1
 1025               		.loc 1 407 9 view .LVU276
 1026 00aa 1696      		adiw r26,6
 1027 00ac 2D91      		ld r18,X+
 1028 00ae 3C91      		ld r19,X
 1029 00b0 1797      		sbiw r26,6+1
 1030 00b2 260F      		add r18,r22
 1031 00b4 371F      		adc r19,r23
 1032 00b6 1396      		adiw r26,3
 1033 00b8 8D91      		ld r24,X+
 1034 00ba 9C91      		ld r25,X
 1035 00bc 1497      		sbiw r26,3+1
 1036 00be 680F      		add r22,r24
 1037 00c0 791F      		adc r23,r25
 1038 00c2 1596      		adiw r26,5
 1039 00c4 4C91      		ld r20,X
 1040 00c6 1597      		sbiw r26,5
 1041 00c8 1296      		adiw r26,2
 1042 00ca 8C91      		ld r24,X
 1043 00cc 0995      		icall
 1044               	.LVL63:
 1045               	.L39:
 408:platforms/avr/drivers/serial.c ****     }
 409:platforms/avr/drivers/serial.c **** 
 410:platforms/avr/drivers/serial.c ****     // target send phase
 411:platforms/avr/drivers/serial.c ****     if (trans->target2initiator_buffer_size > 0) serial_send_packet((uint8_t *)split_trans_target2i
 1046               		.loc 1 411 5 is_stmt 1 view .LVU277
 1047               		.loc 1 411 14 is_stmt 0 view .LVU278
 1048 00ce 8AE0      		ldi r24,lo8(10)
 1049 00d0 8E9D      		mul r24,r14
 1050 00d2 F001      		movw r30,r0
 1051 00d4 8F9D      		mul r24,r15
 1052 00d6 F00D      		add r31,r0
 1053 00d8 1124      		clr __zero_reg__
 1054 00da E050      		subi r30,lo8(-(split_transaction_table))
 1055 00dc F040      		sbci r31,hi8(-(split_transaction_table))
 1056 00de 6581      		ldd r22,Z+5
 1057               		.loc 1 411 8 view .LVU279
 1058 00e0 6623      		tst r22
 1059 00e2 01F0      		breq .L40
 1060               		.loc 1 411 50 is_stmt 1 discriminator 1 view .LVU280
 1061 00e4 2091 0000 		lds r18,split_shmem
 1062 00e8 3091 0000 		lds r19,split_shmem+1
 1063 00ec 8681      		ldd r24,Z+6
 1064 00ee 9781      		ldd r25,Z+7
 1065 00f0 820F      		add r24,r18
 1066 00f2 931F      		adc r25,r19
 1067 00f4 0E94 0000 		call serial_send_packet
 1068               	.LVL64:
 1069               	.L40:
 412:platforms/avr/drivers/serial.c ****     // target switch to input
 413:platforms/avr/drivers/serial.c ****     change_sender2reciver();
 1070               		.loc 1 413 5 view .LVU281
 1071               	.LBB243:
 1072               	.LBI243:
 363:platforms/avr/drivers/serial.c ****     sync_send();                 // 0
 1073               		.loc 1 363 20 view .LVU282
 1074               	.LBB244:
 364:platforms/avr/drivers/serial.c ****     serial_delay_half1();        // 1
 1075               		.loc 1 364 5 view .LVU283
 1076 00f8 0E94 0000 		call sync_send
 1077               	.LVL65:
 365:platforms/avr/drivers/serial.c ****     serial_low();                // 2
 1078               		.loc 1 365 5 view .LVU284
 1079               	.LBB245:
 1080               	.LBI245:
 234:platforms/avr/drivers/serial.c **** 
 1081               		.loc 1 234 20 view .LVU285
 1082               	.LBE245:
 1083               	.LBE244:
 1084               	.LBE243:
 234:platforms/avr/drivers/serial.c **** 
 1085               		.loc 1 234 47 view .LVU286
 1086               	.LBB259:
 1087               	.LBB257:
 1088               	.LBB248:
 1089               	.LBB246:
 1090               	.LBI246:
 255:/usr/avr/include/util/delay.h **** {
 1091               		.loc 2 255 1 view .LVU287
 1092               	.LBB247:
 257:/usr/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 1093               		.loc 2 257 2 view .LVU288
 261:/usr/avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
 1094               		.loc 2 261 2 view .LVU289
 262:/usr/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e6) * __us;
 1095               		.loc 2 262 2 view .LVU290
 263:/usr/avr/include/util/delay.h **** 
 1096               		.loc 2 263 2 view .LVU291
 273:/usr/avr/include/util/delay.h **** 	#endif
 1097               		.loc 2 273 3 view .LVU292
 1098               		.loc 2 276 2 view .LVU293
 1099 00fc F0E1      		ldi r31,lo8(16)
 1100 00fe FA95      	1:	dec r31
 1101 0100 01F4      		brne 1b
 1102               	.LVL66:
 1103               		.loc 2 276 2 is_stmt 0 view .LVU294
 1104               	.LBE247:
 1105               	.LBE246:
 1106               	.LBE248:
 366:platforms/avr/drivers/serial.c ****     serial_input_with_pullup();  // 2
 1107               		.loc 1 366 5 is_stmt 1 view .LVU295
 1108               	.LBB249:
 1109               	.LBI249:
 250:platforms/avr/drivers/serial.c **** 
 1110               		.loc 1 250 20 view .LVU296
 1111               	.LBB250:
 250:platforms/avr/drivers/serial.c **** 
 1112               		.loc 1 250 39 view .LVU297
 1113 0102 5A98      		cbi 0xb,2
 1114               	.LBE250:
 1115               	.LBE249:
 367:platforms/avr/drivers/serial.c ****     serial_delay_half1();        // 3
 1116               		.loc 1 367 5 view .LVU298
 1117               	.LBB251:
 1118               	.LBI251:
 244:platforms/avr/drivers/serial.c **** 
 1119               		.loc 1 244 20 view .LVU299
 1120               	.LBB252:
 244:platforms/avr/drivers/serial.c **** 
 1121               		.loc 1 244 53 view .LVU300
 1122 0104 5298      		cbi 0xa,2
 1123 0106 5A9A      		sbi 0xb,2
 1124               	.LBE252:
 1125               	.LBE251:
 368:platforms/avr/drivers/serial.c **** }
 1126               		.loc 1 368 5 view .LVU301
 1127               	.LBB253:
 1128               	.LBI253:
 234:platforms/avr/drivers/serial.c **** 
 1129               		.loc 1 234 20 view .LVU302
 1130               	.LBE253:
 1131               	.LBE257:
 1132               	.LBE259:
 234:platforms/avr/drivers/serial.c **** 
 1133               		.loc 1 234 47 view .LVU303
 1134               	.LVL67:
 1135               	.LBB260:
 1136               	.LBB258:
 1137               	.LBB256:
 1138               	.LBB254:
 1139               	.LBI254:
 255:/usr/avr/include/util/delay.h **** {
 1140               		.loc 2 255 1 view .LVU304
 1141               	.LBB255:
 257:/usr/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 1142               		.loc 2 257 2 view .LVU305
 261:/usr/avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
 1143               		.loc 2 261 2 view .LVU306
 262:/usr/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e6) * __us;
 1144               		.loc 2 262 2 view .LVU307
 263:/usr/avr/include/util/delay.h **** 
 1145               		.loc 2 263 2 view .LVU308
 273:/usr/avr/include/util/delay.h **** 	#endif
 1146               		.loc 2 273 3 view .LVU309
 1147               		.loc 2 276 2 view .LVU310
 1148 0108 80E1      		ldi r24,lo8(16)
 1149 010a 8A95      	1:	dec r24
 1150 010c 01F4      		brne 1b
 1151               	.LVL68:
 1152               		.loc 2 276 2 is_stmt 0 view .LVU311
 1153               	.LBE255:
 1154               	.LBE254:
 1155               	.LBE256:
 1156               	.LBE258:
 1157               	.LBE260:
 414:platforms/avr/drivers/serial.c **** 
 415:platforms/avr/drivers/serial.c ****     // target recive phase
 416:platforms/avr/drivers/serial.c ****     if (trans->initiator2target_buffer_size > 0) {
 1158               		.loc 1 416 5 is_stmt 1 view .LVU312
 1159               		.loc 1 416 14 is_stmt 0 view .LVU313
 1160 010e 8AE0      		ldi r24,lo8(10)
 1161 0110 8E9D      		mul r24,r14
 1162 0112 8001      		movw r16,r0
 1163 0114 8F9D      		mul r24,r15
 1164 0116 100D      		add r17,r0
 1165 0118 1124      		clr __zero_reg__
 1166 011a 0050      		subi r16,lo8(-(split_transaction_table))
 1167 011c 1040      		sbci r17,hi8(-(split_transaction_table))
 1168 011e D801      		movw r26,r16
 1169 0120 1296      		adiw r26,2
 1170 0122 6C91      		ld r22,X
 1171 0124 1297      		sbiw r26,2
 1172               		.loc 1 416 8 view .LVU314
 1173 0126 6623      		tst r22
 1174 0128 01F0      		breq .L41
 417:platforms/avr/drivers/serial.c ****         if (serial_recive_packet((uint8_t *)split_trans_initiator2target_buffer(trans), trans->init
 1175               		.loc 1 417 9 is_stmt 1 view .LVU315
 1176               		.loc 1 417 13 is_stmt 0 view .LVU316
 1177 012a 2091 0000 		lds r18,split_shmem
 1178 012e 3091 0000 		lds r19,split_shmem+1
 1179 0132 1396      		adiw r26,3
 1180 0134 8D91      		ld r24,X+
 1181 0136 9C91      		ld r25,X
 1182 0138 820F      		add r24,r18
 1183 013a 931F      		adc r25,r19
 1184 013c 0E94 0000 		call serial_recive_packet
 1185               	.LVL69:
 1186 0140 D801      		movw r26,r16
 1187 0142 ED91      		ld r30,X+
 1188 0144 FC91      		ld r31,X
 1189               		.loc 1 417 12 view .LVU317
 1190 0146 8823      		tst r24
 1191 0148 01F0      		breq .L42
 1192               	.L50:
 418:platforms/avr/drivers/serial.c ****             *trans->status = TRANSACTION_ACCEPTED;
 419:platforms/avr/drivers/serial.c ****         } else {
 420:platforms/avr/drivers/serial.c ****             *trans->status = TRANSACTION_DATA_ERROR;
 421:platforms/avr/drivers/serial.c ****         }
 422:platforms/avr/drivers/serial.c ****     } else {
 423:platforms/avr/drivers/serial.c ****         *trans->status = TRANSACTION_ACCEPTED;
 1193               		.loc 1 423 24 view .LVU318
 1194 014a 88E0      		ldi r24,lo8(8)
 1195 014c 00C0      		rjmp .L51
 1196               	.L42:
 420:platforms/avr/drivers/serial.c ****         }
 1197               		.loc 1 420 13 is_stmt 1 view .LVU319
 420:platforms/avr/drivers/serial.c ****         }
 1198               		.loc 1 420 28 is_stmt 0 view .LVU320
 1199 014e 82E0      		ldi r24,lo8(2)
 1200               	.L51:
 1201               		.loc 1 423 24 view .LVU321
 1202 0150 8083      		st Z,r24
 424:platforms/avr/drivers/serial.c ****     }
 425:platforms/avr/drivers/serial.c **** 
 426:platforms/avr/drivers/serial.c ****     sync_recv();  // weit initiator output to high
 1203               		.loc 1 426 5 is_stmt 1 view .LVU322
 1204 0152 0E94 0000 		call sync_recv
 1205               	.LVL70:
 1206               	.L35:
 1207               	/* epilogue start */
 427:platforms/avr/drivers/serial.c **** }
 1208               		.loc 1 427 1 is_stmt 0 view .LVU323
 1209 0156 0F90      		pop __tmp_reg__
 1210 0158 DF91      		pop r29
 1211 015a CF91      		pop r28
 1212 015c FF91      		pop r31
 1213 015e EF91      		pop r30
 1214 0160 BF91      		pop r27
 1215 0162 AF91      		pop r26
 1216 0164 9F91      		pop r25
 1217 0166 8F91      		pop r24
 1218 0168 7F91      		pop r23
 1219 016a 6F91      		pop r22
 1220 016c 5F91      		pop r21
 1221 016e 4F91      		pop r20
 1222 0170 3F91      		pop r19
 1223 0172 2F91      		pop r18
 1224 0174 1F91      		pop r17
 1225 0176 0F91      		pop r16
 1226 0178 FF90      		pop r15
 1227 017a EF90      		pop r14
 1228 017c 0F90      		pop r0
 1229 017e 0FBE      		out __SREG__,r0
 1230 0180 0F90      		pop r0
 1231 0182 1F90      		pop r1
 1232 0184 1895      		reti
 1233               	.LVL71:
 1234               	.L41:
 423:platforms/avr/drivers/serial.c ****     }
 1235               		.loc 1 423 9 is_stmt 1 view .LVU324
 423:platforms/avr/drivers/serial.c ****     }
 1236               		.loc 1 423 15 is_stmt 0 view .LVU325
 1237 0186 ED91      		ld r30,X+
 1238 0188 FC91      		ld r31,X
 1239 018a 00C0      		rjmp .L50
 1240               		.cfi_endproc
 1241               	.LFE45:
 1243               		.section	.text.soft_serial_transaction,"ax",@progbits
 1244               	.global	soft_serial_transaction
 1246               	soft_serial_transaction:
 1247               	.LVL72:
 1248               	.LFB46:
 428:platforms/avr/drivers/serial.c **** 
 429:platforms/avr/drivers/serial.c **** /////////
 430:platforms/avr/drivers/serial.c **** //  start transaction by initiator
 431:platforms/avr/drivers/serial.c **** //
 432:platforms/avr/drivers/serial.c **** // int  soft_serial_transaction(int sstd_index)
 433:platforms/avr/drivers/serial.c **** //
 434:platforms/avr/drivers/serial.c **** // Returns:
 435:platforms/avr/drivers/serial.c **** //    TRANSACTION_END
 436:platforms/avr/drivers/serial.c **** //    TRANSACTION_NO_RESPONSE
 437:platforms/avr/drivers/serial.c **** //    TRANSACTION_DATA_ERROR
 438:platforms/avr/drivers/serial.c **** // this code is very time dependent, so we need to disable interrupts
 439:platforms/avr/drivers/serial.c **** int soft_serial_transaction(int sstd_index) {
 1249               		.loc 1 439 45 is_stmt 1 view -0
 1250               		.cfi_startproc
 1251               		.loc 1 439 45 is_stmt 0 view .LVU327
 1252 0000 0F93      		push r16
 1253               	.LCFI35:
 1254               		.cfi_def_cfa_offset 3
 1255               		.cfi_offset 16, -2
 1256 0002 1F93      		push r17
 1257               	.LCFI36:
 1258               		.cfi_def_cfa_offset 4
 1259               		.cfi_offset 17, -3
 1260 0004 CF93      		push r28
 1261               	.LCFI37:
 1262               		.cfi_def_cfa_offset 5
 1263               		.cfi_offset 28, -4
 1264 0006 DF93      		push r29
 1265               	.LCFI38:
 1266               		.cfi_def_cfa_offset 6
 1267               		.cfi_offset 29, -5
 1268               	/* prologue: function */
 1269               	/* frame size = 0 */
 1270               	/* stack size = 4 */
 1271               	.L__stack_usage = 4
 1272 0008 EC01      		movw r28,r24
 440:platforms/avr/drivers/serial.c ****     if (sstd_index > NUM_TOTAL_TRANSACTIONS) return TRANSACTION_TYPE_ERROR;
 1273               		.loc 1 440 5 is_stmt 1 view .LVU328
 1274               		.loc 1 440 8 is_stmt 0 view .LVU329
 1275 000a 0697      		sbiw r24,6
 1276 000c 04F0      		brlt .+2
 1277 000e 00C0      		rjmp .L62
 441:platforms/avr/drivers/serial.c ****     split_transaction_desc_t *trans = &split_transaction_table[sstd_index];
 1278               		.loc 1 441 5 is_stmt 1 view .LVU330
 1279               	.LVL73:
 442:platforms/avr/drivers/serial.c **** 
 443:platforms/avr/drivers/serial.c ****     if (!trans->status) return TRANSACTION_TYPE_ERROR;  // not registered
 1280               		.loc 1 443 5 view .LVU331
 1281               		.loc 1 443 15 is_stmt 0 view .LVU332
 1282 0010 8AE0      		ldi r24,lo8(10)
 1283               	.LVL74:
 1284               		.loc 1 443 15 view .LVU333
 1285 0012 8C9F      		mul r24,r28
 1286 0014 F001      		movw r30,r0
 1287 0016 8D9F      		mul r24,r29
 1288 0018 F00D      		add r31,r0
 1289 001a 1124      		clr __zero_reg__
 1290 001c E050      		subi r30,lo8(-(split_transaction_table))
 1291 001e F040      		sbci r31,hi8(-(split_transaction_table))
 1292               		.loc 1 443 8 view .LVU334
 1293 0020 8081      		ld r24,Z
 1294 0022 9181      		ldd r25,Z+1
 1295 0024 892B      		or r24,r25
 1296 0026 01F4      		brne .+2
 1297 0028 00C0      		rjmp .L62
 444:platforms/avr/drivers/serial.c **** 
 445:platforms/avr/drivers/serial.c ****     cli();
 1298               		.loc 1 445 5 is_stmt 1 view .LVU335
 1299               	/* #APP */
 1300               	 ;  445 "platforms/avr/drivers/serial.c" 1
 1301 002a F894      		cli
 1302               	 ;  0 "" 2
 446:platforms/avr/drivers/serial.c **** 
 447:platforms/avr/drivers/serial.c ****     // signal to the target that we want to start a transaction
 448:platforms/avr/drivers/serial.c ****     serial_output();
 1303               		.loc 1 448 5 view .LVU336
 1304               	/* #NOAPP */
 1305               	.LBB299:
 1306               	.LBI299:
 240:platforms/avr/drivers/serial.c **** 
 1307               		.loc 1 240 20 view .LVU337
 1308               	.LBB300:
 240:platforms/avr/drivers/serial.c **** 
 1309               		.loc 1 240 42 view .LVU338
 1310 002c 529A      		sbi 0xa,2
 1311               	.LBE300:
 1312               	.LBE299:
 449:platforms/avr/drivers/serial.c ****     serial_low();
 1313               		.loc 1 449 5 view .LVU339
 1314               	.LBB301:
 1315               	.LBI301:
 250:platforms/avr/drivers/serial.c **** 
 1316               		.loc 1 250 20 view .LVU340
 1317               	.LBB302:
 250:platforms/avr/drivers/serial.c **** 
 1318               		.loc 1 250 39 view .LVU341
 1319 002e 5A98      		cbi 0xb,2
 1320               	.LBE302:
 1321               	.LBE301:
 450:platforms/avr/drivers/serial.c ****     _delay_us(SLAVE_INT_WIDTH_US);
 1322               		.loc 1 450 5 view .LVU342
 1323               	.LVL75:
 1324               	.LBB303:
 1325               	.LBI303:
 255:/usr/avr/include/util/delay.h **** {
 1326               		.loc 2 255 1 view .LVU343
 1327               	.LBB304:
 257:/usr/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 1328               		.loc 2 257 2 view .LVU344
 261:/usr/avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
 1329               		.loc 2 261 2 view .LVU345
 262:/usr/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e6) * __us;
 1330               		.loc 2 262 2 view .LVU346
 263:/usr/avr/include/util/delay.h **** 
 1331               		.loc 2 263 2 view .LVU347
 273:/usr/avr/include/util/delay.h **** 	#endif
 1332               		.loc 2 273 3 view .LVU348
 1333               		.loc 2 276 2 view .LVU349
 1334 0030 85E0      		ldi r24,lo8(5)
 1335 0032 8A95      	1:	dec r24
 1336 0034 01F4      		brne 1b
 1337 0036 0000      		nop
 1338               	.LVL76:
 1339               		.loc 2 276 2 is_stmt 0 view .LVU350
 1340               	.LBE304:
 1341               	.LBE303:
 451:platforms/avr/drivers/serial.c **** 
 452:platforms/avr/drivers/serial.c ****     // send transaction table index
 453:platforms/avr/drivers/serial.c ****     int tid = (sstd_index << 3) | (7 & nibble_bits_count(sstd_index));
 1342               		.loc 1 453 5 is_stmt 1 view .LVU351
 1343               	.LBB305:
 1344               	.LBI305:
 379:platforms/avr/drivers/serial.c ****     bits = (bits & 0x5) + (bits >> 1 & 0x5);
 1345               		.loc 1 379 23 view .LVU352
 1346               	.LBB306:
 380:platforms/avr/drivers/serial.c ****     bits = (bits & 0x3) + (bits >> 2 & 0x3);
 1347               		.loc 1 380 5 view .LVU353
 380:platforms/avr/drivers/serial.c ****     bits = (bits & 0x3) + (bits >> 2 & 0x3);
 1348               		.loc 1 380 38 is_stmt 0 view .LVU354
 1349 0038 8C2F      		mov r24,r28
 1350 003a 8695      		lsr r24
 1351 003c 8570      		andi r24,lo8(5)
 380:platforms/avr/drivers/serial.c ****     bits = (bits & 0x3) + (bits >> 2 & 0x3);
 1352               		.loc 1 380 18 view .LVU355
 1353 003e 9C2F      		mov r25,r28
 1354 0040 9570      		andi r25,lo8(5)
 380:platforms/avr/drivers/serial.c ****     bits = (bits & 0x3) + (bits >> 2 & 0x3);
 1355               		.loc 1 380 10 view .LVU356
 1356 0042 890F      		add r24,r25
 1357               	.LVL77:
 381:platforms/avr/drivers/serial.c ****     return bits;
 1358               		.loc 1 381 5 is_stmt 1 view .LVU357
 381:platforms/avr/drivers/serial.c ****     return bits;
 1359               		.loc 1 381 18 is_stmt 0 view .LVU358
 1360 0044 982F      		mov r25,r24
 1361 0046 9370      		andi r25,lo8(3)
 381:platforms/avr/drivers/serial.c ****     return bits;
 1362               		.loc 1 381 38 view .LVU359
 1363 0048 8695      		lsr r24
 1364 004a 8695      		lsr r24
 1365               	.LVL78:
 382:platforms/avr/drivers/serial.c **** }
 1366               		.loc 1 382 5 is_stmt 1 view .LVU360
 381:platforms/avr/drivers/serial.c ****     return bits;
 1367               		.loc 1 381 10 is_stmt 0 view .LVU361
 1368 004c 890F      		add r24,r25
 1369               	.LBE306:
 1370               	.LBE305:
 1371               		.loc 1 453 9 view .LVU362
 1372 004e 8E01      		movw r16,r28
 1373 0050 93E0      		ldi r25,3
 1374               		1:
 1375 0052 000F      		lsl r16
 1376 0054 111F      		rol r17
 1377 0056 9A95      		dec r25
 1378 0058 01F4      		brne 1b
 1379 005a 082B      		or r16,r24
 454:platforms/avr/drivers/serial.c ****     sync_send();
 1380               		.loc 1 454 5 is_stmt 1 view .LVU363
 1381 005c 0E94 0000 		call sync_send
 1382               	.LVL79:
 455:platforms/avr/drivers/serial.c ****     _delay_sub_us(TID_SEND_ADJUST);
 1383               		.loc 1 455 5 view .LVU364
 1384 0060 00C0      		rjmp .
 456:platforms/avr/drivers/serial.c ****     serial_write_chunk(tid, 8);
 1385               		.loc 1 456 5 view .LVU365
 1386 0062 68E0      		ldi r22,lo8(8)
 1387 0064 802F      		mov r24,r16
 1388 0066 0E94 0000 		call serial_write_chunk
 1389               	.LVL80:
 457:platforms/avr/drivers/serial.c ****     serial_delay_half1();
 1390               		.loc 1 457 5 view .LVU366
 1391               	.LBB307:
 1392               	.LBI307:
 234:platforms/avr/drivers/serial.c **** 
 1393               		.loc 1 234 20 view .LVU367
 1394               	.LBE307:
 234:platforms/avr/drivers/serial.c **** 
 1395               		.loc 1 234 47 view .LVU368
 1396               	.LBB310:
 1397               	.LBB308:
 1398               	.LBI308:
 255:/usr/avr/include/util/delay.h **** {
 1399               		.loc 2 255 1 view .LVU369
 1400               	.LBB309:
 257:/usr/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 1401               		.loc 2 257 2 view .LVU370
 261:/usr/avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
 1402               		.loc 2 261 2 view .LVU371
 262:/usr/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e6) * __us;
 1403               		.loc 2 262 2 view .LVU372
 263:/usr/avr/include/util/delay.h **** 
 1404               		.loc 2 263 2 view .LVU373
 273:/usr/avr/include/util/delay.h **** 	#endif
 1405               		.loc 2 273 3 view .LVU374
 1406               		.loc 2 276 2 view .LVU375
 1407 006a A0E1      		ldi r26,lo8(16)
 1408 006c AA95      	1:	dec r26
 1409 006e 01F4      		brne 1b
 1410               	.LVL81:
 1411               		.loc 2 276 2 is_stmt 0 view .LVU376
 1412               	.LBE309:
 1413               	.LBE308:
 1414               	.LBE310:
 458:platforms/avr/drivers/serial.c **** 
 459:platforms/avr/drivers/serial.c ****     // wait for the target response (step1 low->high)
 460:platforms/avr/drivers/serial.c ****     serial_input_with_pullup();
 1415               		.loc 1 460 5 is_stmt 1 view .LVU377
 1416               	.LBB311:
 1417               	.LBI311:
 244:platforms/avr/drivers/serial.c **** 
 1418               		.loc 1 244 20 view .LVU378
 1419               	.LBB312:
 244:platforms/avr/drivers/serial.c **** 
 1420               		.loc 1 244 53 view .LVU379
 1421 0070 5298      		cbi 0xa,2
 1422 0072 5A9A      		sbi 0xb,2
 1423               	.L54:
 1424               	.LBE312:
 1425               	.LBE311:
 1426               	.LBB313:
 1427               	.LBI313:
 247:platforms/avr/drivers/serial.c **** 
 1428               		.loc 1 247 23 view .LVU380
 1429               	.LBB314:
 247:platforms/avr/drivers/serial.c **** 
 1430               		.loc 1 247 47 view .LVU381
 1431               	.LBE314:
 1432               	.LBE313:
 461:platforms/avr/drivers/serial.c ****     while (!serial_read_pin()) {
 1433               		.loc 1 461 11 is_stmt 0 view .LVU382
 1434 0074 4A9B      		sbis 0x9,2
 1435 0076 00C0      		rjmp .L55
 1436 0078 87E0      		ldi r24,lo8(7)
 1437 007a 90E0      		ldi r25,0
 1438               	.L56:
 1439               	.LVL82:
 1440               	.LBB315:
 1441               	.LBB316:
 1442               	.LBI316:
 247:platforms/avr/drivers/serial.c **** 
 1443               		.loc 1 247 23 is_stmt 1 discriminator 1 view .LVU383
 1444               	.LBB317:
 247:platforms/avr/drivers/serial.c **** 
 1445               		.loc 1 247 47 discriminator 1 view .LVU384
 1446               	.LBE317:
 1447               	.LBE316:
 462:platforms/avr/drivers/serial.c ****         _delay_sub_us(2);
 463:platforms/avr/drivers/serial.c ****     }
 464:platforms/avr/drivers/serial.c **** 
 465:platforms/avr/drivers/serial.c ****     // check if the target is present (step2 high->low)
 466:platforms/avr/drivers/serial.c ****     for (int i = 0; serial_read_pin(); i++) {
 1448               		.loc 1 466 5 is_stmt 0 discriminator 1 view .LVU385
 1449 007c 4A99      		sbic 0x9,2
 1450 007e 00C0      		rjmp .L58
 1451               	.LBE315:
 467:platforms/avr/drivers/serial.c ****         if (i > SLAVE_INT_ACK_WIDTH + 1) {
 468:platforms/avr/drivers/serial.c ****             // slave failed to pull the line low, assume not present
 469:platforms/avr/drivers/serial.c ****             serial_output();
 470:platforms/avr/drivers/serial.c ****             serial_high();
 471:platforms/avr/drivers/serial.c ****             *trans->status = TRANSACTION_NO_RESPONSE;
 472:platforms/avr/drivers/serial.c ****             sei();
 473:platforms/avr/drivers/serial.c ****             return TRANSACTION_NO_RESPONSE;
 474:platforms/avr/drivers/serial.c ****         }
 475:platforms/avr/drivers/serial.c ****         _delay_sub_us(SLAVE_INT_ACK_WIDTH_UNIT);
 476:platforms/avr/drivers/serial.c ****     }
 477:platforms/avr/drivers/serial.c **** 
 478:platforms/avr/drivers/serial.c ****     // initiator recive phase
 479:platforms/avr/drivers/serial.c ****     // if the target is present syncronize with it
 480:platforms/avr/drivers/serial.c ****     if (trans->target2initiator_buffer_size > 0) {
 1452               		.loc 1 480 5 is_stmt 1 view .LVU386
 1453               		.loc 1 480 14 is_stmt 0 view .LVU387
 1454 0080 8AE0      		ldi r24,lo8(10)
 1455               	.LVL83:
 1456               		.loc 1 480 14 view .LVU388
 1457 0082 8C9F      		mul r24,r28
 1458 0084 8001      		movw r16,r0
 1459 0086 8D9F      		mul r24,r29
 1460 0088 100D      		add r17,r0
 1461 008a 1124      		clr __zero_reg__
 1462 008c 0050      		subi r16,lo8(-(split_transaction_table))
 1463 008e 1040      		sbci r17,hi8(-(split_transaction_table))
 1464 0090 F801      		movw r30,r16
 1465 0092 6581      		ldd r22,Z+5
 1466               		.loc 1 480 8 view .LVU389
 1467 0094 6623      		tst r22
 1468 0096 01F0      		breq .L59
 481:platforms/avr/drivers/serial.c ****         if (!serial_recive_packet((uint8_t *)split_trans_target2initiator_buffer(trans), trans->tar
 1469               		.loc 1 481 9 is_stmt 1 view .LVU390
 1470               		.loc 1 481 14 is_stmt 0 view .LVU391
 1471 0098 2091 0000 		lds r18,split_shmem
 1472 009c 3091 0000 		lds r19,split_shmem+1
 1473 00a0 8681      		ldd r24,Z+6
 1474 00a2 9781      		ldd r25,Z+7
 1475 00a4 820F      		add r24,r18
 1476 00a6 931F      		adc r25,r19
 1477 00a8 0E94 0000 		call serial_recive_packet
 1478               	.LVL84:
 1479               		.loc 1 481 12 view .LVU392
 1480 00ac 8111      		cpse r24,__zero_reg__
 1481 00ae 00C0      		rjmp .L59
 482:platforms/avr/drivers/serial.c ****             serial_output();
 1482               		.loc 1 482 13 is_stmt 1 view .LVU393
 1483               	.LBB322:
 1484               	.LBI322:
 240:platforms/avr/drivers/serial.c **** 
 1485               		.loc 1 240 20 view .LVU394
 1486               	.LBB323:
 240:platforms/avr/drivers/serial.c **** 
 1487               		.loc 1 240 42 view .LVU395
 1488 00b0 529A      		sbi 0xa,2
 1489               	.LBE323:
 1490               	.LBE322:
 483:platforms/avr/drivers/serial.c ****             serial_high();
 1491               		.loc 1 483 13 view .LVU396
 1492               	.LBB324:
 1493               	.LBI324:
 253:platforms/avr/drivers/serial.c **** 
 1494               		.loc 1 253 20 view .LVU397
 1495               	.LBB325:
 253:platforms/avr/drivers/serial.c **** 
 1496               		.loc 1 253 40 view .LVU398
 1497 00b2 5A9A      		sbi 0xb,2
 1498               	.LBE325:
 1499               	.LBE324:
 484:platforms/avr/drivers/serial.c ****             *trans->status = TRANSACTION_DATA_ERROR;
 1500               		.loc 1 484 13 view .LVU399
 1501               		.loc 1 484 19 is_stmt 0 view .LVU400
 1502 00b4 D801      		movw r26,r16
 1503 00b6 ED91      		ld r30,X+
 1504 00b8 FC91      		ld r31,X
 1505               		.loc 1 484 28 view .LVU401
 1506 00ba 82E0      		ldi r24,lo8(2)
 1507 00bc 8083      		st Z,r24
 485:platforms/avr/drivers/serial.c ****             sei();
 1508               		.loc 1 485 13 is_stmt 1 view .LVU402
 1509               	/* #APP */
 1510               	 ;  485 "platforms/avr/drivers/serial.c" 1
 1511 00be 7894      		sei
 1512               	 ;  0 "" 2
 486:platforms/avr/drivers/serial.c ****             return TRANSACTION_DATA_ERROR;
 1513               		.loc 1 486 13 view .LVU403
 1514               		.loc 1 486 20 is_stmt 0 view .LVU404
 1515               	/* #NOAPP */
 1516 00c0 82E0      		ldi r24,lo8(2)
 1517 00c2 90E0      		ldi r25,0
 1518 00c4 00C0      		rjmp .L52
 1519               	.L55:
 462:platforms/avr/drivers/serial.c ****     }
 1520               		.loc 1 462 9 is_stmt 1 view .LVU405
 1521 00c6 00C0      		rjmp .
 1522 00c8 00C0      		rjmp .L54
 1523               	.LVL85:
 1524               	.L58:
 1525               	.LBB326:
 467:platforms/avr/drivers/serial.c ****             // slave failed to pull the line low, assume not present
 1526               		.loc 1 467 9 view .LVU406
 1527 00ca 0197      		sbiw r24,1
 1528               	.LVL86:
 467:platforms/avr/drivers/serial.c ****             // slave failed to pull the line low, assume not present
 1529               		.loc 1 467 12 is_stmt 0 view .LVU407
 1530 00cc 01F4      		brne .L57
 469:platforms/avr/drivers/serial.c ****             serial_high();
 1531               		.loc 1 469 13 is_stmt 1 view .LVU408
 1532               	.LBB318:
 1533               	.LBI318:
 240:platforms/avr/drivers/serial.c **** 
 1534               		.loc 1 240 20 view .LVU409
 1535               	.LBB319:
 240:platforms/avr/drivers/serial.c **** 
 1536               		.loc 1 240 42 view .LVU410
 1537 00ce 529A      		sbi 0xa,2
 1538               	.LBE319:
 1539               	.LBE318:
 470:platforms/avr/drivers/serial.c ****             *trans->status = TRANSACTION_NO_RESPONSE;
 1540               		.loc 1 470 13 view .LVU411
 1541               	.LBB320:
 1542               	.LBI320:
 253:platforms/avr/drivers/serial.c **** 
 1543               		.loc 1 253 20 view .LVU412
 1544               	.LBB321:
 253:platforms/avr/drivers/serial.c **** 
 1545               		.loc 1 253 40 view .LVU413
 1546 00d0 5A9A      		sbi 0xb,2
 1547               	.LBE321:
 1548               	.LBE320:
 471:platforms/avr/drivers/serial.c ****             sei();
 1549               		.loc 1 471 13 view .LVU414
 471:platforms/avr/drivers/serial.c ****             sei();
 1550               		.loc 1 471 19 is_stmt 0 view .LVU415
 1551 00d2 8AE0      		ldi r24,lo8(10)
 1552               	.LVL87:
 471:platforms/avr/drivers/serial.c ****             sei();
 1553               		.loc 1 471 19 view .LVU416
 1554 00d4 8C9F      		mul r24,r28
 1555 00d6 F001      		movw r30,r0
 1556 00d8 8D9F      		mul r24,r29
 1557 00da F00D      		add r31,r0
 1558 00dc 1124      		clr __zero_reg__
 1559 00de E050      		subi r30,lo8(-(split_transaction_table))
 1560 00e0 F040      		sbci r31,hi8(-(split_transaction_table))
 1561 00e2 0190      		ld __tmp_reg__,Z+
 1562 00e4 F081      		ld r31,Z
 1563 00e6 E02D      		mov r30,__tmp_reg__
 471:platforms/avr/drivers/serial.c ****             sei();
 1564               		.loc 1 471 28 view .LVU417
 1565 00e8 81E0      		ldi r24,lo8(1)
 1566 00ea 8083      		st Z,r24
 472:platforms/avr/drivers/serial.c ****             return TRANSACTION_NO_RESPONSE;
 1567               		.loc 1 472 13 is_stmt 1 view .LVU418
 1568               	/* #APP */
 1569               	 ;  472 "platforms/avr/drivers/serial.c" 1
 1570 00ec 7894      		sei
 1571               	 ;  0 "" 2
 473:platforms/avr/drivers/serial.c ****         }
 1572               		.loc 1 473 13 view .LVU419
 473:platforms/avr/drivers/serial.c ****         }
 1573               		.loc 1 473 20 is_stmt 0 view .LVU420
 1574               	/* #NOAPP */
 1575 00ee 81E0      		ldi r24,lo8(1)
 1576 00f0 90E0      		ldi r25,0
 1577               	.LVL88:
 1578               	.L52:
 1579               	/* epilogue start */
 473:platforms/avr/drivers/serial.c ****         }
 1580               		.loc 1 473 20 view .LVU421
 1581               	.LBE326:
 487:platforms/avr/drivers/serial.c ****         }
 488:platforms/avr/drivers/serial.c ****     }
 489:platforms/avr/drivers/serial.c **** 
 490:platforms/avr/drivers/serial.c ****     // initiator switch to output
 491:platforms/avr/drivers/serial.c ****     change_reciver2sender();
 492:platforms/avr/drivers/serial.c **** 
 493:platforms/avr/drivers/serial.c ****     // initiator send phase
 494:platforms/avr/drivers/serial.c ****     if (trans->initiator2target_buffer_size > 0) {
 495:platforms/avr/drivers/serial.c ****         serial_send_packet((uint8_t *)split_trans_initiator2target_buffer(trans), trans->initiator2
 496:platforms/avr/drivers/serial.c ****     }
 497:platforms/avr/drivers/serial.c **** 
 498:platforms/avr/drivers/serial.c ****     // always, release the line when not in use
 499:platforms/avr/drivers/serial.c ****     sync_send();
 500:platforms/avr/drivers/serial.c **** 
 501:platforms/avr/drivers/serial.c ****     *trans->status = TRANSACTION_END;
 502:platforms/avr/drivers/serial.c ****     sei();
 503:platforms/avr/drivers/serial.c ****     return TRANSACTION_END;
 504:platforms/avr/drivers/serial.c **** }
 1582               		.loc 1 504 1 view .LVU422
 1583 00f2 DF91      		pop r29
 1584 00f4 CF91      		pop r28
 1585               	.LVL89:
 1586               		.loc 1 504 1 view .LVU423
 1587 00f6 1F91      		pop r17
 1588 00f8 0F91      		pop r16
 1589 00fa 0895      		ret
 1590               	.LVL90:
 1591               	.L57:
 1592               	.LBB327:
 475:platforms/avr/drivers/serial.c ****     }
 1593               		.loc 1 475 9 is_stmt 1 discriminator 2 view .LVU424
 1594 00fc 00C0      		rjmp .
 1595               	.LVL91:
 475:platforms/avr/drivers/serial.c ****     }
 1596               		.loc 1 475 9 is_stmt 0 discriminator 2 view .LVU425
 1597 00fe 00C0      		rjmp .L56
 1598               	.LVL92:
 1599               	.L59:
 475:platforms/avr/drivers/serial.c ****     }
 1600               		.loc 1 475 9 discriminator 2 view .LVU426
 1601               	.LBE327:
 491:platforms/avr/drivers/serial.c **** 
 1602               		.loc 1 491 5 is_stmt 1 view .LVU427
 1603               	.LBB328:
 1604               	.LBI328:
 371:platforms/avr/drivers/serial.c ****     sync_recv();           // 0
 1605               		.loc 1 371 20 view .LVU428
 1606               	.LBB329:
 372:platforms/avr/drivers/serial.c ****     serial_delay();        // 1
 1607               		.loc 1 372 5 view .LVU429
 1608 0100 0E94 0000 		call sync_recv
 1609               	.LVL93:
 373:platforms/avr/drivers/serial.c ****     serial_low();          // 3
 1610               		.loc 1 373 5 view .LVU430
 1611               	.LBB330:
 1612               	.LBI330:
 231:platforms/avr/drivers/serial.c **** 
 1613               		.loc 1 231 20 view .LVU431
 1614               	.LBE330:
 1615               	.LBE329:
 1616               	.LBE328:
 231:platforms/avr/drivers/serial.c **** 
 1617               		.loc 1 231 41 view .LVU432
 1618               	.LBB344:
 1619               	.LBB342:
 1620               	.LBB333:
 1621               	.LBB331:
 1622               	.LBI331:
 255:/usr/avr/include/util/delay.h **** {
 1623               		.loc 2 255 1 view .LVU433
 1624               	.LBB332:
 257:/usr/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 1625               		.loc 2 257 2 view .LVU434
 261:/usr/avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
 1626               		.loc 2 261 2 view .LVU435
 262:/usr/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e6) * __us;
 1627               		.loc 2 262 2 view .LVU436
 263:/usr/avr/include/util/delay.h **** 
 1628               		.loc 2 263 2 view .LVU437
 273:/usr/avr/include/util/delay.h **** 	#endif
 1629               		.loc 2 273 3 view .LVU438
 1630               		.loc 2 276 2 view .LVU439
 1631 0104 B0E2      		ldi r27,lo8(32)
 1632 0106 BA95      	1:	dec r27
 1633 0108 01F4      		brne 1b
 1634               	.LVL94:
 1635               		.loc 2 276 2 is_stmt 0 view .LVU440
 1636               	.LBE332:
 1637               	.LBE331:
 1638               	.LBE333:
 374:platforms/avr/drivers/serial.c ****     serial_output();       // 3
 1639               		.loc 1 374 5 is_stmt 1 view .LVU441
 1640               	.LBB334:
 1641               	.LBI334:
 250:platforms/avr/drivers/serial.c **** 
 1642               		.loc 1 250 20 view .LVU442
 1643               	.LBB335:
 250:platforms/avr/drivers/serial.c **** 
 1644               		.loc 1 250 39 view .LVU443
 1645 010a 5A98      		cbi 0xb,2
 1646               	.LBE335:
 1647               	.LBE334:
 375:platforms/avr/drivers/serial.c ****     serial_delay_half1();  // 4
 1648               		.loc 1 375 5 view .LVU444
 1649               	.LBB336:
 1650               	.LBI336:
 240:platforms/avr/drivers/serial.c **** 
 1651               		.loc 1 240 20 view .LVU445
 1652               	.LBB337:
 240:platforms/avr/drivers/serial.c **** 
 1653               		.loc 1 240 42 view .LVU446
 1654 010c 529A      		sbi 0xa,2
 1655               	.LBE337:
 1656               	.LBE336:
 376:platforms/avr/drivers/serial.c **** }
 1657               		.loc 1 376 5 view .LVU447
 1658               	.LBB338:
 1659               	.LBI338:
 234:platforms/avr/drivers/serial.c **** 
 1660               		.loc 1 234 20 view .LVU448
 1661               	.LBE338:
 1662               	.LBE342:
 1663               	.LBE344:
 234:platforms/avr/drivers/serial.c **** 
 1664               		.loc 1 234 47 view .LVU449
 1665               	.LVL95:
 1666               	.LBB345:
 1667               	.LBB343:
 1668               	.LBB341:
 1669               	.LBB339:
 1670               	.LBI339:
 255:/usr/avr/include/util/delay.h **** {
 1671               		.loc 2 255 1 view .LVU450
 1672               	.LBB340:
 257:/usr/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 1673               		.loc 2 257 2 view .LVU451
 261:/usr/avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
 1674               		.loc 2 261 2 view .LVU452
 262:/usr/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e6) * __us;
 1675               		.loc 2 262 2 view .LVU453
 263:/usr/avr/include/util/delay.h **** 
 1676               		.loc 2 263 2 view .LVU454
 273:/usr/avr/include/util/delay.h **** 	#endif
 1677               		.loc 2 273 3 view .LVU455
 1678               		.loc 2 276 2 view .LVU456
 1679 010e E0E1      		ldi r30,lo8(16)
 1680 0110 EA95      	1:	dec r30
 1681 0112 01F4      		brne 1b
 1682               	.LVL96:
 1683               		.loc 2 276 2 is_stmt 0 view .LVU457
 1684               	.LBE340:
 1685               	.LBE339:
 1686               	.LBE341:
 1687               	.LBE343:
 1688               	.LBE345:
 494:platforms/avr/drivers/serial.c ****         serial_send_packet((uint8_t *)split_trans_initiator2target_buffer(trans), trans->initiator2
 1689               		.loc 1 494 5 is_stmt 1 view .LVU458
 494:platforms/avr/drivers/serial.c ****         serial_send_packet((uint8_t *)split_trans_initiator2target_buffer(trans), trans->initiator2
 1690               		.loc 1 494 14 is_stmt 0 view .LVU459
 1691 0114 8AE0      		ldi r24,lo8(10)
 1692 0116 8C9F      		mul r24,r28
 1693 0118 F001      		movw r30,r0
 1694 011a 8D9F      		mul r24,r29
 1695 011c F00D      		add r31,r0
 1696 011e 1124      		clr __zero_reg__
 1697 0120 E050      		subi r30,lo8(-(split_transaction_table))
 1698 0122 F040      		sbci r31,hi8(-(split_transaction_table))
 1699 0124 6281      		ldd r22,Z+2
 494:platforms/avr/drivers/serial.c ****         serial_send_packet((uint8_t *)split_trans_initiator2target_buffer(trans), trans->initiator2
 1700               		.loc 1 494 8 view .LVU460
 1701 0126 6623      		tst r22
 1702 0128 01F0      		breq .L60
 495:platforms/avr/drivers/serial.c ****     }
 1703               		.loc 1 495 9 is_stmt 1 view .LVU461
 1704 012a 2091 0000 		lds r18,split_shmem
 1705 012e 3091 0000 		lds r19,split_shmem+1
 1706 0132 8381      		ldd r24,Z+3
 1707 0134 9481      		ldd r25,Z+4
 1708 0136 820F      		add r24,r18
 1709 0138 931F      		adc r25,r19
 1710 013a 0E94 0000 		call serial_send_packet
 1711               	.LVL97:
 1712               	.L60:
 499:platforms/avr/drivers/serial.c **** 
 1713               		.loc 1 499 5 view .LVU462
 1714 013e 0E94 0000 		call sync_send
 1715               	.LVL98:
 501:platforms/avr/drivers/serial.c ****     sei();
 1716               		.loc 1 501 5 view .LVU463
 501:platforms/avr/drivers/serial.c ****     sei();
 1717               		.loc 1 501 11 is_stmt 0 view .LVU464
 1718 0142 8AE0      		ldi r24,lo8(10)
 1719 0144 8C9F      		mul r24,r28
 1720 0146 F001      		movw r30,r0
 1721 0148 8D9F      		mul r24,r29
 1722 014a F00D      		add r31,r0
 1723 014c 1124      		clr __zero_reg__
 1724 014e E050      		subi r30,lo8(-(split_transaction_table))
 1725 0150 F040      		sbci r31,hi8(-(split_transaction_table))
 1726 0152 0190      		ld __tmp_reg__,Z+
 1727 0154 F081      		ld r31,Z
 1728 0156 E02D      		mov r30,__tmp_reg__
 501:platforms/avr/drivers/serial.c ****     sei();
 1729               		.loc 1 501 20 view .LVU465
 1730 0158 1082      		st Z,__zero_reg__
 502:platforms/avr/drivers/serial.c ****     return TRANSACTION_END;
 1731               		.loc 1 502 5 is_stmt 1 view .LVU466
 1732               	/* #APP */
 1733               	 ;  502 "platforms/avr/drivers/serial.c" 1
 1734 015a 7894      		sei
 1735               	 ;  0 "" 2
 503:platforms/avr/drivers/serial.c **** }
 1736               		.loc 1 503 5 view .LVU467
 503:platforms/avr/drivers/serial.c **** }
 1737               		.loc 1 503 12 is_stmt 0 view .LVU468
 1738               	/* #NOAPP */
 1739 015c 90E0      		ldi r25,0
 1740 015e 80E0      		ldi r24,0
 1741 0160 00C0      		rjmp .L52
 1742               	.LVL99:
 1743               	.L62:
 440:platforms/avr/drivers/serial.c ****     split_transaction_desc_t *trans = &split_transaction_table[sstd_index];
 1744               		.loc 1 440 53 view .LVU469
 1745 0162 84E0      		ldi r24,lo8(4)
 1746 0164 90E0      		ldi r25,0
 1747 0166 00C0      		rjmp .L52
 1748               		.cfi_endproc
 1749               	.LFE46:
 1751               		.section	.text.soft_serial_get_and_clean_status,"ax",@progbits
 1752               	.global	soft_serial_get_and_clean_status
 1754               	soft_serial_get_and_clean_status:
 1755               	.LVL100:
 1756               	.LFB47:
 505:platforms/avr/drivers/serial.c **** 
 506:platforms/avr/drivers/serial.c **** int soft_serial_get_and_clean_status(int sstd_index) {
 1757               		.loc 1 506 54 is_stmt 1 view -0
 1758               		.cfi_startproc
 1759               	/* prologue: function */
 1760               	/* frame size = 0 */
 1761               	/* stack size = 0 */
 1762               	.L__stack_usage = 0
 507:platforms/avr/drivers/serial.c ****     split_transaction_desc_t *trans = &split_transaction_table[sstd_index];
 1763               		.loc 1 507 5 view .LVU471
 508:platforms/avr/drivers/serial.c ****     cli();
 1764               		.loc 1 508 5 view .LVU472
 1765               	/* #APP */
 1766               	 ;  508 "platforms/avr/drivers/serial.c" 1
 1767 0000 F894      		cli
 1768               	 ;  0 "" 2
 509:platforms/avr/drivers/serial.c ****     int retval     = *trans->status;
 1769               		.loc 1 509 5 view .LVU473
 1770               		.loc 1 509 28 is_stmt 0 view .LVU474
 1771               	/* #NOAPP */
 1772 0002 4AE0      		ldi r20,lo8(10)
 1773 0004 489F      		mul r20,r24
 1774 0006 9001      		movw r18,r0
 1775 0008 499F      		mul r20,r25
 1776 000a 300D      		add r19,r0
 1777 000c 1124      		clr __zero_reg__
 1778 000e 2050      		subi r18,lo8(-(split_transaction_table))
 1779 0010 3040      		sbci r19,hi8(-(split_transaction_table))
 1780 0012 D901      		movw r26,r18
 1781 0014 ED91      		ld r30,X+
 1782 0016 FC91      		ld r31,X
 1783               		.loc 1 509 9 view .LVU475
 1784 0018 8081      		ld r24,Z
 1785               	.LVL101:
 1786               		.loc 1 509 9 view .LVU476
 1787 001a 90E0      		ldi r25,0
 1788               	.LVL102:
 510:platforms/avr/drivers/serial.c ****     *trans->status = 0;
 1789               		.loc 1 510 5 is_stmt 1 view .LVU477
 1790               		.loc 1 510 20 is_stmt 0 view .LVU478
 1791 001c 1082      		st Z,__zero_reg__
 511:platforms/avr/drivers/serial.c ****     ;
 1792               		.loc 1 511 5 is_stmt 1 view .LVU479
 512:platforms/avr/drivers/serial.c ****     sei();
 1793               		.loc 1 512 5 view .LVU480
 1794               	/* #APP */
 1795               	 ;  512 "platforms/avr/drivers/serial.c" 1
 1796 001e 7894      		sei
 1797               	 ;  0 "" 2
 513:platforms/avr/drivers/serial.c ****     return retval;
 1798               		.loc 1 513 5 view .LVU481
 1799               	/* #NOAPP */
 1800               	/* epilogue start */
 514:platforms/avr/drivers/serial.c **** }
 1801               		.loc 1 514 1 is_stmt 0 view .LVU482
 1802 0020 0895      		ret
 1803               		.cfi_endproc
 1804               	.LFE47:
 1806               		.text
 1807               	.Letext0:
 1808               		.file 3 "/usr/avr/include/stdint.h"
 1809               		.file 4 "/usr/lib/gcc/avr/8.3.0/include/stddef.h"
 1810               		.file 5 "quantum/matrix.h"
 1811               		.file 6 "quantum/keyboard.h"
 1812               		.file 7 "quantum/action.h"
 1813               		.file 8 "quantum/action_layer.h"
 1814               		.file 9 "tmk_core/common/report.h"
 1815               		.file 10 "tmk_core/common/host.h"
 1816               		.file 11 "quantum/logging/debug.h"
 1817               		.file 12 "quantum/keycode_config.h"
 1818               		.file 13 "tmk_core/common/timer.h"
 1819               		.file 14 "quantum/sequencer/sequencer.h"
 1820               		.file 15 "quantum/split_common/transaction_id_define.h"
 1821               		.file 16 "quantum/keymap.h"
 1822               		.file 17 "quantum/action_util.h"
 1823               		.file 18 "quantum/send_string.h"
 1824               		.file 19 "/usr/avr/include/stdlib.h"
 1825               		.file 20 "quantum/split_common/transport.h"
 1826               		.file 21 "quantum/split_common/transactions.h"
DEFINED SYMBOLS
                            *ABS*:0000000000000000 serial.c
     /tmp/ccMdkC83.s:2      *ABS*:000000000000003e __SP_H__
     /tmp/ccMdkC83.s:3      *ABS*:000000000000003d __SP_L__
     /tmp/ccMdkC83.s:4      *ABS*:000000000000003f __SREG__
     /tmp/ccMdkC83.s:5      *ABS*:0000000000000000 __tmp_reg__
     /tmp/ccMdkC83.s:6      *ABS*:0000000000000001 __zero_reg__
     /tmp/ccMdkC83.s:12     .text.sync_recv:0000000000000000 sync_recv
     /tmp/ccMdkC83.s:72     .text.sync_send:0000000000000000 sync_send
     /tmp/ccMdkC83.s:133    .text.serial_read_chunk.constprop.0:0000000000000000 serial_read_chunk.constprop.0
     /tmp/ccMdkC83.s:343    .text.serial_recive_packet:0000000000000000 serial_recive_packet
     /tmp/ccMdkC83.s:452    .text.soft_serial_initiator_init:0000000000000000 soft_serial_initiator_init
     /tmp/ccMdkC83.s:487    .text.soft_serial_target_init:0000000000000000 soft_serial_target_init
     /tmp/ccMdkC83.s:524    .text.serial_write_chunk:0000000000000000 serial_write_chunk
     /tmp/ccMdkC83.s:690    .text.serial_send_packet:0000000000000000 serial_send_packet
     /tmp/ccMdkC83.s:773    .text.__vector_3:0000000000000000 __vector_3
     /tmp/ccMdkC83.s:1246   .text.soft_serial_transaction:0000000000000000 soft_serial_transaction
     /tmp/ccMdkC83.s:1754   .text.soft_serial_get_and_clean_status:0000000000000000 soft_serial_get_and_clean_status

UNDEFINED SYMBOLS
split_transaction_table
split_shmem
